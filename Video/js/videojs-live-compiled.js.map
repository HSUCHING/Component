{"version":3,"sources":["videojs-live.js"],"names":[],"mappings":"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","file":"videojs-live-compiled.js","sourcesContent":["/**\n *  \n *  github\n *  https://github.com/videojs\n */\n(function(f){if(typeof exports===\"object\"&&typeof module!==\"undefined\"){module.exports=f()}else if(typeof define===\"function\"&&define.amd){define([],f)}else{var g;if(typeof window!==\"undefined\"){g=window}else if(typeof global!==\"undefined\"){g=global}else if(typeof self!==\"undefined\"){g=self}else{g=this}g.videojsContribHls = f()}})(function(){var define,module,exports;return (function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require==\"function\"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error(\"Cannot find module '\"+o+\"'\");throw f.code=\"MODULE_NOT_FOUND\",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require==\"function\"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({1:[function(require,module,exports){\n/**\n * @file bin-utils.js\n */\n\n/**\n * convert a TimeRange to text\n *\n * @param {TimeRange} range the timerange to use for conversion\n * @param {Number} i the iterator on the range to convert\n */\n'use strict';\n\nObject.defineProperty(exports, '__esModule', {\n  value: true\n});\nvar textRange = function textRange(range, i) {\n  return range.start(i) + '-' + range.end(i);\n};\n\n/**\n * format a number as hex string\n *\n * @param {Number} e The number\n * @param {Number} i the iterator\n */\nvar formatHexString = function formatHexString(e, i) {\n  var value = e.toString(16);\n\n  return '00'.substring(0, 2 - value.length) + value + (i % 2 ? ' ' : '');\n};\nvar formatAsciiString = function formatAsciiString(e) {\n  if (e >= 0x20 && e < 0x7e) {\n    return String.fromCharCode(e);\n  }\n  return '.';\n};\n\n/**\n * utils to help dump binary data to the console\n */\nvar utils = {\n  hexDump: function hexDump(data) {\n    var bytes = Array.prototype.slice.call(data);\n    var step = 16;\n    var result = '';\n    var hex = undefined;\n    var ascii = undefined;\n\n    for (var j = 0; j < bytes.length / step; j++) {\n      hex = bytes.slice(j * step, j * step + step).map(formatHexString).join('');\n      ascii = bytes.slice(j * step, j * step + step).map(formatAsciiString).join('');\n      result += hex + ' ' + ascii + '\\n';\n    }\n    return result;\n  },\n  tagDump: function tagDump(tag) {\n    return utils.hexDump(tag.bytes);\n  },\n  textRanges: function textRanges(ranges) {\n    var result = '';\n    var i = undefined;\n\n    for (i = 0; i < ranges.length; i++) {\n      result += textRange(ranges, i) + ' ';\n    }\n    return result;\n  }\n};\n\nexports['default'] = utils;\nmodule.exports = exports['default'];\n},{}],2:[function(require,module,exports){\n/**\n * @file decrypter/aes.js\n *\n * This file contains an adaptation of the AES decryption algorithm\n * from the Standford Javascript Cryptography Library. That work is\n * covered by the following copyright and permissions notice:\n *\n * Copyright 2009-2010 Emily Stark, Mike Hamburg, Dan Boneh.\n * All rights reserved.\n *\n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions are\n * met:\n *\n * 1. Redistributions of source code must retain the above copyright\n *    notice, this list of conditions and the following disclaimer.\n *\n * 2. Redistributions in binary form must reproduce the above\n *    copyright notice, this list of conditions and the following\n *    disclaimer in the documentation and/or other materials provided\n *    with the distribution.\n *\n * THIS SOFTWARE IS PROVIDED BY THE AUTHORS ``AS IS'' AND ANY EXPRESS OR\n * IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\n * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\n * DISCLAIMED. IN NO EVENT SHALL <COPYRIGHT HOLDER> OR CONTRIBUTORS BE\n * LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR\n * CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF\n * SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR\n * BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY,\n * WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE\n * OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN\n * IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n *\n * The views and conclusions contained in the software and documentation\n * are those of the authors and should not be interpreted as representing\n * official policies, either expressed or implied, of the authors.\n */\n\n/**\n * Expand the S-box tables.\n *\n * @private\n */\n'use strict';\n\nObject.defineProperty(exports, '__esModule', {\n  value: true\n});\n\nvar _createClass = (function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ('value' in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; })();\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError('Cannot call a class as a function'); } }\n\nvar precompute = function precompute() {\n  var tables = [[[], [], [], [], []], [[], [], [], [], []]];\n  var encTable = tables[0];\n  var decTable = tables[1];\n  var sbox = encTable[4];\n  var sboxInv = decTable[4];\n  var i = undefined;\n  var x = undefined;\n  var xInv = undefined;\n  var d = [];\n  var th = [];\n  var x2 = undefined;\n  var x4 = undefined;\n  var x8 = undefined;\n  var s = undefined;\n  var tEnc = undefined;\n  var tDec = undefined;\n\n  // Compute double and third tables\n  for (i = 0; i < 256; i++) {\n    th[(d[i] = i << 1 ^ (i >> 7) * 283) ^ i] = i;\n  }\n\n  for (x = xInv = 0; !sbox[x]; x ^= x2 || 1, xInv = th[xInv] || 1) {\n    // Compute sbox\n    s = xInv ^ xInv << 1 ^ xInv << 2 ^ xInv << 3 ^ xInv << 4;\n    s = s >> 8 ^ s & 255 ^ 99;\n    sbox[x] = s;\n    sboxInv[s] = x;\n\n    // Compute MixColumns\n    x8 = d[x4 = d[x2 = d[x]]];\n    tDec = x8 * 0x1010101 ^ x4 * 0x10001 ^ x2 * 0x101 ^ x * 0x1010100;\n    tEnc = d[s] * 0x101 ^ s * 0x1010100;\n\n    for (i = 0; i < 4; i++) {\n      encTable[i][x] = tEnc = tEnc << 24 ^ tEnc >>> 8;\n      decTable[i][s] = tDec = tDec << 24 ^ tDec >>> 8;\n    }\n  }\n\n  // Compactify. Considerable speedup on Firefox.\n  for (i = 0; i < 5; i++) {\n    encTable[i] = encTable[i].slice(0);\n    decTable[i] = decTable[i].slice(0);\n  }\n  return tables;\n};\nvar aesTables = null;\n\n/**\n * Schedule out an AES key for both encryption and decryption. This\n * is a low-level class. Use a cipher mode to do bulk encryption.\n *\n * @class AES\n * @param key {Array} The key as an array of 4, 6 or 8 words.\n */\n\nvar AES = (function () {\n  function AES(key) {\n    _classCallCheck(this, AES);\n\n    /**\n     * The expanded S-box and inverse S-box tables. These will be computed\n     * on the client so that we don't have to send them down the wire.\n     *\n     * There are two tables, _tables[0] is for encryption and\n     * _tables[1] is for decryption.\n     *\n     * The first 4 sub-tables are the expanded S-box with MixColumns. The\n     * last (_tables[01][4]) is the S-box itself.\n     *\n     * @private\n     */\n    // if we have yet to precompute the S-box tables\n    // do so now\n    if (!aesTables) {\n      aesTables = precompute();\n    }\n    // then make a copy of that object for use\n    this._tables = [[aesTables[0][0].slice(), aesTables[0][1].slice(), aesTables[0][2].slice(), aesTables[0][3].slice(), aesTables[0][4].slice()], [aesTables[1][0].slice(), aesTables[1][1].slice(), aesTables[1][2].slice(), aesTables[1][3].slice(), aesTables[1][4].slice()]];\n    var i = undefined;\n    var j = undefined;\n    var tmp = undefined;\n    var encKey = undefined;\n    var decKey = undefined;\n    var sbox = this._tables[0][4];\n    var decTable = this._tables[1];\n    var keyLen = key.length;\n    var rcon = 1;\n\n    if (keyLen !== 4 && keyLen !== 6 && keyLen !== 8) {\n      throw new Error('Invalid aes key size');\n    }\n\n    encKey = key.slice(0);\n    decKey = [];\n    this._key = [encKey, decKey];\n\n    // schedule encryption keys\n    for (i = keyLen; i < 4 * keyLen + 28; i++) {\n      tmp = encKey[i - 1];\n\n      // apply sbox\n      if (i % keyLen === 0 || keyLen === 8 && i % keyLen === 4) {\n        tmp = sbox[tmp >>> 24] << 24 ^ sbox[tmp >> 16 & 255] << 16 ^ sbox[tmp >> 8 & 255] << 8 ^ sbox[tmp & 255];\n\n        // shift rows and add rcon\n        if (i % keyLen === 0) {\n          tmp = tmp << 8 ^ tmp >>> 24 ^ rcon << 24;\n          rcon = rcon << 1 ^ (rcon >> 7) * 283;\n        }\n      }\n\n      encKey[i] = encKey[i - keyLen] ^ tmp;\n    }\n\n    // schedule decryption keys\n    for (j = 0; i; j++, i--) {\n      tmp = encKey[j & 3 ? i : i - 4];\n      if (i <= 4 || j < 4) {\n        decKey[j] = tmp;\n      } else {\n        decKey[j] = decTable[0][sbox[tmp >>> 24]] ^ decTable[1][sbox[tmp >> 16 & 255]] ^ decTable[2][sbox[tmp >> 8 & 255]] ^ decTable[3][sbox[tmp & 255]];\n      }\n    }\n  }\n\n  /**\n   * Decrypt 16 bytes, specified as four 32-bit words.\n   *\n   * @param {Number} encrypted0 the first word to decrypt\n   * @param {Number} encrypted1 the second word to decrypt\n   * @param {Number} encrypted2 the third word to decrypt\n   * @param {Number} encrypted3 the fourth word to decrypt\n   * @param {Int32Array} out the array to write the decrypted words\n   * into\n   * @param {Number} offset the offset into the output array to start\n   * writing results\n   * @return {Array} The plaintext.\n   */\n\n  _createClass(AES, [{\n    key: 'decrypt',\n    value: function decrypt(encrypted0, encrypted1, encrypted2, encrypted3, out, offset) {\n      var key = this._key[1];\n      // state variables a,b,c,d are loaded with pre-whitened data\n      var a = encrypted0 ^ key[0];\n      var b = encrypted3 ^ key[1];\n      var c = encrypted2 ^ key[2];\n      var d = encrypted1 ^ key[3];\n      var a2 = undefined;\n      var b2 = undefined;\n      var c2 = undefined;\n\n      // key.length === 2 ?\n      var nInnerRounds = key.length / 4 - 2;\n      var i = undefined;\n      var kIndex = 4;\n      var table = this._tables[1];\n\n      // load up the tables\n      var table0 = table[0];\n      var table1 = table[1];\n      var table2 = table[2];\n      var table3 = table[3];\n      var sbox = table[4];\n\n      // Inner rounds. Cribbed from OpenSSL.\n      for (i = 0; i < nInnerRounds; i++) {\n        a2 = table0[a >>> 24] ^ table1[b >> 16 & 255] ^ table2[c >> 8 & 255] ^ table3[d & 255] ^ key[kIndex];\n        b2 = table0[b >>> 24] ^ table1[c >> 16 & 255] ^ table2[d >> 8 & 255] ^ table3[a & 255] ^ key[kIndex + 1];\n        c2 = table0[c >>> 24] ^ table1[d >> 16 & 255] ^ table2[a >> 8 & 255] ^ table3[b & 255] ^ key[kIndex + 2];\n        d = table0[d >>> 24] ^ table1[a >> 16 & 255] ^ table2[b >> 8 & 255] ^ table3[c & 255] ^ key[kIndex + 3];\n        kIndex += 4;\n        a = a2;b = b2;c = c2;\n      }\n\n      // Last round.\n      for (i = 0; i < 4; i++) {\n        out[(3 & -i) + offset] = sbox[a >>> 24] << 24 ^ sbox[b >> 16 & 255] << 16 ^ sbox[c >> 8 & 255] << 8 ^ sbox[d & 255] ^ key[kIndex++];\n        a2 = a;a = b;b = c;c = d;d = a2;\n      }\n    }\n  }]);\n\n  return AES;\n})();\n\nexports['default'] = AES;\nmodule.exports = exports['default'];\n},{}],3:[function(require,module,exports){\n/**\n * @file decrypter/async-stream.js\n */\n'use strict';\n\nObject.defineProperty(exports, '__esModule', {\n  value: true\n});\n\nvar _createClass = (function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ('value' in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; })();\n\nvar _get = function get(_x, _x2, _x3) { var _again = true; _function: while (_again) { var object = _x, property = _x2, receiver = _x3; _again = false; if (object === null) object = Function.prototype; var desc = Object.getOwnPropertyDescriptor(object, property); if (desc === undefined) { var parent = Object.getPrototypeOf(object); if (parent === null) { return undefined; } else { _x = parent; _x2 = property; _x3 = receiver; _again = true; desc = parent = undefined; continue _function; } } else if ('value' in desc) { return desc.value; } else { var getter = desc.get; if (getter === undefined) { return undefined; } return getter.call(receiver); } } };\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { 'default': obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError('Cannot call a class as a function'); } }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== 'function' && superClass !== null) { throw new TypeError('Super expression must either be null or a function, not ' + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\nvar _stream = require('../stream');\n\nvar _stream2 = _interopRequireDefault(_stream);\n\n/**\n * A wrapper around the Stream class to use setTiemout\n * and run stream \"jobs\" Asynchronously\n *\n * @class AsyncStream\n * @extends Stream\n */\n\nvar AsyncStream = (function (_Stream) {\n  _inherits(AsyncStream, _Stream);\n\n  function AsyncStream() {\n    _classCallCheck(this, AsyncStream);\n\n    _get(Object.getPrototypeOf(AsyncStream.prototype), 'constructor', this).call(this, _stream2['default']);\n    this.jobs = [];\n    this.delay = 1;\n    this.timeout_ = null;\n  }\n\n  /**\n   * process an async job\n   *\n   * @private\n   */\n\n  _createClass(AsyncStream, [{\n    key: 'processJob_',\n    value: function processJob_() {\n      this.jobs.shift()();\n      if (this.jobs.length) {\n        this.timeout_ = setTimeout(this.processJob_.bind(this), this.delay);\n      } else {\n        this.timeout_ = null;\n      }\n    }\n\n    /**\n     * push a job into the stream\n     *\n     * @param {Function} job the job to push into the stream\n     */\n  }, {\n    key: 'push',\n    value: function push(job) {\n      this.jobs.push(job);\n      if (!this.timeout_) {\n        this.timeout_ = setTimeout(this.processJob_.bind(this), this.delay);\n      }\n    }\n  }]);\n\n  return AsyncStream;\n})(_stream2['default']);\n\nexports['default'] = AsyncStream;\nmodule.exports = exports['default'];\n},{\"../stream\":18}],4:[function(require,module,exports){\n/**\n * @file decrypter/decrypter.js\n *\n * An asynchronous implementation of AES-128 CBC decryption with\n * PKCS#7 padding.\n */\n\n'use strict';\n\nObject.defineProperty(exports, '__esModule', {\n  value: true\n});\n\nvar _createClass = (function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ('value' in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; })();\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { 'default': obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError('Cannot call a class as a function'); } }\n\nvar _aes = require('./aes');\n\nvar _aes2 = _interopRequireDefault(_aes);\n\nvar _asyncStream = require('./async-stream');\n\nvar _asyncStream2 = _interopRequireDefault(_asyncStream);\n\nvar _pkcs7 = require('pkcs7');\n\n/**\n * Convert network-order (big-endian) bytes into their little-endian\n * representation.\n */\nvar ntoh = function ntoh(word) {\n  return word << 24 | (word & 0xff00) << 8 | (word & 0xff0000) >> 8 | word >>> 24;\n};\n\n/**\n * Decrypt bytes using AES-128 with CBC and PKCS#7 padding.\n *\n * @param {Uint8Array} encrypted the encrypted bytes\n * @param {Uint32Array} key the bytes of the decryption key\n * @param {Uint32Array} initVector the initialization vector (IV) to\n * use for the first round of CBC.\n * @return {Uint8Array} the decrypted bytes\n *\n * @see http://en.wikipedia.org/wiki/Advanced_Encryption_Standard\n * @see http://en.wikipedia.org/wiki/Block_cipher_mode_of_operation#Cipher_Block_Chaining_.28CBC.29\n * @see https://tools.ietf.org/html/rfc2315\n */\nvar decrypt = function decrypt(encrypted, key, initVector) {\n  // word-level access to the encrypted bytes\n  var encrypted32 = new Int32Array(encrypted.buffer, encrypted.byteOffset, encrypted.byteLength >> 2);\n\n  var decipher = new _aes2['default'](Array.prototype.slice.call(key));\n\n  // byte and word-level access for the decrypted output\n  var decrypted = new Uint8Array(encrypted.byteLength);\n  var decrypted32 = new Int32Array(decrypted.buffer);\n\n  // temporary variables for working with the IV, encrypted, and\n  // decrypted data\n  var init0 = undefined;\n  var init1 = undefined;\n  var init2 = undefined;\n  var init3 = undefined;\n  var encrypted0 = undefined;\n  var encrypted1 = undefined;\n  var encrypted2 = undefined;\n  var encrypted3 = undefined;\n\n  // iteration variable\n  var wordIx = undefined;\n\n  // pull out the words of the IV to ensure we don't modify the\n  // passed-in reference and easier access\n  init0 = initVector[0];\n  init1 = initVector[1];\n  init2 = initVector[2];\n  init3 = initVector[3];\n\n  // decrypt four word sequences, applying cipher-block chaining (CBC)\n  // to each decrypted block\n  for (wordIx = 0; wordIx < encrypted32.length; wordIx += 4) {\n    // convert big-endian (network order) words into little-endian\n    // (javascript order)\n    encrypted0 = ntoh(encrypted32[wordIx]);\n    encrypted1 = ntoh(encrypted32[wordIx + 1]);\n    encrypted2 = ntoh(encrypted32[wordIx + 2]);\n    encrypted3 = ntoh(encrypted32[wordIx + 3]);\n\n    // decrypt the block\n    decipher.decrypt(encrypted0, encrypted1, encrypted2, encrypted3, decrypted32, wordIx);\n\n    // XOR with the IV, and restore network byte-order to obtain the\n    // plaintext\n    decrypted32[wordIx] = ntoh(decrypted32[wordIx] ^ init0);\n    decrypted32[wordIx + 1] = ntoh(decrypted32[wordIx + 1] ^ init1);\n    decrypted32[wordIx + 2] = ntoh(decrypted32[wordIx + 2] ^ init2);\n    decrypted32[wordIx + 3] = ntoh(decrypted32[wordIx + 3] ^ init3);\n\n    // setup the IV for the next round\n    init0 = encrypted0;\n    init1 = encrypted1;\n    init2 = encrypted2;\n    init3 = encrypted3;\n  }\n\n  return decrypted;\n};\n\nexports.decrypt = decrypt;\n/**\n * The `Decrypter` class that manages decryption of AES\n * data through `AsyncStream` objects and the `decrypt`\n * function\n *\n * @param {Uint8Array} encrypted the encrypted bytes\n * @param {Uint32Array} key the bytes of the decryption key\n * @param {Uint32Array} initVector the initialization vector (IV) to\n * @param {Function} done the function to run when done\n * @class Decrypter\n */\n\nvar Decrypter = (function () {\n  function Decrypter(encrypted, key, initVector, done) {\n    _classCallCheck(this, Decrypter);\n\n    var step = Decrypter.STEP;\n    var encrypted32 = new Int32Array(encrypted.buffer);\n    var decrypted = new Uint8Array(encrypted.byteLength);\n    var i = 0;\n\n    this.asyncStream_ = new _asyncStream2['default']();\n\n    // split up the encryption job and do the individual chunks asynchronously\n    this.asyncStream_.push(this.decryptChunk_(encrypted32.subarray(i, i + step), key, initVector, decrypted));\n    for (i = step; i < encrypted32.length; i += step) {\n      initVector = new Uint32Array([ntoh(encrypted32[i - 4]), ntoh(encrypted32[i - 3]), ntoh(encrypted32[i - 2]), ntoh(encrypted32[i - 1])]);\n      this.asyncStream_.push(this.decryptChunk_(encrypted32.subarray(i, i + step), key, initVector, decrypted));\n    }\n    // invoke the done() callback when everything is finished\n    this.asyncStream_.push(function () {\n      // remove pkcs#7 padding from the decrypted bytes\n      done(null, (0, _pkcs7.unpad)(decrypted));\n    });\n  }\n\n  /**\n   * a getter for step the maximum number of bytes to process at one time\n   *\n   * @return {Number} the value of step 32000\n   */\n\n  _createClass(Decrypter, [{\n    key: 'decryptChunk_',\n\n    /**\n     * @private\n     */\n    value: function decryptChunk_(encrypted, key, initVector, decrypted) {\n      return function () {\n        var bytes = decrypt(encrypted, key, initVector);\n\n        decrypted.set(bytes, encrypted.byteOffset);\n      };\n    }\n  }], [{\n    key: 'STEP',\n    get: function get() {\n      // 4 * 8000;\n      return 32000;\n    }\n  }]);\n\n  return Decrypter;\n})();\n\nexports.Decrypter = Decrypter;\nexports['default'] = {\n  Decrypter: Decrypter,\n  decrypt: decrypt\n};\n},{\"./aes\":2,\"./async-stream\":3,\"pkcs7\":23}],5:[function(require,module,exports){\n/**\n * @file decrypter/index.js\n *\n * Index module to easily import the primary components of AES-128\n * decryption. Like this:\n *\n * ```js\n * import {Decrypter, decrypt, AsyncStream} from './src/decrypter';\n * ```\n */\n'use strict';\n\nObject.defineProperty(exports, '__esModule', {\n  value: true\n});\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { 'default': obj }; }\n\nvar _decrypter = require('./decrypter');\n\nvar _asyncStream = require('./async-stream');\n\nvar _asyncStream2 = _interopRequireDefault(_asyncStream);\n\nexports['default'] = {\n  decrypt: _decrypter.decrypt,\n  Decrypter: _decrypter.Decrypter,\n  AsyncStream: _asyncStream2['default']\n};\nmodule.exports = exports['default'];\n},{\"./async-stream\":3,\"./decrypter\":4}],6:[function(require,module,exports){\n(function (global){\n/**\n * @file hls-audio-track.js\n */\n'use strict';\n\nObject.defineProperty(exports, '__esModule', {\n  value: true\n});\n\nvar _createClass = (function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ('value' in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; })();\n\nvar _get = function get(_x2, _x3, _x4) { var _again = true; _function: while (_again) { var object = _x2, property = _x3, receiver = _x4; _again = false; if (object === null) object = Function.prototype; var desc = Object.getOwnPropertyDescriptor(object, property); if (desc === undefined) { var parent = Object.getPrototypeOf(object); if (parent === null) { return undefined; } else { _x2 = parent; _x3 = property; _x4 = receiver; _again = true; desc = parent = undefined; continue _function; } } else if ('value' in desc) { return desc.value; } else { var getter = desc.get; if (getter === undefined) { return undefined; } return getter.call(receiver); } } };\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { 'default': obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError('Cannot call a class as a function'); } }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== 'function' && superClass !== null) { throw new TypeError('Super expression must either be null or a function, not ' + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\nvar _videoJs = (typeof window !== \"undefined\" ? window['videojs'] : typeof global !== \"undefined\" ? global['videojs'] : null);\n\nvar _playlistLoader = require('./playlist-loader');\n\nvar _playlistLoader2 = _interopRequireDefault(_playlistLoader);\n\n/**\n * HlsAudioTrack extends video.js audio tracks but adds HLS\n * specific data storage such as playlist loaders, mediaGroups\n * and default/autoselect\n *\n * @param {Object} options options to create HlsAudioTrack with\n * @class HlsAudioTrack\n * @extends AudioTrack\n */\n\nvar HlsAudioTrack = (function (_AudioTrack) {\n  _inherits(HlsAudioTrack, _AudioTrack);\n\n  function HlsAudioTrack(options) {\n    _classCallCheck(this, HlsAudioTrack);\n\n    _get(Object.getPrototypeOf(HlsAudioTrack.prototype), 'constructor', this).call(this, {\n      kind: options['default'] ? 'main' : 'alternative',\n      enabled: options['default'] || false,\n      language: options.language,\n      label: options.label\n    });\n\n    this.hls = options.hls;\n    this.autoselect = options.autoselect || false;\n    this['default'] = options['default'] || false;\n    this.withCredentials = options.withCredentials || false;\n    this.mediaGroups_ = [];\n    this.addLoader(options.mediaGroup, options.resolvedUri);\n  }\n\n  /**\n   * get a PlaylistLoader from this track given a mediaGroup name\n   *\n   * @param {String} mediaGroup the mediaGroup to get the loader for\n   * @return {PlaylistLoader|Null} the PlaylistLoader or null\n   */\n\n  _createClass(HlsAudioTrack, [{\n    key: 'getLoader',\n    value: function getLoader(mediaGroup) {\n      for (var i = 0; i < this.mediaGroups_.length; i++) {\n        var mgl = this.mediaGroups_[i];\n\n        if (mgl.mediaGroup === mediaGroup) {\n          return mgl.loader;\n        }\n      }\n    }\n\n    /**\n     * add a PlaylistLoader given a mediaGroup, and a uri. for a combined track\n     * we store null for the playlistloader\n     *\n     * @param {String} mediaGroup the mediaGroup to get the loader for\n     * @param {String} uri the uri to get the audio track/mediaGroup from\n     */\n  }, {\n    key: 'addLoader',\n    value: function addLoader(mediaGroup) {\n      var uri = arguments.length <= 1 || arguments[1] === undefined ? null : arguments[1];\n\n      var loader = null;\n\n      if (uri) {\n        // TODO: this should probably happen upstream in Master Playlist\n        // Controller when we can switch PlaylistLoader sources\n        // then we can just store the uri here instead\n        loader = new _playlistLoader2['default'](uri, this.hls, this.withCredentials);\n      }\n      this.mediaGroups_.push({ mediaGroup: mediaGroup, loader: loader });\n    }\n\n    /**\n     * remove a playlist loader from a track given the mediaGroup\n     *\n     * @param {String} mediaGroup the mediaGroup to remove\n     */\n  }, {\n    key: 'removeLoader',\n    value: function removeLoader(mediaGroup) {\n      for (var i = 0; i < this.mediaGroups_.length; i++) {\n        var mgl = this.mediaGroups_[i];\n\n        if (mgl.mediaGroup === mediaGroup) {\n          if (mgl.loader) {\n            mgl.loader.dispose();\n          }\n          this.mediaGroups_.splice(i, 1);\n          return;\n        }\n      }\n    }\n\n    /**\n     * Dispose of this audio track and\n     * the playlist loader that it holds inside\n     */\n  }, {\n    key: 'dispose',\n    value: function dispose() {\n      var i = this.mediaGroups_.length;\n\n      while (i--) {\n        this.removeLoader(this.mediaGroups_[i].mediaGroup);\n      }\n    }\n  }]);\n\n  return HlsAudioTrack;\n})(_videoJs.AudioTrack);\n\nexports['default'] = HlsAudioTrack;\nmodule.exports = exports['default'];\n}).call(this,typeof global !== \"undefined\" ? global : typeof self !== \"undefined\" ? self : typeof window !== \"undefined\" ? window : {})\n},{\"./playlist-loader\":12}],7:[function(require,module,exports){\n/**\n * @file m3u8/index.js\n *\n * Utilities for parsing M3U8 files. If the entire manifest is available,\n * `Parser` will create an object representation with enough detail for managing\n * playback. `ParseStream` and `LineStream` are lower-level parsing primitives\n * that do not assume the entirety of the manifest is ready and expose a\n * ReadableStream-like interface.\n */\n\n'use strict';\n\nObject.defineProperty(exports, '__esModule', {\n  value: true\n});\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { 'default': obj }; }\n\nvar _lineStream = require('./line-stream');\n\nvar _lineStream2 = _interopRequireDefault(_lineStream);\n\nvar _parseStream = require('./parse-stream');\n\nvar _parseStream2 = _interopRequireDefault(_parseStream);\n\nvar _parser = require('./parser');\n\nvar _parser2 = _interopRequireDefault(_parser);\n\nexports['default'] = {\n  LineStream: _lineStream2['default'],\n  ParseStream: _parseStream2['default'],\n  Parser: _parser2['default']\n};\nmodule.exports = exports['default'];\n},{\"./line-stream\":8,\"./parse-stream\":9,\"./parser\":10}],8:[function(require,module,exports){\n/**\n * @file m3u8/line-stream.js\n */\n'use strict';\n\nObject.defineProperty(exports, '__esModule', {\n  value: true\n});\n\nvar _createClass = (function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ('value' in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; })();\n\nvar _get = function get(_x, _x2, _x3) { var _again = true; _function: while (_again) { var object = _x, property = _x2, receiver = _x3; _again = false; if (object === null) object = Function.prototype; var desc = Object.getOwnPropertyDescriptor(object, property); if (desc === undefined) { var parent = Object.getPrototypeOf(object); if (parent === null) { return undefined; } else { _x = parent; _x2 = property; _x3 = receiver; _again = true; desc = parent = undefined; continue _function; } } else if ('value' in desc) { return desc.value; } else { var getter = desc.get; if (getter === undefined) { return undefined; } return getter.call(receiver); } } };\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { 'default': obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError('Cannot call a class as a function'); } }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== 'function' && superClass !== null) { throw new TypeError('Super expression must either be null or a function, not ' + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\nvar _stream = require('../stream');\n\nvar _stream2 = _interopRequireDefault(_stream);\n\n/**\n * A stream that buffers string input and generates a `data` event for each\n * line.\n *\n * @class LineStream\n * @extends Stream\n */\n\nvar LineStream = (function (_Stream) {\n  _inherits(LineStream, _Stream);\n\n  function LineStream() {\n    _classCallCheck(this, LineStream);\n\n    _get(Object.getPrototypeOf(LineStream.prototype), 'constructor', this).call(this);\n    this.buffer = '';\n  }\n\n  /**\n   * Add new data to be parsed.\n   *\n   * @param {String} data the text to process\n   */\n\n  _createClass(LineStream, [{\n    key: 'push',\n    value: function push(data) {\n      var nextNewline = undefined;\n\n      this.buffer += data;\n      nextNewline = this.buffer.indexOf('\\n');\n\n      for (; nextNewline > -1; nextNewline = this.buffer.indexOf('\\n')) {\n        this.trigger('data', this.buffer.substring(0, nextNewline));\n        this.buffer = this.buffer.substring(nextNewline + 1);\n      }\n    }\n  }]);\n\n  return LineStream;\n})(_stream2['default']);\n\nexports['default'] = LineStream;\nmodule.exports = exports['default'];\n},{\"../stream\":18}],9:[function(require,module,exports){\n/**\n * @file m3u8/parse-stream.js\n */\n'use strict';\n\nObject.defineProperty(exports, '__esModule', {\n  value: true\n});\n\nvar _createClass = (function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ('value' in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; })();\n\nvar _get = function get(_x, _x2, _x3) { var _again = true; _function: while (_again) { var object = _x, property = _x2, receiver = _x3; _again = false; if (object === null) object = Function.prototype; var desc = Object.getOwnPropertyDescriptor(object, property); if (desc === undefined) { var parent = Object.getPrototypeOf(object); if (parent === null) { return undefined; } else { _x = parent; _x2 = property; _x3 = receiver; _again = true; desc = parent = undefined; continue _function; } } else if ('value' in desc) { return desc.value; } else { var getter = desc.get; if (getter === undefined) { return undefined; } return getter.call(receiver); } } };\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { 'default': obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError('Cannot call a class as a function'); } }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== 'function' && superClass !== null) { throw new TypeError('Super expression must either be null or a function, not ' + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\nvar _stream = require('../stream');\n\nvar _stream2 = _interopRequireDefault(_stream);\n\n/**\n * \"forgiving\" attribute list psuedo-grammar:\n * attributes -> keyvalue (',' keyvalue)*\n * keyvalue   -> key '=' value\n * key        -> [^=]*\n * value      -> '\"' [^\"]* '\"' | [^,]*\n */\nvar attributeSeparator = function attributeSeparator() {\n  var key = '[^=]*';\n  var value = '\"[^\"]*\"|[^,]*';\n  var keyvalue = '(?:' + key + ')=(?:' + value + ')';\n\n  return new RegExp('(?:^|,)(' + keyvalue + ')');\n};\n\n/**\n * Parse attributes from a line given the seperator\n *\n * @param {String} attributes the attibute line to parse\n */\nvar parseAttributes = function parseAttributes(attributes) {\n  // split the string using attributes as the separator\n  var attrs = attributes.split(attributeSeparator());\n  var i = attrs.length;\n  var result = {};\n  var attr = undefined;\n\n  while (i--) {\n    // filter out unmatched portions of the string\n    if (attrs[i] === '') {\n      continue;\n    }\n\n    // split the key and value\n    attr = /([^=]*)=(.*)/.exec(attrs[i]).slice(1);\n    // trim whitespace and remove optional quotes around the value\n    attr[0] = attr[0].replace(/^\\s+|\\s+$/g, '');\n    attr[1] = attr[1].replace(/^\\s+|\\s+$/g, '');\n    attr[1] = attr[1].replace(/^['\"](.*)['\"]$/g, '$1');\n    result[attr[0]] = attr[1];\n  }\n  return result;\n};\n\n/**\n * A line-level M3U8 parser event stream. It expects to receive input one\n * line at a time and performs a context-free parse of its contents. A stream\n * interpretation of a manifest can be useful if the manifest is expected to\n * be too large to fit comfortably into memory or the entirety of the input\n * is not immediately available. Otherwise, it's probably much easier to work\n * with a regular `Parser` object.\n *\n * Produces `data` events with an object that captures the parser's\n * interpretation of the input. That object has a property `tag` that is one\n * of `uri`, `comment`, or `tag`. URIs only have a single additional\n * property, `line`, which captures the entirety of the input without\n * interpretation. Comments similarly have a single additional property\n * `text` which is the input without the leading `#`.\n *\n * Tags always have a property `tagType` which is the lower-cased version of\n * the M3U8 directive without the `#EXT` or `#EXT-X-` prefix. For instance,\n * `#EXT-X-MEDIA-SEQUENCE` becomes `media-sequence` when parsed. Unrecognized\n * tags are given the tag type `unknown` and a single additional property\n * `data` with the remainder of the input.\n *\n * @class ParseStream\n * @extends Stream\n */\n\nvar ParseStream = (function (_Stream) {\n  _inherits(ParseStream, _Stream);\n\n  function ParseStream() {\n    _classCallCheck(this, ParseStream);\n\n    _get(Object.getPrototypeOf(ParseStream.prototype), 'constructor', this).call(this);\n  }\n\n  /**\n   * Parses an additional line of input.\n   *\n   * @param {String} line a single line of an M3U8 file to parse\n   */\n\n  _createClass(ParseStream, [{\n    key: 'push',\n    value: function push(line) {\n      var match = undefined;\n      var event = undefined;\n\n      // strip whitespace\n      line = line.replace(/^[\\u0000\\s]+|[\\u0000\\s]+$/g, '');\n      if (line.length === 0) {\n        // ignore empty lines\n        return;\n      }\n\n      // URIs\n      if (line[0] !== '#') {\n        this.trigger('data', {\n          type: 'uri',\n          uri: line\n        });\n        return;\n      }\n\n      // Comments\n      if (line.indexOf('#EXT') !== 0) {\n        this.trigger('data', {\n          type: 'comment',\n          text: line.slice(1)\n        });\n        return;\n      }\n\n      // strip off any carriage returns here so the regex matching\n      // doesn't have to account for them.\n      line = line.replace('\\r', '');\n\n      // Tags\n      match = /^#EXTM3U/.exec(line);\n      if (match) {\n        this.trigger('data', {\n          type: 'tag',\n          tagType: 'm3u'\n        });\n        return;\n      }\n      match = /^#EXTINF:?([0-9\\.]*)?,?(.*)?$/.exec(line);\n      if (match) {\n        event = {\n          type: 'tag',\n          tagType: 'inf'\n        };\n        if (match[1]) {\n          event.duration = parseFloat(match[1]);\n        }\n        if (match[2]) {\n          event.title = match[2];\n        }\n        this.trigger('data', event);\n        return;\n      }\n      match = /^#EXT-X-TARGETDURATION:?([0-9.]*)?/.exec(line);\n      if (match) {\n        event = {\n          type: 'tag',\n          tagType: 'targetduration'\n        };\n        if (match[1]) {\n          event.duration = parseInt(match[1], 10);\n        }\n        this.trigger('data', event);\n        return;\n      }\n      match = /^#ZEN-TOTAL-DURATION:?([0-9.]*)?/.exec(line);\n      if (match) {\n        event = {\n          type: 'tag',\n          tagType: 'totalduration'\n        };\n        if (match[1]) {\n          event.duration = parseInt(match[1], 10);\n        }\n        this.trigger('data', event);\n        return;\n      }\n      match = /^#EXT-X-VERSION:?([0-9.]*)?/.exec(line);\n      if (match) {\n        event = {\n          type: 'tag',\n          tagType: 'version'\n        };\n        if (match[1]) {\n          event.version = parseInt(match[1], 10);\n        }\n        this.trigger('data', event);\n        return;\n      }\n      match = /^#EXT-X-MEDIA-SEQUENCE:?(\\-?[0-9.]*)?/.exec(line);\n      if (match) {\n        event = {\n          type: 'tag',\n          tagType: 'media-sequence'\n        };\n        if (match[1]) {\n          event.number = parseInt(match[1], 10);\n        }\n        this.trigger('data', event);\n        return;\n      }\n      match = /^#EXT-X-DISCONTINUITY-SEQUENCE:?(\\-?[0-9.]*)?/.exec(line);\n      if (match) {\n        event = {\n          type: 'tag',\n          tagType: 'discontinuity-sequence'\n        };\n        if (match[1]) {\n          event.number = parseInt(match[1], 10);\n        }\n        this.trigger('data', event);\n        return;\n      }\n      match = /^#EXT-X-PLAYLIST-TYPE:?(.*)?$/.exec(line);\n      if (match) {\n        event = {\n          type: 'tag',\n          tagType: 'playlist-type'\n        };\n        if (match[1]) {\n          event.playlistType = match[1];\n        }\n        this.trigger('data', event);\n        return;\n      }\n      match = /^#EXT-X-BYTERANGE:?([0-9.]*)?@?([0-9.]*)?/.exec(line);\n      if (match) {\n        event = {\n          type: 'tag',\n          tagType: 'byterange'\n        };\n        if (match[1]) {\n          event.length = parseInt(match[1], 10);\n        }\n        if (match[2]) {\n          event.offset = parseInt(match[2], 10);\n        }\n        this.trigger('data', event);\n        return;\n      }\n      match = /^#EXT-X-ALLOW-CACHE:?(YES|NO)?/.exec(line);\n      if (match) {\n        event = {\n          type: 'tag',\n          tagType: 'allow-cache'\n        };\n        if (match[1]) {\n          event.allowed = !/NO/.test(match[1]);\n        }\n        this.trigger('data', event);\n        return;\n      }\n      match = /^#EXT-X-STREAM-INF:?(.*)$/.exec(line);\n      if (match) {\n        event = {\n          type: 'tag',\n          tagType: 'stream-inf'\n        };\n        if (match[1]) {\n          event.attributes = parseAttributes(match[1]);\n\n          if (event.attributes.RESOLUTION) {\n            var split = event.attributes.RESOLUTION.split('x');\n            var resolution = {};\n\n            if (split[0]) {\n              resolution.width = parseInt(split[0], 10);\n            }\n            if (split[1]) {\n              resolution.height = parseInt(split[1], 10);\n            }\n            event.attributes.RESOLUTION = resolution;\n          }\n          if (event.attributes.BANDWIDTH) {\n            event.attributes.BANDWIDTH = parseInt(event.attributes.BANDWIDTH, 10);\n          }\n          if (event.attributes['PROGRAM-ID']) {\n            event.attributes['PROGRAM-ID'] = parseInt(event.attributes['PROGRAM-ID'], 10);\n          }\n        }\n        this.trigger('data', event);\n        return;\n      }\n      match = /^#EXT-X-MEDIA:?(.*)$/.exec(line);\n      if (match) {\n        event = {\n          type: 'tag',\n          tagType: 'media'\n        };\n        if (match[1]) {\n          event.attributes = parseAttributes(match[1]);\n        }\n        this.trigger('data', event);\n        return;\n      }\n      match = /^#EXT-X-ENDLIST/.exec(line);\n      if (match) {\n        this.trigger('data', {\n          type: 'tag',\n          tagType: 'endlist'\n        });\n        return;\n      }\n      match = /^#EXT-X-DISCONTINUITY/.exec(line);\n      if (match) {\n        this.trigger('data', {\n          type: 'tag',\n          tagType: 'discontinuity'\n        });\n        return;\n      }\n      match = /^#EXT-X-KEY:?(.*)$/.exec(line);\n      if (match) {\n        event = {\n          type: 'tag',\n          tagType: 'key'\n        };\n        if (match[1]) {\n          event.attributes = parseAttributes(match[1]);\n          // parse the IV string into a Uint32Array\n          if (event.attributes.IV) {\n            if (event.attributes.IV.substring(0, 2).toLowerCase() === '0x') {\n              event.attributes.IV = event.attributes.IV.substring(2);\n            }\n\n            event.attributes.IV = event.attributes.IV.match(/.{8}/g);\n            event.attributes.IV[0] = parseInt(event.attributes.IV[0], 16);\n            event.attributes.IV[1] = parseInt(event.attributes.IV[1], 16);\n            event.attributes.IV[2] = parseInt(event.attributes.IV[2], 16);\n            event.attributes.IV[3] = parseInt(event.attributes.IV[3], 16);\n            event.attributes.IV = new Uint32Array(event.attributes.IV);\n          }\n        }\n        this.trigger('data', event);\n        return;\n      }\n\n      // unknown tag type\n      this.trigger('data', {\n        type: 'tag',\n        data: line.slice(4, line.length)\n      });\n    }\n  }]);\n\n  return ParseStream;\n})(_stream2['default']);\n\nexports['default'] = ParseStream;\nmodule.exports = exports['default'];\n},{\"../stream\":18}],10:[function(require,module,exports){\n(function (global){\n/**\n * @file m3u8/parser.js\n */\n'use strict';\n\nObject.defineProperty(exports, '__esModule', {\n  value: true\n});\n\nvar _createClass = (function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ('value' in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; })();\n\nvar _get = function get(_x, _x2, _x3) { var _again = true; _function: while (_again) { var object = _x, property = _x2, receiver = _x3; _again = false; if (object === null) object = Function.prototype; var desc = Object.getOwnPropertyDescriptor(object, property); if (desc === undefined) { var parent = Object.getPrototypeOf(object); if (parent === null) { return undefined; } else { _x = parent; _x2 = property; _x3 = receiver; _again = true; desc = parent = undefined; continue _function; } } else if ('value' in desc) { return desc.value; } else { var getter = desc.get; if (getter === undefined) { return undefined; } return getter.call(receiver); } } };\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { 'default': obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError('Cannot call a class as a function'); } }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== 'function' && superClass !== null) { throw new TypeError('Super expression must either be null or a function, not ' + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\nvar _stream = require('../stream');\n\nvar _stream2 = _interopRequireDefault(_stream);\n\nvar _lineStream = require('./line-stream');\n\nvar _lineStream2 = _interopRequireDefault(_lineStream);\n\nvar _parseStream = require('./parse-stream');\n\nvar _parseStream2 = _interopRequireDefault(_parseStream);\n\nvar _videoJs = (typeof window !== \"undefined\" ? window['videojs'] : typeof global !== \"undefined\" ? global['videojs'] : null);\n\n/**\n * A parser for M3U8 files. The current interpretation of the input is\n * exposed as a property `manifest` on parser objects. It's just two lines to\n * create and parse a manifest once you have the contents available as a string:\n *\n * ```js\n * var parser = new videojs.m3u8.Parser();\n * parser.push(xhr.responseText);\n * ```\n *\n * New input can later be applied to update the manifest object by calling\n * `push` again.\n *\n * The parser attempts to create a usable manifest object even if the\n * underlying input is somewhat nonsensical. It emits `info` and `warning`\n * events during the parse if it encounters input that seems invalid or\n * requires some property of the manifest object to be defaulted.\n *\n * @class Parser\n * @extends Stream\n */\n\nvar Parser = (function (_Stream) {\n  _inherits(Parser, _Stream);\n\n  function Parser() {\n    _classCallCheck(this, Parser);\n\n    _get(Object.getPrototypeOf(Parser.prototype), 'constructor', this).call(this);\n    this.lineStream = new _lineStream2['default']();\n    this.parseStream = new _parseStream2['default']();\n    this.lineStream.pipe(this.parseStream);\n    /* eslint-disable consistent-this */\n    var self = this;\n    /* eslint-enable consistent-this */\n    var uris = [];\n    var currentUri = {};\n    var _key = undefined;\n    var noop = function noop() {};\n    var defaultMediaGroups = {\n      'AUDIO': {},\n      'VIDEO': {},\n      'CLOSED-CAPTIONS': {},\n      'SUBTITLES': {}\n    };\n    // group segments into numbered timelines delineated by discontinuities\n    var currentTimeline = 0;\n\n    // the manifest is empty until the parse stream begins delivering data\n    this.manifest = {\n      allowCache: true,\n      discontinuityStarts: []\n    };\n\n    // update the manifest with the m3u8 entry from the parse stream\n    this.parseStream.on('data', function (entry) {\n      var mediaGroup = undefined;\n      var rendition = undefined;\n\n      ({\n        tag: function tag() {\n          // switch based on the tag type\n          (({\n            'allow-cache': function allowCache() {\n              this.manifest.allowCache = entry.allowed;\n              if (!('allowed' in entry)) {\n                this.trigger('info', {\n                  message: 'defaulting allowCache to YES'\n                });\n                this.manifest.allowCache = true;\n              }\n            },\n            byterange: function byterange() {\n              var byterange = {};\n\n              if ('length' in entry) {\n                currentUri.byterange = byterange;\n                byterange.length = entry.length;\n\n                if (!('offset' in entry)) {\n                  this.trigger('info', {\n                    message: 'defaulting offset to zero'\n                  });\n                  entry.offset = 0;\n                }\n              }\n              if ('offset' in entry) {\n                currentUri.byterange = byterange;\n                byterange.offset = entry.offset;\n              }\n            },\n            endlist: function endlist() {\n              this.manifest.endList = true;\n            },\n            inf: function inf() {\n              if (!('mediaSequence' in this.manifest)) {\n                this.manifest.mediaSequence = 0;\n                this.trigger('info', {\n                  message: 'defaulting media sequence to zero'\n                });\n              }\n              if (!('discontinuitySequence' in this.manifest)) {\n                this.manifest.discontinuitySequence = 0;\n                this.trigger('info', {\n                  message: 'defaulting discontinuity sequence to zero'\n                });\n              }\n              if (entry.duration >= 0) {\n                currentUri.duration = entry.duration;\n              }\n\n              this.manifest.segments = uris;\n            },\n            key: function key() {\n              if (!entry.attributes) {\n                this.trigger('warn', {\n                  message: 'ignoring key declaration without attribute list'\n                });\n                return;\n              }\n              // clear the active encryption key\n              if (entry.attributes.METHOD === 'NONE') {\n                _key = null;\n                return;\n              }\n              if (!entry.attributes.URI) {\n                this.trigger('warn', {\n                  message: 'ignoring key declaration without URI'\n                });\n                return;\n              }\n              if (!entry.attributes.METHOD) {\n                this.trigger('warn', {\n                  message: 'defaulting key method to AES-128'\n                });\n              }\n\n              // setup an encryption key for upcoming segments\n              _key = {\n                method: entry.attributes.METHOD || 'AES-128',\n                uri: entry.attributes.URI\n              };\n\n              if (typeof entry.attributes.IV !== 'undefined') {\n                _key.iv = entry.attributes.IV;\n              }\n            },\n            'media-sequence': function mediaSequence() {\n              if (!isFinite(entry.number)) {\n                this.trigger('warn', {\n                  message: 'ignoring invalid media sequence: ' + entry.number\n                });\n                return;\n              }\n              this.manifest.mediaSequence = entry.number;\n            },\n            'discontinuity-sequence': function discontinuitySequence() {\n              if (!isFinite(entry.number)) {\n                this.trigger('warn', {\n                  message: 'ignoring invalid discontinuity sequence: ' + entry.number\n                });\n                return;\n              }\n              this.manifest.discontinuitySequence = entry.number;\n              currentTimeline = entry.number;\n            },\n            'playlist-type': function playlistType() {\n              if (!/VOD|EVENT/.test(entry.playlistType)) {\n                this.trigger('warn', {\n                  message: 'ignoring unknown playlist type: ' + entry.playlist\n                });\n                return;\n              }\n              this.manifest.playlistType = entry.playlistType;\n            },\n            'stream-inf': function streamInf() {\n              this.manifest.playlists = uris;\n              this.manifest.mediaGroups = this.manifest.mediaGroups || defaultMediaGroups;\n\n              if (!entry.attributes) {\n                this.trigger('warn', {\n                  message: 'ignoring empty stream-inf attributes'\n                });\n                return;\n              }\n\n              if (!currentUri.attributes) {\n                currentUri.attributes = {};\n              }\n              currentUri.attributes = (0, _videoJs.mergeOptions)(currentUri.attributes, entry.attributes);\n            },\n            media: function media() {\n              this.manifest.mediaGroups = this.manifest.mediaGroups || defaultMediaGroups;\n\n              if (!(entry.attributes && entry.attributes.TYPE && entry.attributes['GROUP-ID'] && entry.attributes.NAME)) {\n                this.trigger('warn', {\n                  message: 'ignoring incomplete or missing media group'\n                });\n                return;\n              }\n\n              // find the media group, creating defaults as necessary\n              var mediaGroupType = this.manifest.mediaGroups[entry.attributes.TYPE];\n\n              mediaGroupType[entry.attributes['GROUP-ID']] = mediaGroupType[entry.attributes['GROUP-ID']] || {};\n              mediaGroup = mediaGroupType[entry.attributes['GROUP-ID']];\n\n              // collect the rendition metadata\n              rendition = {\n                'default': /yes/i.test(entry.attributes.DEFAULT)\n              };\n              if (rendition['default']) {\n                rendition.autoselect = true;\n              } else {\n                rendition.autoselect = /yes/i.test(entry.attributes.AUTOSELECT);\n              }\n              if (entry.attributes.LANGUAGE) {\n                rendition.language = entry.attributes.LANGUAGE;\n              }\n              if (entry.attributes.URI) {\n                rendition.uri = entry.attributes.URI;\n              }\n\n              // insert the new rendition\n              mediaGroup[entry.attributes.NAME] = rendition;\n            },\n            discontinuity: function discontinuity() {\n              currentTimeline += 1;\n              currentUri.discontinuity = true;\n              this.manifest.discontinuityStarts.push(uris.length);\n            },\n            targetduration: function targetduration() {\n              if (!isFinite(entry.duration) || entry.duration < 0) {\n                this.trigger('warn', {\n                  message: 'ignoring invalid target duration: ' + entry.duration\n                });\n                return;\n              }\n              this.manifest.targetDuration = entry.duration;\n            },\n            totalduration: function totalduration() {\n              if (!isFinite(entry.duration) || entry.duration < 0) {\n                this.trigger('warn', {\n                  message: 'ignoring invalid total duration: ' + entry.duration\n                });\n                return;\n              }\n              this.manifest.totalDuration = entry.duration;\n            }\n          })[entry.tagType] || noop).call(self);\n        },\n        uri: function uri() {\n          currentUri.uri = entry.uri;\n          uris.push(currentUri);\n\n          // if no explicit duration was declared, use the target duration\n          if (this.manifest.targetDuration && !('duration' in currentUri)) {\n            this.trigger('warn', {\n              message: 'defaulting segment duration to the target duration'\n            });\n            currentUri.duration = this.manifest.targetDuration;\n          }\n          // annotate with encryption information, if necessary\n          if (_key) {\n            currentUri.key = _key;\n          }\n          currentUri.timeline = currentTimeline;\n\n          // prepare for the next URI\n          currentUri = {};\n        },\n        comment: function comment() {\n          // comments are not important for playback\n        }\n      })[entry.type].call(self);\n    });\n  }\n\n  /**\n   * Parse the input string and update the manifest object.\n   *\n   * @param {String} chunk a potentially incomplete portion of the manifest\n   */\n\n  _createClass(Parser, [{\n    key: 'push',\n    value: function push(chunk) {\n      this.lineStream.push(chunk);\n    }\n\n    /**\n     * Flush any remaining input. This can be handy if the last line of an M3U8\n     * manifest did not contain a trailing newline but the file has been\n     * completely received.\n     */\n  }, {\n    key: 'end',\n    value: function end() {\n      // flush any buffered input\n      this.lineStream.push('\\n');\n    }\n  }]);\n\n  return Parser;\n})(_stream2['default']);\n\nexports['default'] = Parser;\nmodule.exports = exports['default'];\n}).call(this,typeof global !== \"undefined\" ? global : typeof self !== \"undefined\" ? self : typeof window !== \"undefined\" ? window : {})\n},{\"../stream\":18,\"./line-stream\":8,\"./parse-stream\":9}],11:[function(require,module,exports){\n(function (global){\n/**\n * @file master-playlist-controller.js\n */\n'use strict';\n\nObject.defineProperty(exports, '__esModule', {\n  value: true\n});\n\nvar _createClass = (function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ('value' in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; })();\n\nvar _get = function get(_x2, _x3, _x4) { var _again = true; _function: while (_again) { var object = _x2, property = _x3, receiver = _x4; _again = false; if (object === null) object = Function.prototype; var desc = Object.getOwnPropertyDescriptor(object, property); if (desc === undefined) { var parent = Object.getPrototypeOf(object); if (parent === null) { return undefined; } else { _x2 = parent; _x3 = property; _x4 = receiver; _again = true; desc = parent = undefined; continue _function; } } else if ('value' in desc) { return desc.value; } else { var getter = desc.get; if (getter === undefined) { return undefined; } return getter.call(receiver); } } };\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { 'default': obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError('Cannot call a class as a function'); } }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== 'function' && superClass !== null) { throw new TypeError('Super expression must either be null or a function, not ' + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\nvar _playlistLoader = require('./playlist-loader');\n\nvar _playlistLoader2 = _interopRequireDefault(_playlistLoader);\n\nvar _segmentLoader = require('./segment-loader');\n\nvar _segmentLoader2 = _interopRequireDefault(_segmentLoader);\n\nvar _ranges = require('./ranges');\n\nvar _ranges2 = _interopRequireDefault(_ranges);\n\nvar _videoJs = (typeof window !== \"undefined\" ? window['videojs'] : typeof global !== \"undefined\" ? global['videojs'] : null);\n\nvar _videoJs2 = _interopRequireDefault(_videoJs);\n\nvar _hlsAudioTrack = require('./hls-audio-track');\n\nvar _hlsAudioTrack2 = _interopRequireDefault(_hlsAudioTrack);\n\n// 5 minute blacklist\nvar BLACKLIST_DURATION = 5 * 60 * 1000;\nvar Hls = undefined;\n\nvar parseCodecs = function parseCodecs(codecs) {\n  var result = {\n    codecCount: 0,\n    videoCodec: null,\n    audioProfile: null\n  };\n\n  result.codecCount = codecs.split(',').length;\n  result.codecCount = result.codecCount || 2;\n\n  // parse the video codec but ignore the version\n  result.videoCodec = /(^|\\s|,)+(avc1)[^ ,]*/i.exec(codecs);\n  result.videoCodec = result.videoCodec && result.videoCodec[2];\n\n  // parse the last field of the audio codec\n  result.audioProfile = /(^|\\s|,)+mp4a.\\d+\\.(\\d+)/i.exec(codecs);\n  result.audioProfile = result.audioProfile && result.audioProfile[2];\n\n  return result;\n};\n\n/**\n * the master playlist controller controller all interactons\n * between playlists and segmentloaders. At this time this mainly\n * involves a master playlist and a series of audio playlists\n * if they are available\n *\n * @class MasterPlaylistController\n * @extends videojs.EventTarget\n */\n\nvar MasterPlaylistController = (function (_videojs$EventTarget) {\n  _inherits(MasterPlaylistController, _videojs$EventTarget);\n\n  function MasterPlaylistController(_ref) {\n    var _this = this;\n\n    var url = _ref.url;\n    var withCredentials = _ref.withCredentials;\n    var mode = _ref.mode;\n    var tech = _ref.tech;\n    var bandwidth = _ref.bandwidth;\n    var externHls = _ref.externHls;\n\n    _classCallCheck(this, MasterPlaylistController);\n\n    _get(Object.getPrototypeOf(MasterPlaylistController.prototype), 'constructor', this).call(this);\n\n    Hls = externHls;\n\n    this.withCredentials = withCredentials;\n    this.tech_ = tech;\n    this.hls_ = tech.hls;\n    this.mode_ = mode;\n    this.audioTracks_ = [];\n\n    this.mediaSource = new _videoJs2['default'].MediaSource({ mode: mode });\n    this.mediaSource.on('audioinfo', function (e) {\n      return _this.trigger(e);\n    });\n    // load the media source into the player\n    this.mediaSource.addEventListener('sourceopen', this.handleSourceOpen_.bind(this));\n\n    var segmentLoaderOptions = {\n      hls: this.hls_,\n      mediaSource: this.mediaSource,\n      currentTime: this.tech_.currentTime.bind(this.tech_),\n      withCredentials: this.withCredentials,\n      seekable: function seekable() {\n        return _this.seekable();\n      },\n      seeking: function seeking() {\n        return _this.tech_.seeking();\n      },\n      setCurrentTime: function setCurrentTime(a) {\n        return _this.setCurrentTime(a);\n      },\n      hasPlayed: function hasPlayed() {\n        return _this.tech_.played().length !== 0;\n      },\n      bandwidth: bandwidth\n    };\n\n    // combined audio/video or just video when alternate audio track is selected\n    this.mainSegmentLoader_ = new _segmentLoader2['default'](segmentLoaderOptions);\n    // alternate audio track\n    this.audioSegmentLoader_ = new _segmentLoader2['default'](segmentLoaderOptions);\n\n    if (!url) {\n      throw new Error('A non-empty playlist URL is required');\n    }\n\n    this.masterPlaylistLoader_ = new _playlistLoader2['default'](url, this.hls_, this.withCredentials);\n\n    this.masterPlaylistLoader_.on('loadedmetadata', function () {\n      var media = _this.masterPlaylistLoader_.media();\n\n      // if this isn't a live video and preload permits, start\n      // downloading segments\n      if (media.endList && _this.tech_.preload() !== 'none') {\n        _this.mainSegmentLoader_.playlist(media);\n        _this.mainSegmentLoader_.expired(_this.masterPlaylistLoader_.expired_);\n        _this.mainSegmentLoader_.load();\n      }\n\n      _this.setupSourceBuffer_();\n      _this.setupFirstPlay();\n      _this.useAudio();\n    });\n\n    this.masterPlaylistLoader_.on('loadedplaylist', function () {\n      var updatedPlaylist = _this.masterPlaylistLoader_.media();\n      var seekable = undefined;\n\n      if (!updatedPlaylist) {\n        // select the initial variant\n        _this.initialMedia_ = _this.selectPlaylist();\n        _this.masterPlaylistLoader_.media(_this.initialMedia_);\n        _this.fillAudioTracks_();\n\n        _this.trigger('selectedinitialmedia');\n        return;\n      }\n\n      _this.mainSegmentLoader_.playlist(updatedPlaylist);\n      _this.mainSegmentLoader_.expired(_this.masterPlaylistLoader_.expired_);\n      _this.updateDuration();\n\n      // update seekable\n      seekable = _this.seekable();\n      if (!updatedPlaylist.endList && seekable.length !== 0) {\n        _this.mediaSource.addSeekableRange_(seekable.start(0), seekable.end(0));\n      }\n    });\n\n    this.masterPlaylistLoader_.on('error', function () {\n      _this.blacklistCurrentPlaylist(_this.masterPlaylistLoader_.error);\n    });\n\n    this.masterPlaylistLoader_.on('mediachanging', function () {\n      _this.mainSegmentLoader_.pause();\n    });\n\n    this.masterPlaylistLoader_.on('mediachange', function () {\n      _this.mainSegmentLoader_.abort();\n      _this.mainSegmentLoader_.load();\n      _this.tech_.trigger({\n        type: 'mediachange',\n        bubbles: true\n      });\n    });\n\n    this.mainSegmentLoader_.on('progress', function () {\n      // figure out what stream the next segment should be downloaded from\n      // with the updated bandwidth information\n      _this.masterPlaylistLoader_.media(_this.selectPlaylist());\n\n      _this.trigger('progress');\n    });\n\n    this.mainSegmentLoader_.on('error', function () {\n      _this.blacklistCurrentPlaylist(_this.mainSegmentLoader_.error());\n    });\n\n    this.audioSegmentLoader_.on('error', function () {\n      _videoJs2['default'].log.warn('Problem encountered with the current alternate audio track' + '. Switching back to default.');\n      _this.audioSegmentLoader_.abort();\n      _this.audioPlaylistLoader_ = null;\n      _this.useAudio();\n    });\n\n    this.masterPlaylistLoader_.load();\n  }\n\n  /**\n   * fill our internal list of HlsAudioTracks with data from\n   * the master playlist or use a default\n   *\n   * @private\n   */\n\n  _createClass(MasterPlaylistController, [{\n    key: 'fillAudioTracks_',\n    value: function fillAudioTracks_() {\n      var master = this.master();\n      var mediaGroups = master.mediaGroups || {};\n\n      // force a default if we have none or we are not\n      // in html5 mode (the only mode to support more than one\n      // audio track)\n      if (!mediaGroups || !mediaGroups.AUDIO || Object.keys(mediaGroups.AUDIO).length === 0 || this.mode_ !== 'html5') {\n        // \"main\" audio group, track name \"default\"\n        mediaGroups.AUDIO = { main: { 'default': { 'default': true } } };\n      }\n\n      var tracks = {};\n\n      for (var mediaGroup in mediaGroups.AUDIO) {\n        for (var label in mediaGroups.AUDIO[mediaGroup]) {\n          var properties = mediaGroups.AUDIO[mediaGroup][label];\n\n          // if the track already exists add a new \"location\"\n          // since tracks in different mediaGroups are actually the same\n          // track with different locations to download them from\n          if (tracks[label]) {\n            tracks[label].addLoader(mediaGroup, properties.resolvedUri);\n            continue;\n          }\n\n          var track = new _hlsAudioTrack2['default'](_videoJs2['default'].mergeOptions(properties, {\n            hls: this.hls_,\n            withCredentials: this.withCredential,\n            mediaGroup: mediaGroup,\n            label: label\n          }));\n\n          tracks[label] = track;\n          this.audioTracks_.push(track);\n        }\n      }\n    }\n\n    /**\n     * Call load on our SegmentLoaders\n     */\n  }, {\n    key: 'load',\n    value: function load() {\n      this.mainSegmentLoader_.load();\n      if (this.audioPlaylistLoader_) {\n        this.audioSegmentLoader_.load();\n      }\n    }\n\n    /**\n     * Get the current active Media Group for Audio\n     * given the selected playlist and its attributes\n     */\n  }, {\n    key: 'activeAudioGroup',\n    value: function activeAudioGroup() {\n      var media = this.masterPlaylistLoader_.media();\n      var mediaGroup = 'main';\n\n      if (media && media.attributes && media.attributes.AUDIO) {\n        mediaGroup = media.attributes.AUDIO;\n      }\n\n      return mediaGroup;\n    }\n\n    /**\n     * Use any audio track that we have, and start to load it\n     */\n  }, {\n    key: 'useAudio',\n    value: function useAudio() {\n      var _this2 = this;\n\n      var track = undefined;\n\n      this.audioTracks_.forEach(function (t) {\n        if (!track && t.enabled) {\n          track = t;\n        }\n      });\n\n      // called too early or no track is enabled\n      if (!track) {\n        return;\n      }\n\n      // Pause any alternative audio\n      if (this.audioPlaylistLoader_) {\n        this.audioPlaylistLoader_.pause();\n        this.audioPlaylistLoader_ = null;\n        this.audioSegmentLoader_.pause();\n      }\n\n      // If the audio track for the active audio group has\n      // a playlist loader than it is an alterative audio track\n      // otherwise it is a part of the mainSegmenLoader\n      var loader = track.getLoader(this.activeAudioGroup());\n\n      if (!loader) {\n        this.mainSegmentLoader_.clearBuffer();\n        return;\n      }\n\n      // TODO: it may be better to create the playlist loader here\n      // when we can change an audioPlaylistLoaders src\n      this.audioPlaylistLoader_ = loader;\n\n      if (this.audioPlaylistLoader_.started) {\n        this.audioPlaylistLoader_.load();\n        this.audioSegmentLoader_.load();\n        this.audioSegmentLoader_.clearBuffer();\n        return;\n      }\n\n      this.audioPlaylistLoader_.on('loadedmetadata', function () {\n        /* eslint-disable no-shadow */\n        var media = _this2.audioPlaylistLoader_.media();\n        /* eslint-enable no-shadow */\n\n        _this2.audioSegmentLoader_.playlist(media);\n        _this2.addMimeType_(_this2.audioSegmentLoader_, 'mp4a.40.2', media);\n\n        // if the video is already playing, or if this isn't a live video and preload\n        // permits, start downloading segments\n        if (!_this2.tech_.paused() || media.endList && _this2.tech_.preload() !== 'none') {\n          _this2.audioSegmentLoader_.load();\n        }\n\n        if (!media.endList) {\n          // trigger the playlist loader to start \"expired time\"-tracking\n          _this2.audioPlaylistLoader_.trigger('firstplay');\n        }\n      });\n\n      this.audioPlaylistLoader_.on('loadedplaylist', function () {\n        var updatedPlaylist = undefined;\n\n        if (_this2.audioPlaylistLoader_) {\n          updatedPlaylist = _this2.audioPlaylistLoader_.media();\n        }\n\n        if (!updatedPlaylist) {\n          // only one playlist to select\n          _this2.audioPlaylistLoader_.media(_this2.audioPlaylistLoader_.playlists.master.playlists[0]);\n          return;\n        }\n\n        _this2.audioSegmentLoader_.playlist(updatedPlaylist);\n      });\n\n      this.audioPlaylistLoader_.on('error', function () {\n        _videoJs2['default'].log.warn('Problem encountered loading the alternate audio track' + '. Switching back to default.');\n        _this2.audioSegmentLoader_.abort();\n        _this2.audioPlaylistLoader_ = null;\n        _this2.useAudio();\n      });\n\n      this.audioSegmentLoader_.clearBuffer();\n      this.audioPlaylistLoader_.start();\n    }\n\n    /**\n     * Re-tune playback quality level for the current player\n     * conditions. This method may perform destructive actions, like\n     * removing already buffered content, to readjust the currently\n     * active playlist quickly.\n     *\n     * @private\n     */\n  }, {\n    key: 'fastQualityChange_',\n    value: function fastQualityChange_() {\n      var media = this.selectPlaylist();\n\n      if (media !== this.masterPlaylistLoader_.media()) {\n        this.masterPlaylistLoader_.media(media);\n        this.mainSegmentLoader_.sourceUpdater_.remove(this.tech_.currentTime() + 5, Infinity);\n      }\n    }\n\n    /**\n     * Begin playback.\n     */\n  }, {\n    key: 'play',\n    value: function play() {\n      if (this.setupFirstPlay()) {\n        return;\n      }\n\n      if (this.tech_.ended()) {\n        this.tech_.setCurrentTime(0);\n      }\n\n      this.load();\n\n      // if the viewer has paused and we fell out of the live window,\n      // seek forward to the earliest available position\n      if (this.tech_.duration() === Infinity) {\n        if (this.tech_.currentTime() < this.tech_.seekable().start(0)) {\n          return this.tech_.setCurrentTime(this.tech_.seekable().start(0));\n        }\n      }\n    }\n\n    /**\n     * Seek to the latest media position if this is a live video and the\n     * player and video are loaded and initialized.\n     */\n  }, {\n    key: 'setupFirstPlay',\n    value: function setupFirstPlay() {\n      var seekable = undefined;\n      var media = this.masterPlaylistLoader_.media();\n\n      // check that everything is ready to begin buffering\n      // 1) the active media playlist is available\n      if (media &&\n      // 2) the video is a live stream\n      !media.endList &&\n\n      // 3) the player is not paused\n      !this.tech_.paused() &&\n\n      // 4) the player has not started playing\n      !this.hasPlayed_) {\n\n        this.load();\n\n        // trigger the playlist loader to start \"expired time\"-tracking\n        this.masterPlaylistLoader_.trigger('firstplay');\n        this.hasPlayed_ = true;\n\n        // seek to the latest media position for live videos\n        seekable = this.seekable();\n        if (seekable.length) {\n          this.tech_.setCurrentTime(seekable.end(0));\n        }\n\n        return true;\n      }\n      return false;\n    }\n\n    /**\n     * handle the sourceopen event on the MediaSource\n     *\n     * @private\n     */\n  }, {\n    key: 'handleSourceOpen_',\n    value: function handleSourceOpen_() {\n      // Only attempt to create the source buffer if none already exist.\n      // handleSourceOpen is also called when we are \"re-opening\" a source buffer\n      // after `endOfStream` has been called (in response to a seek for instance)\n      this.setupSourceBuffer_();\n\n      // if autoplay is enabled, begin playback. This is duplicative of\n      // code in video.js but is required because play() must be invoked\n      // *after* the media source has opened.\n      if (this.tech_.autoplay()) {\n        this.tech_.play();\n      }\n\n      this.trigger('sourceopen');\n    }\n\n    /**\n     * Blacklists a playlist when an error occurs for a set amount of time\n     * making it unavailable for selection by the rendition selection algorithm\n     * and then forces a new playlist (rendition) selection.\n     *\n     * @param {Object=} error an optional error that may include the playlist\n     * to blacklist\n     */\n  }, {\n    key: 'blacklistCurrentPlaylist',\n    value: function blacklistCurrentPlaylist() {\n      var error = arguments.length <= 0 || arguments[0] === undefined ? {} : arguments[0];\n\n      var currentPlaylist = undefined;\n      var nextPlaylist = undefined;\n\n      // If the `error` was generated by the playlist loader, it will contain\n      // the playlist we were trying to load (but failed) and that should be\n      // blacklisted instead of the currently selected playlist which is likely\n      // out-of-date in this scenario\n      currentPlaylist = error.playlist || this.masterPlaylistLoader_.media();\n\n      // If there is no current playlist, then an error occurred while we were\n      // trying to load the master OR while we were disposing of the tech\n      if (!currentPlaylist) {\n        this.error = error;\n        return this.mediaSource.endOfStream('network');\n      }\n\n      // Blacklist this playlist\n      currentPlaylist.excludeUntil = Date.now() + BLACKLIST_DURATION;\n\n      // Select a new playlist\n      nextPlaylist = this.selectPlaylist();\n\n      if (nextPlaylist) {\n        _videoJs2['default'].log.warn('Problem encountered with the current ' + 'HLS playlist. Switching to another playlist.');\n\n        return this.masterPlaylistLoader_.media(nextPlaylist);\n      }\n      _videoJs2['default'].log.warn('Problem encountered with the current ' + 'HLS playlist. No suitable alternatives found.');\n      // We have no more playlists we can select so we must fail\n      this.error = error;\n      return this.mediaSource.endOfStream('network');\n    }\n\n    /**\n     * Pause all segment loaders\n     */\n  }, {\n    key: 'pauseLoading',\n    value: function pauseLoading() {\n      this.mainSegmentLoader_.pause();\n      if (this.audioPlaylistLoader_) {\n        this.audioSegmentLoader_.pause();\n      }\n    }\n\n    /**\n     * set the current time on all segment loaders\n     *\n     * @param {TimeRange} currentTime the current time to set\n     * @return {TimeRange} the current time\n     */\n  }, {\n    key: 'setCurrentTime',\n    value: function setCurrentTime(currentTime) {\n      var buffered = _ranges2['default'].findRange(this.tech_.buffered(), currentTime);\n\n      if (!(this.masterPlaylistLoader_ && this.masterPlaylistLoader_.media())) {\n        // return immediately if the metadata is not ready yet\n        return 0;\n      }\n\n      // it's clearly an edge-case but don't thrown an error if asked to\n      // seek within an empty playlist\n      if (!this.masterPlaylistLoader_.media().segments) {\n        return 0;\n      }\n\n      // if the seek location is already buffered, continue buffering as\n      // usual\n      if (buffered && buffered.length) {\n        return currentTime;\n      }\n\n      // cancel outstanding requests so we begin buffering at the new\n      // location\n      this.mainSegmentLoader_.abort();\n      if (this.audioPlaylistLoader_) {\n        this.audioSegmentLoader_.abort();\n      }\n\n      if (!this.tech_.paused()) {\n        this.mainSegmentLoader_.load();\n        if (this.audioPlaylistLoader_) {\n          this.audioSegmentLoader_.load();\n        }\n      }\n    }\n\n    /**\n     * get the current duration\n     *\n     * @return {TimeRange} the duration\n     */\n  }, {\n    key: 'duration',\n    value: function duration() {\n      if (!this.masterPlaylistLoader_) {\n        return 0;\n      }\n\n      if (this.mediaSource) {\n        return this.mediaSource.duration;\n      }\n\n      return Hls.Playlist.duration(this.masterPlaylistLoader_.media());\n    }\n\n    /**\n     * check the seekable range\n     *\n     * @return {TimeRange} the seekable range\n     */\n  }, {\n    key: 'seekable',\n    value: function seekable() {\n      var media = undefined;\n      var mainSeekable = undefined;\n      var audioSeekable = undefined;\n\n      if (!this.masterPlaylistLoader_) {\n        return _videoJs2['default'].createTimeRanges();\n      }\n      media = this.masterPlaylistLoader_.media();\n      if (!media) {\n        return _videoJs2['default'].createTimeRanges();\n      }\n\n      mainSeekable = Hls.Playlist.seekable(media, this.masterPlaylistLoader_.expired_);\n      if (mainSeekable.length === 0) {\n        return mainSeekable;\n      }\n\n      if (this.audioPlaylistLoader_) {\n        audioSeekable = Hls.Playlist.seekable(this.audioPlaylistLoader_.media(), this.audioPlaylistLoader_.expired_);\n        if (audioSeekable.length === 0) {\n          return audioSeekable;\n        }\n      }\n\n      if (!audioSeekable) {\n        // seekable has been calculated based on buffering video data so it\n        // can be returned directly\n        return mainSeekable;\n      }\n\n      return _videoJs2['default'].createTimeRanges([[audioSeekable.start(0) > mainSeekable.start(0) ? audioSeekable.start(0) : mainSeekable.start(0), audioSeekable.end(0) < mainSeekable.end(0) ? audioSeekable.end(0) : mainSeekable.end(0)]]);\n    }\n\n    /**\n     * Update the player duration\n     */\n  }, {\n    key: 'updateDuration',\n    value: function updateDuration() {\n      var _this3 = this;\n\n      var oldDuration = this.mediaSource.duration;\n      var newDuration = Hls.Playlist.duration(this.masterPlaylistLoader_.media());\n      var buffered = this.tech_.buffered();\n      var setDuration = function setDuration() {\n        _this3.mediaSource.duration = newDuration;\n        _this3.tech_.trigger('durationchange');\n\n        _this3.mediaSource.removeEventListener('sourceopen', setDuration);\n      };\n\n      if (buffered.length > 0) {\n        newDuration = Math.max(newDuration, buffered.end(buffered.length - 1));\n      }\n\n      // if the duration has changed, invalidate the cached value\n      if (oldDuration !== newDuration) {\n        // update the duration\n        if (this.mediaSource.readyState !== 'open') {\n          this.mediaSource.addEventListener('sourceopen', setDuration);\n        } else {\n          setDuration();\n        }\n      }\n    }\n\n    /**\n     * dispose of the MasterPlaylistController and everything\n     * that it controls\n     */\n  }, {\n    key: 'dispose',\n    value: function dispose() {\n      this.masterPlaylistLoader_.dispose();\n      this.audioTracks_.forEach(function (track) {\n        track.dispose();\n      });\n      this.audioTracks_.length = 0;\n      this.mainSegmentLoader_.dispose();\n      this.audioSegmentLoader_.dispose();\n    }\n\n    /**\n     * return the master playlist object if we have one\n     *\n     * @return {Object} the master playlist object that we parsed\n     */\n  }, {\n    key: 'master',\n    value: function master() {\n      return this.masterPlaylistLoader_.master;\n    }\n\n    /**\n     * return the currently selected playlist\n     *\n     * @return {Object} the currently selected playlist object that we parsed\n     */\n  }, {\n    key: 'media',\n    value: function media() {\n      // playlist loader will not return media if it has not been fully loaded\n      return this.masterPlaylistLoader_.media() || this.initialMedia_;\n    }\n\n    /**\n     * setup our internal source buffers on our segment Loaders\n     *\n     * @private\n     */\n  }, {\n    key: 'setupSourceBuffer_',\n    value: function setupSourceBuffer_() {\n      var media = this.masterPlaylistLoader_.media();\n\n      // wait until a media playlist is available and the Media Source is\n      // attached\n      if (!media || this.mediaSource.readyState !== 'open') {\n        return;\n      }\n\n      this.addMimeType_(this.mainSegmentLoader_, 'avc1.4d400d, mp4a.40.2', media);\n\n      // exclude any incompatible variant streams from future playlist\n      // selection\n      this.excludeIncompatibleVariants_(media);\n    }\n\n    /**\n     * add a time type to a segmentLoader\n     *\n     * @param {SegmentLoader} segmentLoader the segmentloader to work on\n     * @param {String} codecs to use by default\n     * @param {Object} the parsed media object\n     * @private\n     */\n  }, {\n    key: 'addMimeType_',\n    value: function addMimeType_(segmentLoader, defaultCodecs, media) {\n      var mimeType = 'video/mp2t';\n\n      // if the codecs were explicitly specified, pass them along to the\n      // source buffer\n      if (media.attributes && media.attributes.CODECS) {\n        mimeType += '; codecs=\"' + media.attributes.CODECS + '\"';\n      } else {\n        mimeType += '; codecs=\"' + defaultCodecs + '\"';\n      }\n      segmentLoader.mimeType(mimeType);\n    }\n\n    /**\n     * Blacklist playlists that are known to be codec or\n     * stream-incompatible with the SourceBuffer configuration. For\n     * instance, Media Source Extensions would cause the video element to\n     * stall waiting for video data if you switched from a variant with\n     * video and audio to an audio-only one.\n     *\n     * @param {Object} media a media playlist compatible with the current\n     * set of SourceBuffers. Variants in the current master playlist that\n     * do not appear to have compatible codec or stream configurations\n     * will be excluded from the default playlist selection algorithm\n     * indefinitely.\n     * @private\n     */\n  }, {\n    key: 'excludeIncompatibleVariants_',\n    value: function excludeIncompatibleVariants_(media) {\n      var master = this.masterPlaylistLoader_.master;\n      var codecCount = 2;\n      var videoCodec = null;\n      var audioProfile = null;\n      var codecs = undefined;\n\n      if (media.attributes && media.attributes.CODECS) {\n        codecs = parseCodecs(media.attributes.CODECS);\n        videoCodec = codecs.videoCodec;\n        audioProfile = codecs.audioProfile;\n        codecCount = codecs.codecCount;\n      }\n      master.playlists.forEach(function (variant) {\n        var variantCodecs = {\n          codecCount: 2,\n          videoCodec: null,\n          audioProfile: null\n        };\n\n        if (variant.attributes && variant.attributes.CODECS) {\n          variantCodecs = parseCodecs(variant.attributes.CODECS);\n        }\n\n        // if the streams differ in the presence or absence of audio or\n        // video, they are incompatible\n        if (variantCodecs.codecCount !== codecCount) {\n          variant.excludeUntil = Infinity;\n        }\n\n        // if h.264 is specified on the current playlist, some flavor of\n        // it must be specified on all compatible variants\n        if (variantCodecs.videoCodec !== videoCodec) {\n          variant.excludeUntil = Infinity;\n        }\n        // HE-AAC (\"mp4a.40.5\") is incompatible with all other versions of\n        // AAC audio in Chrome 46. Don't mix the two.\n        if (variantCodecs.audioProfile === '5' && audioProfile !== '5' || audioProfile === '5' && variantCodecs.audioProfile !== '5') {\n          variant.excludeUntil = Infinity;\n        }\n      });\n    }\n  }]);\n\n  return MasterPlaylistController;\n})(_videoJs2['default'].EventTarget);\n\nexports['default'] = MasterPlaylistController;\nmodule.exports = exports['default'];\n}).call(this,typeof global !== \"undefined\" ? global : typeof self !== \"undefined\" ? self : typeof window !== \"undefined\" ? window : {})\n},{\"./hls-audio-track\":6,\"./playlist-loader\":12,\"./ranges\":14,\"./segment-loader\":16}],12:[function(require,module,exports){\n(function (global){\n/**\n * @file playlist-loader.js\n *\n * A state machine that manages the loading, caching, and updating of\n * M3U8 playlists.\n *\n */\n'use strict';\n\nObject.defineProperty(exports, '__esModule', {\n  value: true\n});\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { 'default': obj }; }\n\nvar _resolveUrl = require('./resolve-url');\n\nvar _resolveUrl2 = _interopRequireDefault(_resolveUrl);\n\nvar _videoJs = (typeof window !== \"undefined\" ? window['videojs'] : typeof global !== \"undefined\" ? global['videojs'] : null);\n\nvar _stream = require('./stream');\n\nvar _stream2 = _interopRequireDefault(_stream);\n\nvar _m3u8 = require('./m3u8');\n\nvar _m3u82 = _interopRequireDefault(_m3u8);\n\n/**\n  * Returns a new array of segments that is the result of merging\n  * properties from an older list of segments onto an updated\n  * list. No properties on the updated playlist will be overridden.\n  *\n  * @param {Array} original the outdated list of segments\n  * @param {Array} update the updated list of segments\n  * @param {Number=} offset the index of the first update\n  * segment in the original segment list. For non-live playlists,\n  * this should always be zero and does not need to be\n  * specified. For live playlists, it should be the difference\n  * between the media sequence numbers in the original and updated\n  * playlists.\n  * @return a list of merged segment objects\n  */\nvar updateSegments = function updateSegments(original, update, offset) {\n  var result = update.slice();\n  var length = undefined;\n  var i = undefined;\n\n  offset = offset || 0;\n  length = Math.min(original.length, update.length + offset);\n\n  for (i = offset; i < length; i++) {\n    result[i - offset] = (0, _videoJs.mergeOptions)(original[i], result[i - offset]);\n  }\n  return result;\n};\n\n/**\n  * Returns a new master playlist that is the result of merging an\n  * updated media playlist into the original version. If the\n  * updated media playlist does not match any of the playlist\n  * entries in the original master playlist, null is returned.\n  *\n  * @param {Object} master a parsed master M3U8 object\n  * @param {Object} media a parsed media M3U8 object\n  * @return {Object} a new object that represents the original\n  * master playlist with the updated media playlist merged in, or\n  * null if the merge produced no change.\n  */\nvar updateMaster = function updateMaster(master, media) {\n  var changed = false;\n  var result = (0, _videoJs.mergeOptions)(master, {});\n  var i = master.playlists.length;\n  var playlist = undefined;\n  var segment = undefined;\n  var j = undefined;\n\n  while (i--) {\n    playlist = result.playlists[i];\n    if (playlist.uri === media.uri) {\n      // consider the playlist unchanged if the number of segments\n      // are equal and the media sequence number is unchanged\n      if (playlist.segments && media.segments && playlist.segments.length === media.segments.length && playlist.mediaSequence === media.mediaSequence) {\n        continue;\n      }\n\n      result.playlists[i] = (0, _videoJs.mergeOptions)(playlist, media);\n      result.playlists[media.uri] = result.playlists[i];\n\n      // if the update could overlap existing segment information,\n      // merge the two lists\n      if (playlist.segments) {\n        result.playlists[i].segments = updateSegments(playlist.segments, media.segments, media.mediaSequence - playlist.mediaSequence);\n      }\n      // resolve any missing segment and key URIs\n      j = 0;\n      if (result.playlists[i].segments) {\n        j = result.playlists[i].segments.length;\n      }\n      while (j--) {\n        segment = result.playlists[i].segments[j];\n        if (!segment.resolvedUri) {\n          segment.resolvedUri = (0, _resolveUrl2['default'])(playlist.resolvedUri, segment.uri);\n        }\n        if (segment.key && !segment.key.resolvedUri) {\n          segment.key.resolvedUri = (0, _resolveUrl2['default'])(playlist.resolvedUri, segment.key.uri);\n        }\n      }\n      changed = true;\n    }\n  }\n  return changed ? result : null;\n};\n\n/**\n * Load a playlist from a remote loacation\n *\n * @class PlaylistLoader\n * @extends Stream\n * @param {String} srcUrl the url to start with\n * @param {Boolean} withCredentials the withCredentials xhr option\n * @constructor\n */\nvar PlaylistLoader = function PlaylistLoader(srcUrl, hls, withCredentials) {\n  var _this = this;\n\n  /* eslint-disable consistent-this */\n  var loader = this;\n  /* eslint-enable consistent-this */\n  var dispose = undefined;\n  var mediaUpdateTimeout = undefined;\n  var request = undefined;\n  var playlistRequestError = undefined;\n  var haveMetadata = undefined;\n\n  PlaylistLoader.prototype.constructor.call(this);\n\n  this.hls_ = hls;\n\n  // a flag that disables \"expired time\"-tracking this setting has\n  // no effect when not playing a live stream\n  this.trackExpiredTime_ = false;\n\n  if (!srcUrl) {\n    throw new Error('A non-empty playlist URL is required');\n  }\n\n  playlistRequestError = function (xhr, url, startingState) {\n    loader.setBandwidth(request || xhr);\n\n    // any in-flight request is now finished\n    request = null;\n\n    if (startingState) {\n      loader.state = startingState;\n    }\n\n    loader.error = {\n      playlist: loader.master.playlists[url],\n      status: xhr.status,\n      message: 'HLS playlist request error at URL: ' + url,\n      responseText: xhr.responseText,\n      code: xhr.status >= 500 ? 4 : 2\n    };\n\n    loader.trigger('error');\n  };\n\n  // update the playlist loader's state in response to a new or\n  // updated playlist.\n  haveMetadata = function (xhr, url) {\n    var parser = undefined;\n    var refreshDelay = undefined;\n    var update = undefined;\n\n    loader.setBandwidth(request || xhr);\n\n    // any in-flight request is now finished\n    request = null;\n\n    loader.state = 'HAVE_METADATA';\n\n    parser = new _m3u82['default'].Parser();\n    parser.push(xhr.responseText);\n    parser.end();\n    parser.manifest.uri = url;\n\n    // merge this playlist into the master\n    update = updateMaster(loader.master, parser.manifest);\n    refreshDelay = (parser.manifest.targetDuration || 10) * 1000;\n    if (update) {\n      loader.master = update;\n      loader.updateMediaPlaylist_(parser.manifest);\n    } else {\n      // if the playlist is unchanged since the last reload,\n      // try again after half the target duration\n      refreshDelay /= 2;\n    }\n\n    // refresh live playlists after a target duration passes\n    if (!loader.media().endList) {\n      window.clearTimeout(mediaUpdateTimeout);\n      mediaUpdateTimeout = window.setTimeout(function () {\n        loader.trigger('mediaupdatetimeout');\n      }, refreshDelay);\n    }\n\n    loader.trigger('loadedplaylist');\n  };\n\n  // initialize the loader state\n  loader.state = 'HAVE_NOTHING';\n\n  // track the time that has expired from the live window\n  // this allows the seekable start range to be calculated even if\n  // all segments with timing information have expired\n  this.expired_ = 0;\n\n  // capture the prototype dispose function\n  dispose = this.dispose;\n\n  /**\n   * Abort any outstanding work and clean up.\n   */\n  loader.dispose = function () {\n    loader.stopRequest();\n    window.clearTimeout(mediaUpdateTimeout);\n    dispose.call(this);\n  };\n\n  loader.stopRequest = function () {\n    if (request) {\n      var oldRequest = request;\n\n      request = null;\n      oldRequest.onreadystatechange = null;\n      oldRequest.abort();\n    }\n  };\n\n  /**\n   * When called without any arguments, returns the currently\n   * active media playlist. When called with a single argument,\n   * triggers the playlist loader to asynchronously switch to the\n   * specified media playlist. Calling this method while the\n   * loader is in the HAVE_NOTHING causes an error to be emitted\n   * but otherwise has no effect.\n   *\n   * @param {Object=} playlis tthe parsed media playlist\n   * object to switch to\n   * @return {Playlist} the current loaded media\n   */\n  loader.media = function (playlist) {\n    var startingState = loader.state;\n    var mediaChange = undefined;\n\n    // getter\n    if (!playlist) {\n      return loader.media_;\n    }\n\n    // setter\n    if (loader.state === 'HAVE_NOTHING') {\n      throw new Error('Cannot switch media playlist from ' + loader.state);\n    }\n\n    // find the playlist object if the target playlist has been\n    // specified by URI\n    if (typeof playlist === 'string') {\n      if (!loader.master.playlists[playlist]) {\n        throw new Error('Unknown playlist URI: ' + playlist);\n      }\n      playlist = loader.master.playlists[playlist];\n    }\n\n    mediaChange = !loader.media_ || playlist.uri !== loader.media_.uri;\n\n    // switch to fully loaded playlists immediately\n    if (loader.master.playlists[playlist.uri].endList) {\n      // abort outstanding playlist requests\n      if (request) {\n        request.onreadystatechange = null;\n        request.abort();\n        request = null;\n      }\n      loader.state = 'HAVE_METADATA';\n      loader.media_ = playlist;\n\n      // trigger media change if the active media has been updated\n      if (mediaChange) {\n        loader.trigger('mediachanging');\n        loader.trigger('mediachange');\n      }\n      return;\n    }\n\n    // switching to the active playlist is a no-op\n    if (!mediaChange) {\n      return;\n    }\n\n    loader.state = 'SWITCHING_MEDIA';\n\n    // there is already an outstanding playlist request\n    if (request) {\n      if ((0, _resolveUrl2['default'])(loader.master.uri, playlist.uri) === request.url) {\n        // requesting to switch to the same playlist multiple times\n        // has no effect after the first\n        return;\n      }\n      request.onreadystatechange = null;\n      request.abort();\n      request = null;\n    }\n\n    // request the new playlist\n    if (this.media_) {\n      this.trigger('mediachanging');\n    }\n    request = this.hls_.xhr({\n      uri: (0, _resolveUrl2['default'])(loader.master.uri, playlist.uri),\n      withCredentials: withCredentials\n    }, function (error, req) {\n      // disposed\n      if (!request) {\n        return;\n      }\n\n      if (error) {\n        return playlistRequestError(request, playlist.uri, startingState);\n      }\n\n      haveMetadata(req, playlist.uri);\n\n      // fire loadedmetadata the first time a media playlist is loaded\n      if (startingState === 'HAVE_MASTER') {\n        loader.trigger('loadedmetadata');\n      } else {\n        loader.trigger('mediachange');\n      }\n    });\n  };\n\n  /**\n   * set the bandwidth on an xhr to the bandwidth on the playlist\n   */\n  loader.setBandwidth = function (xhr) {\n    loader.bandwidth = xhr.bandwidth;\n  };\n\n  // In a live playlist, don't keep track of the expired time\n  // until HLS tells us that \"first play\" has commenced\n  loader.on('firstplay', function () {\n    this.trackExpiredTime_ = true;\n  });\n\n  // live playlist staleness timeout\n  loader.on('mediaupdatetimeout', function () {\n    if (loader.state !== 'HAVE_METADATA') {\n      // only refresh the media playlist if no other activity is going on\n      return;\n    }\n\n    loader.state = 'HAVE_CURRENT_METADATA';\n    request = this.hls_.xhr({\n      uri: (0, _resolveUrl2['default'])(loader.master.uri, loader.media().uri),\n      withCredentials: withCredentials\n    }, function (error, req) {\n      // disposed\n      if (!request) {\n        return;\n      }\n\n      if (error) {\n        return playlistRequestError(request, loader.media().uri);\n      }\n      haveMetadata(request, loader.media().uri);\n    });\n  });\n\n  /**\n   * pause loading of the playlist\n   */\n  loader.pause = function () {\n    loader.stopRequest();\n    window.clearTimeout(mediaUpdateTimeout);\n  };\n\n  /**\n   * start loading of the playlist\n   */\n  loader.load = function () {\n    if (loader.started) {\n      if (!loader.media().endList) {\n        loader.trigger('mediaupdatetimeout');\n      } else {\n        loader.trigger('loadedplaylist');\n      }\n    } else {\n      loader.start();\n    }\n  };\n\n  /**\n   * start loading of the playlist\n   */\n  loader.start = function () {\n    loader.started = true;\n\n    // request the specified URL\n    request = _this.hls_.xhr({\n      uri: srcUrl,\n      withCredentials: withCredentials\n    }, function (error, req) {\n      var parser = undefined;\n      var playlist = undefined;\n      var i = undefined;\n\n      // disposed\n      if (!request) {\n        return;\n      }\n\n      // clear the loader's request reference\n      request = null;\n\n      if (error) {\n        loader.error = {\n          status: req.status,\n          message: 'HLS playlist request error at URL: ' + srcUrl,\n          responseText: req.responseText,\n          // MEDIA_ERR_NETWORK\n          code: 2\n        };\n        return loader.trigger('error');\n      }\n\n      parser = new _m3u82['default'].Parser();\n      parser.push(req.responseText);\n      parser.end();\n\n      loader.state = 'HAVE_MASTER';\n\n      parser.manifest.uri = srcUrl;\n\n      // loaded a master playlist\n      if (parser.manifest.playlists) {\n        loader.master = parser.manifest;\n\n        // setup by-URI lookups and resolve media playlist URIs\n        i = loader.master.playlists.length;\n        while (i--) {\n          playlist = loader.master.playlists[i];\n          loader.master.playlists[playlist.uri] = playlist;\n          playlist.resolvedUri = (0, _resolveUrl2['default'])(loader.master.uri, playlist.uri);\n        }\n\n        // resolve any media group URIs\n        for (var groupKey in loader.master.mediaGroups.AUDIO) {\n          for (var labelKey in loader.master.mediaGroups.AUDIO[groupKey]) {\n            var alternateAudio = loader.master.mediaGroups.AUDIO[groupKey][labelKey];\n            if (alternateAudio.uri) {\n              alternateAudio.resolvedUri = (0, _resolveUrl2['default'])(loader.master.uri, alternateAudio.uri);\n            }\n          }\n        }\n\n        loader.trigger('loadedplaylist');\n        if (!request) {\n          // no media playlist was specifically selected so start\n          // from the first listed one\n          loader.media(parser.manifest.playlists[0]);\n        }\n        return;\n      }\n\n      // loaded a media playlist\n      // infer a master playlist if none was previously requested\n      loader.master = {\n        uri: window.location.href,\n        playlists: [{\n          uri: srcUrl\n        }]\n      };\n      loader.master.playlists[srcUrl] = loader.master.playlists[0];\n      loader.master.playlists[0].resolvedUri = srcUrl;\n      haveMetadata(req, srcUrl);\n      return loader.trigger('loadedmetadata');\n    });\n  };\n};\n\nPlaylistLoader.prototype = new _stream2['default']();\n\n/**\n * Update the PlaylistLoader state to reflect the changes in an\n * update to the current media playlist.\n *\n * @param {Object} update the updated media playlist object\n */\nPlaylistLoader.prototype.updateMediaPlaylist_ = function (update) {\n  var outdated = undefined;\n  var i = undefined;\n  var segment = undefined;\n\n  outdated = this.media_;\n  this.media_ = this.master.playlists[update.uri];\n\n  if (!outdated) {\n    return;\n  }\n\n  // don't track expired time until this flag is truthy\n  if (!this.trackExpiredTime_) {\n    return;\n  }\n\n  // if the update was the result of a rendition switch do not\n  // attempt to calculate expired_ since media-sequences need not\n  // correlate between renditions/variants\n  if (update.uri !== outdated.uri) {\n    return;\n  }\n\n  // try using precise timing from first segment of the updated\n  // playlist\n  if (update.segments.length) {\n    if (typeof update.segments[0].start !== 'undefined') {\n      this.expired_ = update.segments[0].start;\n      return;\n    } else if (typeof update.segments[0].end !== 'undefined') {\n      this.expired_ = update.segments[0].end - update.segments[0].duration;\n      return;\n    }\n  }\n\n  // calculate expired by walking the outdated playlist\n  i = update.mediaSequence - outdated.mediaSequence - 1;\n\n  for (; i >= 0; i--) {\n    segment = outdated.segments[i];\n\n    if (!segment) {\n      // we missed information on this segment completely between\n      // playlist updates so we'll have to take an educated guess\n      // once we begin buffering again, any error we introduce can\n      // be corrected\n      this.expired_ += outdated.targetDuration || 10;\n      continue;\n    }\n\n    if (typeof segment.end !== 'undefined') {\n      this.expired_ = segment.end;\n      return;\n    }\n    if (typeof segment.start !== 'undefined') {\n      this.expired_ = segment.start + segment.duration;\n      return;\n    }\n    this.expired_ += segment.duration;\n  }\n};\n\nexports['default'] = PlaylistLoader;\nmodule.exports = exports['default'];\n}).call(this,typeof global !== \"undefined\" ? global : typeof self !== \"undefined\" ? self : typeof window !== \"undefined\" ? window : {})\n},{\"./m3u8\":7,\"./resolve-url\":15,\"./stream\":18}],13:[function(require,module,exports){\n(function (global){\n/**\n * @file playlist.js\n *\n * Playlist related utilities.\n */\n'use strict';\n\nObject.defineProperty(exports, '__esModule', {\n  value: true\n});\n\nvar _videoJs = (typeof window !== \"undefined\" ? window['videojs'] : typeof global !== \"undefined\" ? global['videojs'] : null);\n\nvar Playlist = {\n  /**\n   * The number of segments that are unsafe to start playback at in\n   * a live stream. Changing this value can cause playback stalls.\n   * See HTTP Live Streaming, \"Playing the Media Playlist File\"\n   * https://tools.ietf.org/html/draft-pantos-http-live-streaming-18#section-6.3.3\n   */\n  UNSAFE_LIVE_SEGMENTS: 3\n};\n\n/**\n * walk backward until we find a duration we can use\n * or return a failure\n *\n * @param {Playlist} playlist the playlist to walk through\n * @param {Number} endSequence the mediaSequence to stop walking on\n */\n\nvar backwardDuration = function backwardDuration(playlist, endSequence) {\n  var result = 0;\n  var i = endSequence - playlist.mediaSequence;\n  // if a start time is available for segment immediately following\n  // the interval, use it\n  var segment = playlist.segments[i];\n\n  // Walk backward until we find the latest segment with timeline\n  // information that is earlier than endSequence\n  if (segment) {\n    if (typeof segment.start !== 'undefined') {\n      return { result: segment.start, precise: true };\n    }\n    if (typeof segment.end !== 'undefined') {\n      return {\n        result: segment.end - segment.duration,\n        precise: true\n      };\n    }\n  }\n  while (i--) {\n    segment = playlist.segments[i];\n    if (typeof segment.end !== 'undefined') {\n      return { result: result + segment.end, precise: true };\n    }\n\n    result += segment.duration;\n\n    if (typeof segment.start !== 'undefined') {\n      return { result: result + segment.start, precise: true };\n    }\n  }\n  return { result: result, precise: false };\n};\n\n/**\n * walk forward until we find a duration we can use\n * or return a failure\n *\n * @param {Playlist} playlist the playlist to walk through\n * @param {Number} endSequence the mediaSequence to stop walking on\n */\nvar forwardDuration = function forwardDuration(playlist, endSequence) {\n  var result = 0;\n  var segment = undefined;\n  var i = endSequence - playlist.mediaSequence;\n  // Walk forward until we find the earliest segment with timeline\n  // information\n\n  for (; i < playlist.segments.length; i++) {\n    segment = playlist.segments[i];\n    if (typeof segment.start !== 'undefined') {\n      return {\n        result: segment.start - result,\n        precise: true\n      };\n    }\n\n    result += segment.duration;\n\n    if (typeof segment.end !== 'undefined') {\n      return {\n        result: segment.end - result,\n        precise: true\n      };\n    }\n  }\n  // indicate we didn't find a useful duration estimate\n  return { result: -1, precise: false };\n};\n\n/**\n  * Calculate the media duration from the segments associated with a\n  * playlist. The duration of a subinterval of the available segments\n  * may be calculated by specifying an end index.\n  *\n  * @param {Object} playlist a media playlist object\n  * @param {Number=} endSequence an exclusive upper boundary\n  * for the playlist.  Defaults to playlist length.\n  * @param {Number} expired the amount of time that has dropped\n  * off the front of the playlist in a live scenario\n  * @return {Number} the duration between the first available segment\n  * and end index.\n  */\nvar intervalDuration = function intervalDuration(playlist, endSequence, expired) {\n  var backward = undefined;\n  var forward = undefined;\n\n  if (typeof endSequence === 'undefined') {\n    endSequence = playlist.mediaSequence + playlist.segments.length;\n  }\n\n  if (endSequence < playlist.mediaSequence) {\n    return 0;\n  }\n\n  // do a backward walk to estimate the duration\n  backward = backwardDuration(playlist, endSequence);\n  if (backward.precise) {\n    // if we were able to base our duration estimate on timing\n    // information provided directly from the Media Source, return\n    // it\n    return backward.result;\n  }\n\n  // walk forward to see if a precise duration estimate can be made\n  // that way\n  forward = forwardDuration(playlist, endSequence);\n  if (forward.precise) {\n    // we found a segment that has been buffered and so it's\n    // position is known precisely\n    return forward.result;\n  }\n\n  // return the less-precise, playlist-based duration estimate\n  return backward.result + expired;\n};\n\n/**\n  * Calculates the duration of a playlist. If a start and end index\n  * are specified, the duration will be for the subset of the media\n  * timeline between those two indices. The total duration for live\n  * playlists is always Infinity.\n  *\n  * @param {Object} playlist a media playlist object\n  * @param {Number=} endSequence an exclusive upper\n  * boundary for the playlist. Defaults to the playlist media\n  * sequence number plus its length.\n  * @param {Number=} expired the amount of time that has\n  * dropped off the front of the playlist in a live scenario\n  * @return {Number} the duration between the start index and end\n  * index.\n  */\nvar duration = function duration(playlist, endSequence, expired) {\n  if (!playlist) {\n    return 0;\n  }\n\n  if (typeof expired !== 'number') {\n    expired = 0;\n  }\n\n  // if a slice of the total duration is not requested, use\n  // playlist-level duration indicators when they're present\n  if (typeof endSequence === 'undefined') {\n    // if present, use the duration specified in the playlist\n    if (playlist.totalDuration) {\n      return playlist.totalDuration;\n    }\n\n    // duration should be Infinity for live playlists\n    if (!playlist.endList) {\n      return window.Infinity;\n    }\n  }\n\n  // calculate the total duration based on the segment durations\n  return intervalDuration(playlist, endSequence, expired);\n};\n\nexports.duration = duration;\n/**\n  * Calculates the interval of time that is currently seekable in a\n  * playlist. The returned time ranges are relative to the earliest\n  * moment in the specified playlist that is still available. A full\n  * seekable implementation for live streams would need to offset\n  * these values by the duration of content that has expired from the\n  * stream.\n  *\n  * @param {Object} playlist a media playlist object\n  * @param {Number=} expired the amount of time that has\n  * dropped off the front of the playlist in a live scenario\n  * @return {TimeRanges} the periods of time that are valid targets\n  * for seeking\n  */\nvar seekable = function seekable(playlist, expired) {\n  var start = undefined;\n  var end = undefined;\n  var endSequence = undefined;\n\n  if (typeof expired !== 'number') {\n    expired = 0;\n  }\n\n  // without segments, there are no seekable ranges\n  if (!playlist || !playlist.segments) {\n    return (0, _videoJs.createTimeRange)();\n  }\n  // when the playlist is complete, the entire duration is seekable\n  if (playlist.endList) {\n    return (0, _videoJs.createTimeRange)(0, duration(playlist));\n  }\n\n  // live playlists should not expose three segment durations worth\n  // of content from the end of the playlist\n  // https://tools.ietf.org/html/draft-pantos-http-live-streaming-16#section-6.3.3\n  start = intervalDuration(playlist, playlist.mediaSequence, expired);\n  endSequence = Math.max(0, playlist.segments.length - Playlist.UNSAFE_LIVE_SEGMENTS);\n  end = intervalDuration(playlist, playlist.mediaSequence + endSequence, expired);\n  return (0, _videoJs.createTimeRange)(start, end);\n};\n\nexports.seekable = seekable;\n/**\n * Determine the index of the segment that contains a specified\n * playback position in a media playlist.\n *\n * @param {Object} playlist the media playlist to query\n * @param {Number} time The number of seconds since the earliest\n * possible position to determine the containing segment for\n * @param {Number=} expired the duration of content, in\n * seconds, that has been removed from this playlist because it\n * expired\n * @return {Number} The number of the media segment that contains\n * that time position.\n */\nvar getMediaIndexForTime_ = function getMediaIndexForTime_(playlist, time, expired) {\n  var i = undefined;\n  var segment = undefined;\n  var originalTime = time;\n  var numSegments = playlist.segments.length;\n  var lastSegment = numSegments - 1;\n  var startIndex = undefined;\n  var endIndex = undefined;\n  var knownStart = undefined;\n  var knownEnd = undefined;\n\n  if (!playlist) {\n    return 0;\n  }\n\n  // when the requested position is earlier than the current set of\n  // segments, return the earliest segment index\n  if (time < 0) {\n    return 0;\n  }\n\n  expired = expired || 0;\n\n  // find segments with known timing information that bound the\n  // target time\n  for (i = 0; i < numSegments; i++) {\n    segment = playlist.segments[i];\n    if (segment.end) {\n      if (segment.end > time) {\n        knownEnd = segment.end;\n        endIndex = i;\n        break;\n      } else {\n        knownStart = segment.end;\n        startIndex = i + 1;\n      }\n    }\n  }\n\n  // time was equal to or past the end of the last segment in the playlist\n  if (startIndex === numSegments) {\n    return numSegments;\n  }\n\n  // use the bounds we just found and playlist information to\n  // estimate the segment that contains the time we are looking for\n  if (typeof startIndex !== 'undefined') {\n    // We have a known-start point that is before our desired time so\n    // walk from that point forwards\n    time = time - knownStart;\n    for (i = startIndex; i < (endIndex || numSegments); i++) {\n      segment = playlist.segments[i];\n      time -= segment.duration;\n\n      if (time < 0) {\n        return i;\n      }\n    }\n\n    if (i >= endIndex) {\n      // We haven't found a segment but we did hit a known end point\n      // so fallback to interpolating between the segment index\n      // based on the known span of the timeline we are dealing with\n      // and the number of segments inside that span\n      return startIndex + Math.floor((originalTime - knownStart) / (knownEnd - knownStart) * (endIndex - startIndex));\n    }\n\n    // We _still_ haven't found a segment so load the last one\n    return lastSegment;\n  } else if (typeof endIndex !== 'undefined') {\n    // We _only_ have a known-end point that is after our desired time so\n    // walk from that point backwards\n    time = knownEnd - time;\n    for (i = endIndex; i >= 0; i--) {\n      segment = playlist.segments[i];\n      time -= segment.duration;\n\n      if (time < 0) {\n        return i;\n      }\n    }\n\n    // We haven't found a segment so load the first one if time is zero\n    if (time === 0) {\n      return 0;\n    }\n    return -1;\n  }\n  // We known nothing so walk from the front of the playlist,\n  // subtracting durations until we find a segment that contains\n  // time and return it\n  time = time - expired;\n\n  if (time < 0) {\n    return -1;\n  }\n\n  for (i = 0; i < numSegments; i++) {\n    segment = playlist.segments[i];\n    time -= segment.duration;\n    if (time < 0) {\n      return i;\n    }\n  }\n  // We are out of possible candidates so load the last one...\n  // The last one is the least likely to overlap a buffer and therefore\n  // the one most likely to tell us something about the timeline\n  return lastSegment;\n};\n\nexports.getMediaIndexForTime_ = getMediaIndexForTime_;\nPlaylist.duration = duration;\nPlaylist.seekable = seekable;\nPlaylist.getMediaIndexForTime_ = getMediaIndexForTime_;\n\n// exports\nexports['default'] = Playlist;\n}).call(this,typeof global !== \"undefined\" ? global : typeof self !== \"undefined\" ? self : typeof window !== \"undefined\" ? window : {})\n},{}],14:[function(require,module,exports){\n(function (global){\n/**\n * ranges\n *\n * Utilities for working with TimeRanges.\n *\n */\n\n'use strict';\n\nObject.defineProperty(exports, '__esModule', {\n  value: true\n});\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { 'default': obj }; }\n\nvar _videoJs = (typeof window !== \"undefined\" ? window['videojs'] : typeof global !== \"undefined\" ? global['videojs'] : null);\n\nvar _videoJs2 = _interopRequireDefault(_videoJs);\n\n// Fudge factor to account for TimeRanges rounding\nvar TIME_FUDGE_FACTOR = 1 / 30;\n\nvar filterRanges = function filterRanges(timeRanges, predicate) {\n  var results = [];\n  var i = undefined;\n\n  if (timeRanges && timeRanges.length) {\n    // Search for ranges that match the predicate\n    for (i = 0; i < timeRanges.length; i++) {\n      if (predicate(timeRanges.start(i), timeRanges.end(i))) {\n        results.push([timeRanges.start(i), timeRanges.end(i)]);\n      }\n    }\n  }\n\n  return _videoJs2['default'].createTimeRanges(results);\n};\n\n/**\n * Attempts to find the buffered TimeRange that contains the specified\n * time.\n * @param {TimeRanges} buffered - the TimeRanges object to query\n * @param {number} time  - the time to filter on.\n * @returns {TimeRanges} a new TimeRanges object\n */\nvar findRange = function findRange(buffered, time) {\n  return filterRanges(buffered, function (start, end) {\n    return start - TIME_FUDGE_FACTOR <= time && end + TIME_FUDGE_FACTOR >= time;\n  });\n};\n\n/**\n * Returns the TimeRanges that begin at or later than the specified\n * time.\n * @param {TimeRanges} timeRanges - the TimeRanges object to query\n * @param {number} time - the time to filter on.\n * @returns {TimeRanges} a new TimeRanges object.\n */\nvar findNextRange = function findNextRange(timeRanges, time) {\n  return filterRanges(timeRanges, function (start) {\n    return start - TIME_FUDGE_FACTOR >= time;\n  });\n};\n\n/**\n * Search for a likely end time for the segment that was just appened\n * based on the state of the `buffered` property before and after the\n * append. If we fin only one such uncommon end-point return it.\n * @param {TimeRanges} original - the buffered time ranges before the update\n * @param {TimeRanges} update - the buffered time ranges after the update\n * @returns {Number|null} the end time added between `original` and `update`,\n * or null if one cannot be unambiguously determined.\n */\nvar findSoleUncommonTimeRangesEnd = function findSoleUncommonTimeRangesEnd(original, update) {\n  var i = undefined;\n  var start = undefined;\n  var end = undefined;\n  var result = [];\n  var edges = [];\n\n  // In order to qualify as a possible candidate, the end point must:\n  //  1) Not have already existed in the `original` ranges\n  //  2) Not result from the shrinking of a range that already existed\n  //     in the `original` ranges\n  //  3) Not be contained inside of a range that existed in `original`\n  var overlapsCurrentEnd = function overlapsCurrentEnd(span) {\n    return span[0] <= end && span[1] >= end;\n  };\n\n  if (original) {\n    // Save all the edges in the `original` TimeRanges object\n    for (i = 0; i < original.length; i++) {\n      start = original.start(i);\n      end = original.end(i);\n\n      edges.push([start, end]);\n    }\n  }\n\n  if (update) {\n    // Save any end-points in `update` that are not in the `original`\n    // TimeRanges object\n    for (i = 0; i < update.length; i++) {\n      start = update.start(i);\n      end = update.end(i);\n\n      if (edges.some(overlapsCurrentEnd)) {\n        continue;\n      }\n\n      // at this point it must be a unique non-shrinking end edge\n      result.push(end);\n    }\n  }\n\n  // we err on the side of caution and return null if didn't find\n  // exactly *one* differing end edge in the search above\n  if (result.length !== 1) {\n    return null;\n  }\n\n  return result[0];\n};\n\n/**\n * Calculate the intersection of two TimeRanges\n * @param {TimeRanges} bufferA\n * @param {TimeRanges} bufferB\n * @returns {TimeRanges} The interesection of `bufferA` with `bufferB`\n */\nvar bufferIntersection = function bufferIntersection(bufferA, bufferB) {\n  var start = null;\n  var end = null;\n  var arity = 0;\n  var extents = [];\n  var ranges = [];\n\n  if (!bufferA || !bufferA.length || !bufferB || !bufferB.length) {\n    return _videoJs2['default'].createTimeRange();\n  }\n\n  // Handle the case where we have both buffers and create an\n  // intersection of the two\n  var count = bufferA.length;\n\n  // A) Gather up all start and end times\n  while (count--) {\n    extents.push({ time: bufferA.start(count), type: 'start' });\n    extents.push({ time: bufferA.end(count), type: 'end' });\n  }\n  count = bufferB.length;\n  while (count--) {\n    extents.push({ time: bufferB.start(count), type: 'start' });\n    extents.push({ time: bufferB.end(count), type: 'end' });\n  }\n  // B) Sort them by time\n  extents.sort(function (a, b) {\n    return a.time - b.time;\n  });\n\n  // C) Go along one by one incrementing arity for start and decrementing\n  //    arity for ends\n  for (count = 0; count < extents.length; count++) {\n    if (extents[count].type === 'start') {\n      arity++;\n\n      // D) If arity is ever incremented to 2 we are entering an\n      //    overlapping range\n      if (arity === 2) {\n        start = extents[count].time;\n      }\n    } else if (extents[count].type === 'end') {\n      arity--;\n\n      // E) If arity is ever decremented to 1 we leaving an\n      //    overlapping range\n      if (arity === 1) {\n        end = extents[count].time;\n      }\n    }\n\n    // F) Record overlapping ranges\n    if (start !== null && end !== null) {\n      ranges.push([start, end]);\n      start = null;\n      end = null;\n    }\n  }\n\n  return _videoJs2['default'].createTimeRanges(ranges);\n};\n\n/**\n * Calculates the percentage of `segmentRange` that overlaps the\n * `buffered` time ranges.\n * @param {TimeRanges} segmentRange - the time range that the segment covers\n * @param {TimeRanges} buffered - the currently buffered time ranges\n * @returns {Number} percent of the segment currently buffered\n */\nvar calculateBufferedPercent = function calculateBufferedPercent(segmentRange, buffered) {\n  var segmentDuration = segmentRange.end(0) - segmentRange.start(0);\n  var intersection = bufferIntersection(segmentRange, buffered);\n  var overlapDuration = 0;\n  var count = intersection.length;\n\n  while (count--) {\n    overlapDuration += intersection.end(count) - intersection.start(count);\n  }\n\n  return overlapDuration / segmentDuration * 100;\n};\n\nexports['default'] = {\n  findRange: findRange,\n  findNextRange: findNextRange,\n  findSoleUncommonTimeRangesEnd: findSoleUncommonTimeRangesEnd,\n  calculateBufferedPercent: calculateBufferedPercent,\n  TIME_FUDGE_FACTOR: TIME_FUDGE_FACTOR\n};\nmodule.exports = exports['default'];\n}).call(this,typeof global !== \"undefined\" ? global : typeof self !== \"undefined\" ? self : typeof window !== \"undefined\" ? window : {})\n},{}],15:[function(require,module,exports){\n/**\n * @file resolve-url.js\n */\n'use strict';\n\nObject.defineProperty(exports, '__esModule', {\n  value: true\n});\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { 'default': obj }; }\n\nvar _globalDocument = require('global/document');\n\nvar _globalDocument2 = _interopRequireDefault(_globalDocument);\n\n/**\n * Constructs a new URI by interpreting a path relative to another\n * URI.\n *\n * @see http://stackoverflow.com/questions/470832/getting-an-absolute-url-from-a-relative-one-ie6-issue\n * @param {String} basePath a relative or absolute URI\n * @param {String} path a path part to combine with the base\n * @return {String} a URI that is equivalent to composing `base`\n * with `path`\n */\nvar resolveUrl = function resolveUrl(basePath, path) {\n  // use the base element to get the browser to handle URI resolution\n  var oldBase = _globalDocument2['default'].querySelector('base');\n  var docHead = _globalDocument2['default'].querySelector('head');\n  var a = _globalDocument2['default'].createElement('a');\n  var base = oldBase;\n  var oldHref = undefined;\n  var result = undefined;\n\n  // prep the document\n  if (oldBase) {\n    oldHref = oldBase.href;\n  } else {\n    base = docHead.appendChild(_globalDocument2['default'].createElement('base'));\n  }\n\n  base.href = basePath;\n  a.href = path;\n  result = a.href;\n\n  // clean up\n  if (oldBase) {\n    oldBase.href = oldHref;\n  } else {\n    docHead.removeChild(base);\n  }\n  return result;\n};\n\nexports['default'] = resolveUrl;\nmodule.exports = exports['default'];\n},{\"global/document\":21}],16:[function(require,module,exports){\n(function (global){\n/**\n * @file segment-loader.js\n */\n'use strict';\n\nObject.defineProperty(exports, '__esModule', {\n  value: true\n});\n\nvar _createClass = (function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ('value' in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; })();\n\nvar _get = function get(_x, _x2, _x3) { var _again = true; _function: while (_again) { var object = _x, property = _x2, receiver = _x3; _again = false; if (object === null) object = Function.prototype; var desc = Object.getOwnPropertyDescriptor(object, property); if (desc === undefined) { var parent = Object.getPrototypeOf(object); if (parent === null) { return undefined; } else { _x = parent; _x2 = property; _x3 = receiver; _again = true; desc = parent = undefined; continue _function; } } else if ('value' in desc) { return desc.value; } else { var getter = desc.get; if (getter === undefined) { return undefined; } return getter.call(receiver); } } };\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { 'default': obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError('Cannot call a class as a function'); } }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== 'function' && superClass !== null) { throw new TypeError('Super expression must either be null or a function, not ' + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\nvar _ranges = require('./ranges');\n\nvar _ranges2 = _interopRequireDefault(_ranges);\n\nvar _playlist = require('./playlist');\n\nvar _videoJs = (typeof window !== \"undefined\" ? window['videojs'] : typeof global !== \"undefined\" ? global['videojs'] : null);\n\nvar _videoJs2 = _interopRequireDefault(_videoJs);\n\nvar _sourceUpdater = require('./source-updater');\n\nvar _sourceUpdater2 = _interopRequireDefault(_sourceUpdater);\n\nvar _decrypter = require('./decrypter');\n\n// in ms\nvar CHECK_BUFFER_DELAY = 500;\n\n// the desired length of video to maintain in the buffer, in seconds\nvar GOAL_BUFFER_LENGTH = 30;\n\nexports.GOAL_BUFFER_LENGTH = GOAL_BUFFER_LENGTH;\n/**\n * Updates segment with information about its end-point in time and, optionally,\n * the segment duration if we have enough information to determine a segment duration\n * accurately.\n *\n * @param {Object} playlist a media playlist object\n * @param {Number} segmentIndex the index of segment we last appended\n * @param {Number} segmentEnd the known of the segment referenced by segmentIndex\n */\nvar updateSegmentMetadata = function updateSegmentMetadata(playlist, segmentIndex, segmentEnd) {\n  if (!playlist) {\n    return false;\n  }\n\n  var segment = playlist.segments[segmentIndex];\n  var previousSegment = playlist.segments[segmentIndex - 1];\n\n  if (segmentEnd && segment) {\n    segment.end = segmentEnd;\n\n    // fix up segment durations based on segment end data\n    if (!previousSegment) {\n      // first segment is always has a start time of 0 making its duration\n      // equal to the segment end\n      segment.duration = segment.end;\n    } else if (previousSegment.end) {\n      segment.duration = segment.end - previousSegment.end;\n    }\n    return true;\n  }\n  return false;\n};\n\n/**\n * Determines if we should call endOfStream on the media source based\n * on the state of the buffer or if appened segment was the final\n * segment in the playlist.\n *\n * @param {Object} playlist a media playlist object\n * @param {Object} mediaSource the MediaSource object\n * @param {Number} segmentIndex the index of segment we last appended\n * @param {Object} currentBuffered buffered region that currentTime resides in\n * @returns {Boolean} do we need to call endOfStream on the MediaSource\n */\nvar detectEndOfStream = function detectEndOfStream(playlist, mediaSource, segmentIndex, currentBuffered) {\n  if (!playlist) {\n    return false;\n  }\n\n  var segments = playlist.segments;\n\n  // determine a few boolean values to help make the branch below easier\n  // to read\n  var appendedLastSegment = segmentIndex === segments.length - 1;\n  var bufferedToEnd = currentBuffered.length && segments[segments.length - 1].end <= currentBuffered.end(0);\n\n  // if we've buffered to the end of the video, we need to call endOfStream\n  // so that MediaSources can trigger the `ended` event when it runs out of\n  // buffered data instead of waiting for me\n  return playlist.endList && mediaSource.readyState === 'open' && (appendedLastSegment || bufferedToEnd);\n};\n\n/*  Turns segment byterange into a string suitable for use in\n *  HTTP Range requests\n */\nvar byterangeStr = function byterangeStr(byterange) {\n  var byterangeStart = undefined;\n  var byterangeEnd = undefined;\n\n  // `byterangeEnd` is one less than `offset + length` because the HTTP range\n  // header uses inclusive ranges\n  byterangeEnd = byterange.offset + byterange.length - 1;\n  byterangeStart = byterange.offset;\n  return 'bytes=' + byterangeStart + '-' + byterangeEnd;\n};\n\n/*  Defines headers for use in the xhr request for a particular segment.\n */\nvar segmentXhrHeaders = function segmentXhrHeaders(segment) {\n  var headers = {};\n\n  if ('byterange' in segment) {\n    headers.Range = byterangeStr(segment.byterange);\n  }\n  return headers;\n};\n\n/**\n * An object that manages segment loading and appending.\n *\n * @class SegmentLoader\n * @param {Object} options required and optional options\n * @extends videojs.EventTarget\n */\n\nvar SegmentLoader = (function (_videojs$EventTarget) {\n  _inherits(SegmentLoader, _videojs$EventTarget);\n\n  function SegmentLoader(options) {\n    _classCallCheck(this, SegmentLoader);\n\n    _get(Object.getPrototypeOf(SegmentLoader.prototype), 'constructor', this).call(this);\n    var settings = undefined;\n\n    // check pre-conditions\n    if (!options) {\n      throw new TypeError('Initialization options are required');\n    }\n    if (typeof options.currentTime !== 'function') {\n      throw new TypeError('No currentTime getter specified');\n    }\n    if (!options.mediaSource) {\n      throw new TypeError('No MediaSource specified');\n    }\n    settings = _videoJs2['default'].mergeOptions(_videoJs2['default'].options.hls, options);\n\n    // public properties\n    this.state = 'INIT';\n    this.bandwidth = settings.bandwidth;\n    this.roundTrip = NaN;\n    this.bytesReceived = 0;\n\n    // private properties\n    this.hasPlayed_ = settings.hasPlayed;\n    this.currentTime_ = settings.currentTime;\n    this.seekable_ = settings.seekable;\n    this.seeking_ = settings.seeking;\n    this.setCurrentTime_ = settings.setCurrentTime;\n    this.mediaSource_ = settings.mediaSource;\n    this.withCredentials_ = settings.withCredentials;\n    this.checkBufferTimeout_ = null;\n    this.error_ = void 0;\n    this.expired_ = 0;\n    this.timeCorrection_ = 0;\n    this.currentTimeline_ = -1;\n    this.xhr_ = null;\n    this.pendingSegment_ = null;\n    this.sourceUpdater_ = null;\n    this.hls_ = settings.hls;\n  }\n\n  /**\n   * dispose of the SegmentLoader and reset to the default state\n   */\n\n  _createClass(SegmentLoader, [{\n    key: 'dispose',\n    value: function dispose() {\n      this.state = 'DISPOSED';\n      this.abort_();\n      if (this.sourceUpdater_) {\n        this.sourceUpdater_.dispose();\n      }\n    }\n\n    /**\n     * abort anything that is currently doing on with the SegmentLoader\n     * and reset to a default state\n     */\n  }, {\n    key: 'abort',\n    value: function abort() {\n      if (this.state !== 'WAITING') {\n        return;\n      }\n\n      this.abort_();\n\n      // don't wait for buffer check timeouts to begin fetching the\n      // next segment\n      if (!this.paused()) {\n        this.state = 'READY';\n        this.fillBuffer_();\n      }\n    }\n\n    /**\n     * set an error on the segment loader and null out any pending segements\n     *\n     * @param {Error} error the error to set on the SegmentLoader\n     * @return {Error} the error that was set or that is currently set\n     */\n  }, {\n    key: 'error',\n    value: function error(_error) {\n      if (typeof _error !== 'undefined') {\n        this.error_ = _error;\n      }\n\n      this.pendingSegment_ = null;\n      return this.error_;\n    }\n\n    /**\n     * load a playlist and start to fill the buffer\n     */\n  }, {\n    key: 'load',\n    value: function load() {\n      this.monitorBuffer_();\n\n      // if we don't have a playlist yet, keep waiting for one to be\n      // specified\n      if (!this.playlist_) {\n        return;\n      }\n\n      // if we're in the middle of processing a segment already, don't\n      // kick off an additional segment request\n      if (!this.sourceUpdater_ || this.state !== 'READY' && this.state !== 'INIT') {\n        return;\n      }\n\n      this.state = 'READY';\n      this.fillBuffer_();\n    }\n\n    /**\n     * set a playlist on the segment loader\n     *\n     * @param {PlaylistLoader} media the playlist to set on the segment loader\n     */\n  }, {\n    key: 'playlist',\n    value: function playlist(media) {\n      this.playlist_ = media;\n      // if we were unpaused but waiting for a playlist, start\n      // buffering now\n      if (this.sourceUpdater_ && media && this.state === 'INIT' && !this.paused()) {\n        this.state = 'READY';\n        return this.fillBuffer_();\n      }\n    }\n\n    /**\n     * Prevent the loader from fetching additional segments. If there\n     * is a segment request outstanding, it will finish processing\n     * before the loader halts. A segment loader can be unpaused by\n     * calling load().\n     */\n  }, {\n    key: 'pause',\n    value: function pause() {\n      if (this.checkBufferTimeout_) {\n        window.clearTimeout(this.checkBufferTimeout_);\n\n        this.checkBufferTimeout_ = null;\n      }\n    }\n\n    /**\n     * Returns whether the segment loader is fetching additional\n     * segments when given the opportunity. This property can be\n     * modified through calls to pause() and load().\n     */\n  }, {\n    key: 'paused',\n    value: function paused() {\n      return this.checkBufferTimeout_ === null;\n    }\n\n    /**\n     * setter for expired time on the SegmentLoader\n     *\n     * @param {Number} expired the exired time to set\n     */\n  }, {\n    key: 'expired',\n    value: function expired(_expired) {\n      this.expired_ = _expired;\n    }\n\n    /**\n     * create/set the following mimetype on the SourceBuffer through a\n     * SourceUpdater\n     *\n     * @param {String} mimeType the mime type string to use\n     */\n  }, {\n    key: 'mimeType',\n    value: function mimeType(_mimeType) {\n      // TODO Allow source buffers to be re-created with different mime-types\n      if (!this.sourceUpdater_) {\n        this.sourceUpdater_ = new _sourceUpdater2['default'](this.mediaSource_, _mimeType);\n        this.clearBuffer();\n\n        // if we were unpaused but waiting for a sourceUpdater, start\n        // buffering now\n        if (this.playlist_ && this.state === 'INIT' && !this.paused()) {\n          this.state = 'READY';\n          return this.fillBuffer_();\n        }\n      }\n    }\n\n    /**\n     * asynchronously/recursively monitor the buffer\n     *\n     * @private\n     */\n  }, {\n    key: 'monitorBuffer_',\n    value: function monitorBuffer_() {\n      if (this.state === 'READY') {\n        this.fillBuffer_();\n      }\n\n      if (this.checkBufferTimeout_) {\n        window.clearTimeout(this.checkBufferTimeout_);\n      }\n\n      this.checkBufferTimeout_ = window.setTimeout(this.monitorBuffer_.bind(this), CHECK_BUFFER_DELAY);\n    }\n\n    /**\n     * Return the amount of a segment specified by the mediaIndex overlaps\n     * the current buffered content.\n     *\n     * @param {Object} playlist the playlist object to fetch segments from\n     * @param {Number} mediaIndex the index of the segment in the playlist\n     * @param {TimeRanges} buffered the state of the buffer\n     * @returns {Number} percentage of the segment's time range that is\n     * already in `buffered`\n     */\n  }, {\n    key: 'getSegmentBufferedPercent_',\n    value: function getSegmentBufferedPercent_(playlist, mediaIndex, currentTime, buffered) {\n      var segment = playlist.segments[mediaIndex];\n      var startOfSegment = (0, _playlist.duration)(playlist, playlist.mediaSequence + mediaIndex, this.expired_);\n      var segmentRange = _videoJs2['default'].createTimeRanges([[Math.max(currentTime, startOfSegment), startOfSegment + segment.duration]]);\n\n      return _ranges2['default'].calculateBufferedPercent(segmentRange, buffered);\n    }\n\n    /**\n     * Determines what segment request should be made, given current\n     * playback state.\n     *\n     * @param {TimeRanges} buffered - the state of the buffer\n     * @param {Object} playlist - the playlist object to fetch segments from\n     * @param {Number} currentTime - the playback position in seconds\n     * @returns {Object} a segment info object that describes the\n     * request that should be made or null if no request is necessary\n     */\n  }, {\n    key: 'checkBuffer_',\n    value: function checkBuffer_(buffered, playlist, currentTime) {\n      var currentBuffered = _ranges2['default'].findRange(buffered, currentTime);\n\n      // There are times when MSE reports the first segment as starting a\n      // little after 0-time so add a fudge factor to try and fix those cases\n      // or we end up fetching the same first segment over and over\n      if (currentBuffered.length === 0 && currentTime === 0) {\n        currentBuffered = _ranges2['default'].findRange(buffered, currentTime + _ranges2['default'].TIME_FUDGE_FACTOR);\n      }\n\n      var bufferedTime = undefined;\n      var currentBufferedEnd = undefined;\n      var timestampOffset = this.sourceUpdater_.timestampOffset();\n      var segment = undefined;\n      var mediaIndex = undefined;\n\n      if (!playlist.segments.length) {\n        return;\n      }\n\n      if (currentBuffered.length === 0) {\n        // find the segment containing currentTime\n        mediaIndex = (0, _playlist.getMediaIndexForTime_)(playlist, currentTime + this.timeCorrection_, this.expired_);\n      } else {\n        // find the segment adjacent to the end of the current\n        // buffered region\n        currentBufferedEnd = currentBuffered.end(0);\n        bufferedTime = Math.max(0, currentBufferedEnd - currentTime);\n\n        // if the video has not yet played only, and we already have\n        // one segment downloaded do nothing\n        if (!this.hasPlayed_() && bufferedTime >= 1) {\n          return null;\n        }\n\n        // if there is plenty of content buffered, and the video has\n        // been played before relax for awhile\n        if (this.hasPlayed_() && bufferedTime >= GOAL_BUFFER_LENGTH) {\n          return null;\n        }\n        mediaIndex = (0, _playlist.getMediaIndexForTime_)(playlist, currentBufferedEnd + this.timeCorrection_, this.expired_);\n      }\n\n      if (mediaIndex < 0 || mediaIndex === playlist.segments.length) {\n        return null;\n      }\n\n      segment = playlist.segments[mediaIndex];\n      var startOfSegment = (0, _playlist.duration)(playlist, playlist.mediaSequence + mediaIndex, this.expired_);\n\n      // We will need to change timestampOffset of the sourceBuffer if either of\n      // the following conditions are true:\n      // - The segment.timeline !== this.currentTimeline\n      //   (we are crossing a discontinuity somehow)\n      // - The \"timestampOffset\" for the start of this segment is less than\n      //   the currently set timestampOffset\n      if (segment.timeline !== this.currentTimeline_ || startOfSegment < this.sourceUpdater_.timestampOffset()) {\n        timestampOffset = startOfSegment;\n      }\n\n      return {\n        // resolve the segment URL relative to the playlist\n        uri: segment.resolvedUri,\n        // the segment's mediaIndex at the time it was requested\n        mediaIndex: mediaIndex,\n        // the segment's playlist\n        playlist: playlist,\n        // unencrypted bytes of the segment\n        bytes: null,\n        // when a key is defined for this segment, the encrypted bytes\n        encryptedBytes: null,\n        // the state of the buffer before a segment is appended will be\n        // stored here so that the actual segment duration can be\n        // determined after it has been appended\n        buffered: null,\n        // The target timestampOffset for this segment when we append it\n        // to the source buffer\n        timestampOffset: timestampOffset,\n        // The timeline that the segment is in\n        timeline: segment.timeline\n      };\n    }\n\n    /**\n     * abort all pending xhr requests and null any pending segements\n     *\n     * @private\n     */\n  }, {\n    key: 'abort_',\n    value: function abort_() {\n      if (this.xhr_) {\n        this.xhr_.abort();\n      }\n\n      // clear out the segment being processed\n      this.pendingSegment_ = null;\n    }\n\n    /**\n     * fill the buffer with segements unless the\n     * sourceBuffers are currently updating\n     *\n     * @private\n     */\n  }, {\n    key: 'fillBuffer_',\n    value: function fillBuffer_() {\n      if (this.sourceUpdater_.updating()) {\n        return;\n      }\n\n      // see if we need to begin loading immediately\n      var request = this.checkBuffer_(this.sourceUpdater_.buffered(), this.playlist_, this.currentTime_(), this.timestampOffset_);\n\n      if (!request) {\n        return;\n      }\n\n      // Sanity check the segment-index determining logic by calcuating the\n      // percentage of the chosen segment that is buffered. If more than 90%\n      // of the segment is buffered then fetching it will likely not help in\n      // any way\n      var percentBuffered = this.getSegmentBufferedPercent_(this.playlist_, request.mediaIndex, this.currentTime_(), this.sourceUpdater_.buffered());\n\n      if (percentBuffered >= 90) {\n        // Increment the timeCorrection_ variable to push the fetcher forward\n        // in time and hopefully skip any gaps or flaws in our understanding\n        // of the media\n        this.incrementTimeCorrection_(this.playlist_.targetDuration);\n\n        if (!this.paused()) {\n          this.fillBuffer_();\n        }\n\n        return;\n      }\n\n      this.loadSegment_(request);\n    }\n\n    /**\n     * load a specific segment from a request into the buffer\n     *\n     * @private\n     */\n  }, {\n    key: 'loadSegment_',\n    value: function loadSegment_(segmentInfo) {\n      var segment = undefined;\n      var requestTimeout = undefined;\n      var keyXhr = undefined;\n      var segmentXhr = undefined;\n      var seekable = this.seekable_();\n      var currentTime = this.currentTime_();\n      var removeToTime = 0;\n\n      // Chrome has a hard limit of 150mb of\n      // buffer and a very conservative \"garbage collector\"\n      // We manually clear out the old buffer to ensure\n      // we don't trigger the QuotaExceeded error\n      // on the source buffer during subsequent appends\n\n      // If we have a seekable range use that as the limit for what can be removed safely\n      // otherwise remove anything older than 1 minute before the current play head\n      if (seekable.length && seekable.start(0) > 0 && seekable.start(0) < currentTime) {\n        removeToTime = seekable.start(0);\n      } else {\n        removeToTime = currentTime - 60;\n      }\n\n      if (removeToTime > 0) {\n        this.sourceUpdater_.remove(0, removeToTime);\n      }\n\n      segment = segmentInfo.playlist.segments[segmentInfo.mediaIndex];\n      // Set xhr timeout to 150% of the segment duration to allow us\n      // some time to switch renditions in the event of a catastrophic\n      // decrease in network performance or a server issue.\n      requestTimeout = segment.duration * 1.5 * 1000;\n\n      if (segment.key) {\n        keyXhr = this.hls_.xhr({\n          uri: segment.key.resolvedUri,\n          responseType: 'arraybuffer',\n          withCredentials: this.withCredentials_,\n          timeout: requestTimeout\n        }, this.handleResponse_.bind(this));\n      }\n      this.pendingSegment_ = segmentInfo;\n      segmentXhr = this.hls_.xhr({\n        uri: segmentInfo.uri,\n        responseType: 'arraybuffer',\n        withCredentials: this.withCredentials_,\n        timeout: requestTimeout,\n        headers: segmentXhrHeaders(segment)\n      }, this.handleResponse_.bind(this));\n\n      this.xhr_ = {\n        keyXhr: keyXhr,\n        segmentXhr: segmentXhr,\n        abort: function abort() {\n          if (this.segmentXhr) {\n            // Prevent error handler from running.\n            this.segmentXhr.onreadystatechange = null;\n            this.segmentXhr.abort();\n            this.segmentXhr = null;\n          }\n          if (this.keyXhr) {\n            // Prevent error handler from running.\n            this.keyXhr.onreadystatechange = null;\n            this.keyXhr.abort();\n            this.keyXhr = null;\n          }\n        }\n      };\n\n      this.state = 'WAITING';\n    }\n\n    /**\n     * triggered when a segment response is received\n     *\n     * @private\n     */\n  }, {\n    key: 'handleResponse_',\n    value: function handleResponse_(error, request) {\n      var segmentInfo = undefined;\n      var segment = undefined;\n      var keyXhrRequest = undefined;\n      var view = undefined;\n\n      // timeout of previously aborted request\n      if (!this.xhr_ || request !== this.xhr_.segmentXhr && request !== this.xhr_.keyXhr) {\n        return;\n      }\n\n      segmentInfo = this.pendingSegment_;\n      segment = segmentInfo.playlist.segments[segmentInfo.mediaIndex];\n\n      // if a request times out, reset bandwidth tracking\n      if (request.timedout) {\n        this.abort_();\n        this.bandwidth = 1;\n        this.roundTrip = NaN;\n        this.state = 'READY';\n        return this.trigger('progress');\n      }\n\n      // trigger an event for other errors\n      if (!request.aborted && error) {\n        // abort will clear xhr_\n        keyXhrRequest = this.xhr_.keyXhr;\n        this.abort_();\n        this.error({\n          status: request.status,\n          message: request === keyXhrRequest ? 'HLS key request error at URL: ' + segment.key.uri : 'HLS segment request error at URL: ' + segmentInfo.uri,\n          code: 2,\n          xhr: request\n        });\n        this.state = 'READY';\n        this.pause();\n        return this.trigger('error');\n      }\n\n      // stop processing if the request was aborted\n      if (!request.response) {\n        this.abort_();\n        return;\n      }\n\n      if (request === this.xhr_.segmentXhr) {\n        // the segment request is no longer outstanding\n        this.xhr_.segmentXhr = null;\n\n        // calculate the download bandwidth based on segment request\n        this.roundTrip = request.roundTripTime;\n        this.bandwidth = request.bandwidth;\n        this.bytesReceived += request.bytesReceived || 0;\n\n        if (segment.key) {\n          segmentInfo.encryptedBytes = new Uint8Array(request.response);\n        } else {\n          segmentInfo.bytes = new Uint8Array(request.response);\n        }\n      }\n\n      if (request === this.xhr_.keyXhr) {\n        keyXhrRequest = this.xhr_.segmentXhr;\n        // the key request is no longer outstanding\n        this.xhr_.keyXhr = null;\n\n        if (request.response.byteLength !== 16) {\n          this.abort_();\n          this.error({\n            status: request.status,\n            message: 'Invalid HLS key at URL: ' + segment.key.uri,\n            code: 2,\n            xhr: request\n          });\n          this.state = 'READY';\n          this.pause();\n          return this.trigger('error');\n        }\n\n        view = new DataView(request.response);\n        segment.key.bytes = new Uint32Array([view.getUint32(0), view.getUint32(4), view.getUint32(8), view.getUint32(12)]);\n\n        // if the media sequence is greater than 2^32, the IV will be incorrect\n        // assuming 10s segments, that would be about 1300 years\n        segment.key.iv = segment.key.iv || new Uint32Array([0, 0, 0, segmentInfo.mediaIndex + segmentInfo.playlist.mediaSequence]);\n      }\n\n      if (!this.xhr_.segmentXhr && !this.xhr_.keyXhr) {\n        this.xhr_ = null;\n        this.processResponse_();\n      }\n    }\n\n    /**\n     * clear anything that is currently in the buffer and throw it away\n     */\n  }, {\n    key: 'clearBuffer',\n    value: function clearBuffer() {\n      if (this.sourceUpdater_ && this.sourceUpdater_.buffered().length) {\n        this.sourceUpdater_.remove(0, Infinity);\n      }\n    }\n\n    /**\n     * Decrypt the segment that is being loaded if necessary\n     *\n     * @private\n     */\n  }, {\n    key: 'processResponse_',\n    value: function processResponse_() {\n      var segmentInfo = undefined;\n      var segment = undefined;\n\n      this.state = 'DECRYPTING';\n\n      segmentInfo = this.pendingSegment_;\n      segment = segmentInfo.playlist.segments[segmentInfo.mediaIndex];\n\n      if (segment.key) {\n        // this is an encrypted segment\n        // incrementally decrypt the segment\n        /* eslint-disable no-new, handle-callback-err */\n        new _decrypter.Decrypter(segmentInfo.encryptedBytes, segment.key.bytes, segment.key.iv, (function (err, bytes) {\n          // err always null\n          segmentInfo.bytes = bytes;\n          this.handleSegment_();\n        }).bind(this));\n        /* eslint-enable */\n      } else {\n          this.handleSegment_();\n        }\n    }\n\n    /**\n     * append a decrypted segement to the SourceBuffer through a SourceUpdater\n     *\n     * @private\n     */\n  }, {\n    key: 'handleSegment_',\n    value: function handleSegment_() {\n      var segmentInfo = undefined;\n\n      this.state = 'APPENDING';\n      segmentInfo = this.pendingSegment_;\n      segmentInfo.buffered = this.sourceUpdater_.buffered();\n      this.currentTimeline_ = segmentInfo.timeline;\n\n      if (segmentInfo.timestampOffset !== this.sourceUpdater_.timestampOffset()) {\n        this.sourceUpdater_.timestampOffset(segmentInfo.timestampOffset);\n      }\n\n      this.sourceUpdater_.appendBuffer(segmentInfo.bytes, this.handleUpdateEnd_.bind(this));\n    }\n\n    /**\n     * callback to run when appendBuffer is finished. detects if we are\n     * in a good state to do things with the data we got, or if we need\n     * to wait for more\n     *\n     * @private\n     */\n  }, {\n    key: 'handleUpdateEnd_',\n    value: function handleUpdateEnd_() {\n      var segmentInfo = this.pendingSegment_;\n      var currentTime = this.currentTime_();\n\n      this.pendingSegment_ = null;\n\n      // add segment metadata if it we have gained information during the\n      // last append\n      this.updateTimeline_(segmentInfo);\n      this.trigger('progress');\n\n      var currentMediaIndex = segmentInfo.mediaIndex;\n\n      currentMediaIndex += segmentInfo.playlist.mediaSequence - this.playlist_.mediaSequence;\n\n      var currentBuffered = _ranges2['default'].findRange(this.sourceUpdater_.buffered(), currentTime);\n\n      // any time an update finishes and the last segment is in the\n      // buffer, end the stream. this ensures the \"ended\" event will\n      // fire if playback reaches that point.\n      var isEndOfStream = detectEndOfStream(segmentInfo.playlist, this.mediaSource_, currentMediaIndex, currentBuffered);\n\n      if (isEndOfStream) {\n        this.mediaSource_.endOfStream();\n      }\n\n      // when seeking to the beginning of the seekable range, it's\n      // possible that imprecise timing information may cause the seek to\n      // end up earlier than the start of the range\n      // in that case, seek again\n      var seekable = this.seekable_();\n      var next = _ranges2['default'].findNextRange(this.sourceUpdater_.buffered(), currentTime);\n\n      if (this.seeking_() && currentBuffered.length === 0) {\n        if (seekable.length && currentTime < seekable.start(0)) {\n\n          if (next.length) {\n            _videoJs2['default'].log('tried seeking to', currentTime, 'but that was too early, retrying at', next.start(0));\n            this.setCurrentTime_(next.start(0) + _ranges2['default'].TIME_FUDGE_FACTOR);\n          }\n        }\n      }\n\n      this.state = 'READY';\n\n      if (!this.paused()) {\n        this.fillBuffer_();\n      }\n    }\n\n    /**\n     * annotate the segment with any start and end time information\n     * added by the media processing\n     *\n     * @private\n     * @param {Object} segmentInfo annotate a segment with time info\n     */\n  }, {\n    key: 'updateTimeline_',\n    value: function updateTimeline_(segmentInfo) {\n      var segment = undefined;\n      var segmentEnd = undefined;\n      var timelineUpdated = undefined;\n      var segmentLength = this.playlist_.targetDuration;\n      var playlist = segmentInfo.playlist;\n      var currentMediaIndex = segmentInfo.mediaIndex;\n\n      currentMediaIndex += playlist.mediaSequence - this.playlist_.mediaSequence;\n      segment = playlist.segments[currentMediaIndex];\n\n      // Update segment meta-data (duration and end-point) based on timeline\n      if (segment && segmentInfo && segmentInfo.playlist.uri === this.playlist_.uri) {\n        segmentEnd = _ranges2['default'].findSoleUncommonTimeRangesEnd(segmentInfo.buffered, this.sourceUpdater_.buffered());\n        timelineUpdated = updateSegmentMetadata(playlist, currentMediaIndex, segmentEnd);\n        segmentLength = segment.duration;\n      }\n\n      // the last segment append must have been entirely in the\n      // already buffered time ranges. adjust the timeCorrection\n      // offset to fetch forward until we find a segment that adds\n      // to the buffered time ranges and improves subsequent media\n      // index calculations.\n      if (!timelineUpdated) {\n        this.incrementTimeCorrection_(segmentLength);\n      } else {\n        this.timeCorrection_ = 0;\n      }\n    }\n\n    /**\n     * add a number of seconds to the currentTime when determining which\n     * segment to fetch in order to force the fetcher to advance in cases\n     * where it may get stuck on the same segment due to buffer gaps or\n     * missing segment annotation after a rendition switch (especially\n     * during a live stream)\n     *\n     * @private\n     * @param {Number} secondsToIncrement number of seconds to add to the\n     * timeCorrection_ variable\n     */\n  }, {\n    key: 'incrementTimeCorrection_',\n    value: function incrementTimeCorrection_(secondsToIncrement) {\n      // If we have already incremented timeCorrection_ beyond the limit,\n      // then stop trying to find a segment, pause fetching, and emit an\n      // error event\n      if (this.timeCorrection_ >= this.playlist_.targetDuration * 5) {\n        this.timeCorrection_ = 0;\n        this.pause();\n        return this.trigger('error');\n      }\n\n      this.timeCorrection_ += secondsToIncrement;\n    }\n  }]);\n\n  return SegmentLoader;\n})(_videoJs2['default'].EventTarget);\n\nexports['default'] = SegmentLoader;\n}).call(this,typeof global !== \"undefined\" ? global : typeof self !== \"undefined\" ? self : typeof window !== \"undefined\" ? window : {})\n},{\"./decrypter\":5,\"./playlist\":13,\"./ranges\":14,\"./source-updater\":17}],17:[function(require,module,exports){\n(function (global){\n/**\n * @file source-updater.js\n */\n'use strict';\n\nObject.defineProperty(exports, '__esModule', {\n  value: true\n});\n\nvar _createClass = (function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ('value' in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; })();\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { 'default': obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError('Cannot call a class as a function'); } }\n\nvar _videoJs = (typeof window !== \"undefined\" ? window['videojs'] : typeof global !== \"undefined\" ? global['videojs'] : null);\n\nvar _videoJs2 = _interopRequireDefault(_videoJs);\n\n/**\n * A queue of callbacks to be serialized and applied when a\n * MediaSource and its associated SourceBuffers are not in the\n * updating state. It is used by the segment loader to update the\n * underlying SourceBuffers when new data is loaded, for instance.\n *\n * @class SourceUpdater\n * @param {MediaSource} mediaSource the MediaSource to create the\n * SourceBuffer from\n * @param {String} mimeType the desired MIME type of the underlying\n * SourceBuffer\n */\n\nvar SourceUpdater = (function () {\n  function SourceUpdater(mediaSource, mimeType) {\n    var _this = this;\n\n    _classCallCheck(this, SourceUpdater);\n\n    var createSourceBuffer = function createSourceBuffer() {\n      _this.sourceBuffer_ = mediaSource.addSourceBuffer(mimeType);\n\n      // run completion handlers and process callbacks as updateend\n      // events fire\n      _this.sourceBuffer_.addEventListener('updateend', function () {\n        var pendingCallback = _this.pendingCallback_;\n\n        _this.pendingCallback_ = null;\n\n        if (pendingCallback) {\n          pendingCallback();\n        }\n      });\n      _this.sourceBuffer_.addEventListener('updateend', _this.runCallback_.bind(_this));\n\n      _this.runCallback_();\n    };\n\n    this.callbacks_ = [];\n    this.pendingCallback_ = null;\n    this.timestampOffset_ = 0;\n    this.mediaSource = mediaSource;\n\n    if (mediaSource.readyState === 'closed') {\n      mediaSource.addEventListener('sourceopen', createSourceBuffer);\n    } else {\n      createSourceBuffer();\n    }\n  }\n\n  /**\n   * Aborts the current segment and resets the segment parser.\n   *\n   * @param {Function} done function to call when done\n   * @see http://w3c.github.io/media-source/#widl-SourceBuffer-abort-void\n   */\n\n  _createClass(SourceUpdater, [{\n    key: 'abort',\n    value: function abort(done) {\n      var _this2 = this;\n\n      this.queueCallback_(function () {\n        _this2.sourceBuffer_.abort();\n      }, done);\n    }\n\n    /**\n     * Queue an update to append an ArrayBuffer.\n     *\n     * @param {ArrayBuffer} bytes\n     * @param {Function} done the function to call when done\n     * @see http://www.w3.org/TR/media-source/#widl-SourceBuffer-appendBuffer-void-ArrayBuffer-data\n     */\n  }, {\n    key: 'appendBuffer',\n    value: function appendBuffer(bytes, done) {\n      var _this3 = this;\n\n      this.queueCallback_(function () {\n        _this3.sourceBuffer_.appendBuffer(bytes);\n      }, done);\n    }\n\n    /**\n     * Indicates what TimeRanges are buffered in the managed SourceBuffer.\n     *\n     * @see http://www.w3.org/TR/media-source/#widl-SourceBuffer-buffered\n     */\n  }, {\n    key: 'buffered',\n    value: function buffered() {\n      if (!this.sourceBuffer_) {\n        return _videoJs2['default'].createTimeRanges();\n      }\n      return this.sourceBuffer_.buffered;\n    }\n\n    /**\n     * Queue an update to set the duration.\n     *\n     * @param {Double} duration what to set the duration to\n     * @see http://www.w3.org/TR/media-source/#widl-MediaSource-duration\n     */\n  }, {\n    key: 'duration',\n    value: function duration(_duration) {\n      var _this4 = this;\n\n      this.queueCallback_(function () {\n        _this4.sourceBuffer_.duration = _duration;\n      });\n    }\n\n    /**\n     * Queue an update to remove a time range from the buffer.\n     *\n     * @param {Number} start where to start the removal\n     * @param {Number} end where to end the removal\n     * @see http://www.w3.org/TR/media-source/#widl-SourceBuffer-remove-void-double-start-unrestricted-double-end\n     */\n  }, {\n    key: 'remove',\n    value: function remove(start, end) {\n      var _this5 = this;\n\n      this.queueCallback_(function () {\n        _this5.sourceBuffer_.remove(start, end);\n      });\n    }\n\n    /**\n     * wether the underlying sourceBuffer is updating or not\n     *\n     * @return {Boolean} the updating status of the SourceBuffer\n     */\n  }, {\n    key: 'updating',\n    value: function updating() {\n      return !this.sourceBuffer_ || this.sourceBuffer_.updating;\n    }\n\n    /**\n     * Set/get the timestampoffset on the SourceBuffer\n     *\n     * @return {Number} the timestamp offset\n     */\n  }, {\n    key: 'timestampOffset',\n    value: function timestampOffset(offset) {\n      var _this6 = this;\n\n      if (typeof offset !== 'undefined') {\n        this.queueCallback_(function () {\n          _this6.sourceBuffer_.timestampOffset = offset;\n        });\n        this.timestampOffset_ = offset;\n      }\n      return this.timestampOffset_;\n    }\n\n    /**\n     * que a callback to run\n     */\n  }, {\n    key: 'queueCallback_',\n    value: function queueCallback_(callback, done) {\n      this.callbacks_.push([callback.bind(this), done]);\n      this.runCallback_();\n    }\n\n    /**\n     * run a queued callback\n     */\n  }, {\n    key: 'runCallback_',\n    value: function runCallback_() {\n      var callbacks = undefined;\n\n      if (this.sourceBuffer_ && !this.sourceBuffer_.updating && this.callbacks_.length) {\n        callbacks = this.callbacks_.shift();\n        this.pendingCallback_ = callbacks[1];\n        callbacks[0]();\n      }\n    }\n\n    /**\n     * dispose of the source updater and the underlying sourceBuffer\n     */\n  }, {\n    key: 'dispose',\n    value: function dispose() {\n      if (this.sourceBuffer_ && this.mediaSource.readyState === 'open') {\n        this.sourceBuffer_.abort();\n      }\n    }\n  }]);\n\n  return SourceUpdater;\n})();\n\nexports['default'] = SourceUpdater;\nmodule.exports = exports['default'];\n}).call(this,typeof global !== \"undefined\" ? global : typeof self !== \"undefined\" ? self : typeof window !== \"undefined\" ? window : {})\n},{}],18:[function(require,module,exports){\n/**\n * @file stream.js\n */\n/**\n * A lightweight readable stream implemention that handles event dispatching.\n *\n * @class Stream\n */\n'use strict';\n\nObject.defineProperty(exports, '__esModule', {\n  value: true\n});\n\nvar _createClass = (function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ('value' in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; })();\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError('Cannot call a class as a function'); } }\n\nvar Stream = (function () {\n  function Stream() {\n    _classCallCheck(this, Stream);\n\n    this.listeners = {};\n  }\n\n  /**\n   * Add a listener for a specified event type.\n   *\n   * @param {String} type the event name\n   * @param {Function} listener the callback to be invoked when an event of\n   * the specified type occurs\n   */\n\n  _createClass(Stream, [{\n    key: 'on',\n    value: function on(type, listener) {\n      if (!this.listeners[type]) {\n        this.listeners[type] = [];\n      }\n      this.listeners[type].push(listener);\n    }\n\n    /**\n     * Remove a listener for a specified event type.\n     *\n     * @param {String} type the event name\n     * @param {Function} listener  a function previously registered for this\n     * type of event through `on`\n     * @return {Boolean} if we could turn it off or not\n     */\n  }, {\n    key: 'off',\n    value: function off(type, listener) {\n      var index = undefined;\n\n      if (!this.listeners[type]) {\n        return false;\n      }\n      index = this.listeners[type].indexOf(listener);\n      this.listeners[type].splice(index, 1);\n      return index > -1;\n    }\n\n    /**\n     * Trigger an event of the specified type on this stream. Any additional\n     * arguments to this function are passed as parameters to event listeners.\n     *\n     * @param {String} type the event name\n     */\n  }, {\n    key: 'trigger',\n    value: function trigger(type) {\n      var callbacks = undefined;\n      var i = undefined;\n      var length = undefined;\n      var args = undefined;\n\n      callbacks = this.listeners[type];\n      if (!callbacks) {\n        return;\n      }\n      // Slicing the arguments on every invocation of this method\n      // can add a significant amount of overhead. Avoid the\n      // intermediate object creation for the common case of a\n      // single callback argument\n      if (arguments.length === 2) {\n        length = callbacks.length;\n        for (i = 0; i < length; ++i) {\n          callbacks[i].call(this, arguments[1]);\n        }\n      } else {\n        args = Array.prototype.slice.call(arguments, 1);\n        length = callbacks.length;\n        for (i = 0; i < length; ++i) {\n          callbacks[i].apply(this, args);\n        }\n      }\n    }\n\n    /**\n     * Destroys the stream and cleans up.\n     */\n  }, {\n    key: 'dispose',\n    value: function dispose() {\n      this.listeners = {};\n    }\n\n    /**\n     * Forwards all `data` events on this stream to the destination stream. The\n     * destination stream should provide a method `push` to receive the data\n     * events as they arrive.\n     *\n     * @param {Stream} destination the stream that will receive all `data` events\n     * @see http://nodejs.org/api/stream.html#stream_readable_pipe_destination_options\n     */\n  }, {\n    key: 'pipe',\n    value: function pipe(destination) {\n      this.on('data', function (data) {\n        destination.push(data);\n      });\n    }\n  }]);\n\n  return Stream;\n})();\n\nexports['default'] = Stream;\nmodule.exports = exports['default'];\n},{}],19:[function(require,module,exports){\n(function (global){\n/**\n * @file xhr.js\n */\n\n/**\n * A wrapper for videojs.xhr that tracks bandwidth.\n *\n * @param {Object} options options for the XHR\n * @param {Function} callback the callback to call when done\n * @return {Request} the xhr request that is going to be made\n */\n'use strict';\n\nObject.defineProperty(exports, '__esModule', {\n  value: true\n});\n\nvar _videoJs = (typeof window !== \"undefined\" ? window['videojs'] : typeof global !== \"undefined\" ? global['videojs'] : null);\n\nvar xhrFactory = function xhrFactory() {\n  var xhr = function XhrFunction(options, callback) {\n    // Add a default timeout for all hls requests\n    options = (0, _videoJs.mergeOptions)({\n      timeout: 45e3\n    }, options);\n\n    // Allow an optional user-specified function to modify the option\n    // object before we construct the xhr request\n    if (XhrFunction.beforeRequest && typeof XhrFunction.beforeRequest === 'function') {\n      var newOptions = XhrFunction.beforeRequest(options);\n\n      if (newOptions) {\n        options = newOptions;\n      }\n    }\n\n    var request = (0, _videoJs.xhr)(options, function (error, response) {\n      if (!error && request.response) {\n        request.responseTime = new Date().getTime();\n        request.roundTripTime = request.responseTime - request.requestTime;\n        request.bytesReceived = request.response.byteLength || request.response.length;\n        if (!request.bandwidth) {\n          request.bandwidth = Math.floor(request.bytesReceived / request.roundTripTime * 8 * 1000);\n        }\n      }\n\n      // videojs.xhr now uses a specific code\n      // on the error object to signal that a request has\n      // timed out errors of setting a boolean on the request object\n      if (error || request.timedout) {\n        request.timedout = request.timedout || error.code === 'ETIMEDOUT';\n      } else {\n        request.timedout = false;\n      }\n\n      // videojs.xhr no longer considers status codes outside of 200 and 0\n      // (for file uris) to be errors, but the old XHR did, so emulate that\n      // behavior. Status 206 may be used in response to byterange requests.\n      if (!error && response.statusCode !== 200 && response.statusCode !== 206 && response.statusCode !== 0) {\n        error = new Error('XHR Failed with a response of: ' + (request && (request.response || request.responseText)));\n      }\n\n      callback(error, request);\n    });\n\n    request.requestTime = new Date().getTime();\n    return request;\n  };\n\n  return xhr;\n};\n\nexports['default'] = xhrFactory;\nmodule.exports = exports['default'];\n}).call(this,typeof global !== \"undefined\" ? global : typeof self !== \"undefined\" ? self : typeof window !== \"undefined\" ? window : {})\n},{}],20:[function(require,module,exports){\n\n},{}],21:[function(require,module,exports){\n(function (global){\nvar topLevel = typeof global !== 'undefined' ? global :\n    typeof window !== 'undefined' ? window : {}\nvar minDoc = require('min-document');\n\nif (typeof document !== 'undefined') {\n    module.exports = document;\n} else {\n    var doccy = topLevel['__GLOBAL_DOCUMENT_CACHE@4'];\n\n    if (!doccy) {\n        doccy = topLevel['__GLOBAL_DOCUMENT_CACHE@4'] = minDoc;\n    }\n\n    module.exports = doccy;\n}\n\n}).call(this,typeof global !== \"undefined\" ? global : typeof self !== \"undefined\" ? self : typeof window !== \"undefined\" ? window : {})\n},{\"min-document\":20}],22:[function(require,module,exports){\n/*\n * pkcs7.pad\n * https://github.com/brightcove/pkcs7\n *\n * Copyright (c) 2014 Brightcove\n * Licensed under the apache2 license.\n */\n\n'use strict';\n\nvar PADDING;\n\n/**\n * Returns a new Uint8Array that is padded with PKCS#7 padding.\n * @param plaintext {Uint8Array} the input bytes before encryption\n * @return {Uint8Array} the padded bytes\n * @see http://tools.ietf.org/html/rfc5652\n */\nmodule.exports = function pad(plaintext) {\n  var padding = PADDING[(plaintext.byteLength % 16) || 0],\n      result = new Uint8Array(plaintext.byteLength + padding.length);\n  result.set(plaintext);\n  result.set(padding, plaintext.byteLength);\n  return result;\n};\n\n// pre-define the padding values\nPADDING = [\n  [16, 16, 16, 16,\n   16, 16, 16, 16,\n   16, 16, 16, 16,\n   16, 16, 16, 16],\n\n  [15, 15, 15, 15,\n   15, 15, 15, 15,\n   15, 15, 15, 15,\n   15, 15, 15],\n\n  [14, 14, 14, 14,\n   14, 14, 14, 14,\n   14, 14, 14, 14,\n   14, 14],\n\n  [13, 13, 13, 13,\n   13, 13, 13, 13,\n   13, 13, 13, 13,\n   13],\n\n  [12, 12, 12, 12,\n   12, 12, 12, 12,\n   12, 12, 12, 12],\n\n  [11, 11, 11, 11,\n   11, 11, 11, 11,\n   11, 11, 11],\n\n  [10, 10, 10, 10,\n   10, 10, 10, 10,\n   10, 10],\n\n  [9, 9, 9, 9,\n   9, 9, 9, 9,\n   9],\n\n  [8, 8, 8, 8,\n   8, 8, 8, 8],\n\n  [7, 7, 7, 7,\n   7, 7, 7],\n\n  [6, 6, 6, 6,\n   6, 6],\n\n  [5, 5, 5, 5,\n   5],\n\n  [4, 4, 4, 4],\n\n  [3, 3, 3],\n\n  [2, 2],\n\n  [1]\n];\n\n},{}],23:[function(require,module,exports){\n/*\n * pkcs7\n * https://github.com/brightcove/pkcs7\n *\n * Copyright (c) 2014 Brightcove\n * Licensed under the apache2 license.\n */\n\n'use strict';\n\nexports.pad = require('./pad.js');\nexports.unpad = require('./unpad.js');\n\n},{\"./pad.js\":22,\"./unpad.js\":24}],24:[function(require,module,exports){\n/*\n * pkcs7.unpad\n * https://github.com/brightcove/pkcs7\n *\n * Copyright (c) 2014 Brightcove\n * Licensed under the apache2 license.\n */\n\n'use strict';\n\n/**\n * Returns the subarray of a Uint8Array without PKCS#7 padding.\n * @param padded {Uint8Array} unencrypted bytes that have been padded\n * @return {Uint8Array} the unpadded bytes\n * @see http://tools.ietf.org/html/rfc5652\n */\nmodule.exports = function unpad(padded) {\n  return padded.subarray(0, padded.byteLength - padded[padded.byteLength - 1]);\n};\n\n},{}],25:[function(require,module,exports){\n(function (global){\n/**\n * @file add-text-track-data.js\n */\n'use strict';\n\nObject.defineProperty(exports, '__esModule', {\n  value: true\n});\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { 'default': obj }; }\n\nvar _videoJs = (typeof window !== \"undefined\" ? window['videojs'] : typeof global !== \"undefined\" ? global['videojs'] : null);\n\nvar _videoJs2 = _interopRequireDefault(_videoJs);\n\n/**\n * Define properties on a cue for backwards compatability,\n * but warn the user that the way that they are using it\n * is depricated and will be removed at a later date.\n *\n * @param {Cue} cue the cue to add the properties on\n * @private\n */\nvar deprecateOldCue = function deprecateOldCue(cue) {\n  Object.defineProperties(cue.frame, {\n    id: {\n      get: function get() {\n        _videoJs2['default'].log.warn('cue.frame.id is deprecated. Use cue.value.key instead.');\n        return cue.value.key;\n      }\n    },\n    value: {\n      get: function get() {\n        _videoJs2['default'].log.warn('cue.frame.value is deprecated. Use cue.value.data instead.');\n        return cue.value.data;\n      }\n    },\n    privateData: {\n      get: function get() {\n        _videoJs2['default'].log.warn('cue.frame.privateData is deprecated. Use cue.value.data instead.');\n        return cue.value.data;\n      }\n    }\n  });\n};\n\n/**\n * Add text track data to a source handler given the captions and\n * metadata from the buffer.\n *\n * @param {Object} sourceHandler the flash or virtual source buffer\n * @param {Array} captionArray an array of caption data\n * @param {Array} cue an array of meta data\n * @private\n */\nvar addTextTrackData = function addTextTrackData(sourceHandler, captionArray, metadataArray) {\n  var Cue = window.WebKitDataCue || window.VTTCue;\n\n  if (captionArray) {\n    captionArray.forEach(function (caption) {\n      this.inbandTextTrack_.addCue(new Cue(caption.startTime + this.timestampOffset, caption.endTime + this.timestampOffset, caption.text));\n    }, sourceHandler);\n  }\n\n  if (metadataArray) {\n    metadataArray.forEach(function (metadata) {\n      var time = metadata.cueTime + this.timestampOffset;\n\n      metadata.frames.forEach(function (frame) {\n        var cue = new Cue(time, time, frame.value || frame.url || frame.data || '');\n\n        cue.frame = frame;\n        cue.value = frame;\n        deprecateOldCue(cue);\n        this.metadataTrack_.addCue(cue);\n      }, this);\n    }, sourceHandler);\n  }\n};\n\nexports['default'] = addTextTrackData;\nmodule.exports = exports['default'];\n}).call(this,typeof global !== \"undefined\" ? global : typeof self !== \"undefined\" ? self : typeof window !== \"undefined\" ? window : {})\n},{}],26:[function(require,module,exports){\n/**\n * @file codec-utils.js\n */\n\n/**\n * Check if a codec string refers to an audio codec.\n *\n * @param {String} codec codec string to check\n * @return {Boolean} if this is an audio codec\n * @private\n */\n'use strict';\n\nObject.defineProperty(exports, '__esModule', {\n  value: true\n});\nvar isAudioCodec = function isAudioCodec(codec) {\n  return (/mp4a\\.\\d+.\\d+/i.test(codec)\n  );\n};\n\n/**\n * Check if a codec string refers to a video codec.\n *\n * @param {String} codec codec string to check\n * @return {Boolean} if this is a video codec\n * @private\n */\nvar isVideoCodec = function isVideoCodec(codec) {\n  return (/avc1\\.[\\da-f]+/i.test(codec)\n  );\n};\n\n/**\n * Parse a content type header into a type and parameters\n * object\n *\n * @param {String} type the content type header\n * @return {Object} the parsed content-type\n * @private\n */\nvar parseContentType = function parseContentType(type) {\n  var object = { type: '', parameters: {} };\n  var parameters = type.trim().split(';');\n\n  // first parameter should always be content-type\n  object.type = parameters.shift().trim();\n  parameters.forEach(function (parameter) {\n    var pair = parameter.trim().split('=');\n\n    if (pair.length > 1) {\n      var _name = pair[0].replace(/\"/g, '').trim();\n      var value = pair[1].replace(/\"/g, '').trim();\n\n      object.parameters[_name] = value;\n    }\n  });\n\n  return object;\n};\n\nexports['default'] = {\n  isAudioCodec: isAudioCodec,\n  parseContentType: parseContentType,\n  isVideoCodec: isVideoCodec\n};\nmodule.exports = exports['default'];\n},{}],27:[function(require,module,exports){\n/**\n * @file create-text-tracks-if-necessary.js\n */\n\n/**\n * Create text tracks on video.js if they exist on a segment.\n *\n * @param {Object} sourceBuffer the VSB or FSB\n * @param {Object} mediaSource the HTML or Flash media source\n * @param {Object} segment the segment that may contain the text track\n * @private\n */\n'use strict';\n\nObject.defineProperty(exports, '__esModule', {\n  value: true\n});\nvar createTextTracksIfNecessary = function createTextTracksIfNecessary(sourceBuffer, mediaSource, segment) {\n  // create an in-band caption track if one is present in the segment\n  if (segment.captions && segment.captions.length && !sourceBuffer.inbandTextTrack_) {\n    sourceBuffer.inbandTextTrack_ = mediaSource.player_.addTextTrack('captions', 'cc1');\n  }\n\n  if (segment.metadata && segment.metadata.length && !sourceBuffer.metadataTrack_) {\n    sourceBuffer.metadataTrack_ = mediaSource.player_.addTextTrack('metadata', 'Timed Metadata');\n    sourceBuffer.metadataTrack_.inBandMetadataTrackDispatchType = segment.metadata.dispatchType;\n  }\n};\n\nexports['default'] = createTextTracksIfNecessary;\nmodule.exports = exports['default'];\n},{}],28:[function(require,module,exports){\n/**\n * @file flash-constants.js\n */\n/**\n * The maximum size in bytes for append operations to the video.js\n * SWF. Calling through to Flash blocks and can be expensive so\n * tuning this parameter may improve playback on slower\n * systems. There are two factors to consider:\n * - Each interaction with the SWF must be quick or you risk dropping\n * video frames. To maintain 60fps for the rest of the page, each append\n * must not  take longer than 16ms. Given the likelihood that the page\n * will be executing more javascript than just playback, you probably\n * want to aim for less than 8ms. We aim for just 4ms.\n * - Bigger appends significantly increase throughput. The total number of\n * bytes over time delivered to the SWF must exceed the video bitrate or\n * playback will stall.\n *\n * We adaptively tune the size of appends to give the best throughput\n * possible given the performance of the system. To do that we try to append\n * as much as possible in TIME_PER_TICK and while tuning the size of appends\n * dynamically so that we only append about 4-times in that 4ms span.\n *\n * The reason we try to keep the number of appends around four is due to\n * externalities such as Flash load and garbage collection that are highly\n * variable and having 4 iterations allows us to exit the loop early if\n * an iteration takes longer than expected.\n *\n * @private\n */\n\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nvar flashConstants = {\n  TIME_BETWEEN_TICKS: Math.floor(1000 / 480),\n  TIME_PER_TICK: Math.floor(1000 / 240),\n  // 1kb\n  BYTES_PER_CHUNK: 1 * 1024,\n  MIN_CHUNK: 1024,\n  MAX_CHUNK: 1024 * 1024\n};\n\nexports[\"default\"] = flashConstants;\nmodule.exports = exports[\"default\"];\n},{}],29:[function(require,module,exports){\n(function (global){\n/**\n * @file flash-media-source.js\n */\n'use strict';\n\nObject.defineProperty(exports, '__esModule', {\n  value: true\n});\n\nvar _createClass = (function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ('value' in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; })();\n\nvar _get = function get(_x, _x2, _x3) { var _again = true; _function: while (_again) { var object = _x, property = _x2, receiver = _x3; _again = false; if (object === null) object = Function.prototype; var desc = Object.getOwnPropertyDescriptor(object, property); if (desc === undefined) { var parent = Object.getPrototypeOf(object); if (parent === null) { return undefined; } else { _x = parent; _x2 = property; _x3 = receiver; _again = true; desc = parent = undefined; continue _function; } } else if ('value' in desc) { return desc.value; } else { var getter = desc.get; if (getter === undefined) { return undefined; } return getter.call(receiver); } } };\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { 'default': obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError('Cannot call a class as a function'); } }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== 'function' && superClass !== null) { throw new TypeError('Super expression must either be null or a function, not ' + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\nvar _videoJs = (typeof window !== \"undefined\" ? window['videojs'] : typeof global !== \"undefined\" ? global['videojs'] : null);\n\nvar _videoJs2 = _interopRequireDefault(_videoJs);\n\nvar _flashSourceBuffer = require('./flash-source-buffer');\n\nvar _flashSourceBuffer2 = _interopRequireDefault(_flashSourceBuffer);\n\nvar _flashConstants = require('./flash-constants');\n\nvar _flashConstants2 = _interopRequireDefault(_flashConstants);\n\nvar _codecUtils = require('./codec-utils');\n\n/**\n * A flash implmentation of HTML MediaSources and a polyfill\n * for browsers that don't support native or HTML MediaSources..\n *\n * @link https://developer.mozilla.org/en-US/docs/Web/API/MediaSource\n * @class FlashMediaSource\n * @extends videojs.EventTarget\n */\n\nvar FlashMediaSource = (function (_videojs$EventTarget) {\n  _inherits(FlashMediaSource, _videojs$EventTarget);\n\n  function FlashMediaSource() {\n    var _this = this;\n\n    _classCallCheck(this, FlashMediaSource);\n\n    _get(Object.getPrototypeOf(FlashMediaSource.prototype), 'constructor', this).call(this);\n    this.sourceBuffers = [];\n    this.readyState = 'closed';\n\n    this.on(['sourceopen', 'webkitsourceopen'], function (event) {\n      // find the swf where we will push media data\n      _this.swfObj = document.getElementById(event.swfId);\n      _this.player_ = (0, _videoJs2['default'])(_this.swfObj.parentNode);\n      _this.tech_ = _this.swfObj.tech;\n      _this.readyState = 'open';\n\n      _this.tech_.on('seeking', function () {\n        var i = _this.sourceBuffers.length;\n\n        while (i--) {\n          _this.sourceBuffers[i].abort();\n        }\n      });\n\n      // trigger load events\n      if (_this.swfObj) {\n        _this.swfObj.vjs_load();\n      }\n    });\n  }\n\n  /**\n    * Set or return the presentation duration.\n    *\n    * @param {Double} value the duration of the media in seconds\n    * @param {Double} the current presentation duration\n    * @link http://www.w3.org/TR/media-source/#widl-MediaSource-duration\n    */\n\n  /**\n   * We have this function so that the html and flash interfaces\n   * are the same.\n   *\n   * @private\n   */\n\n  _createClass(FlashMediaSource, [{\n    key: 'addSeekableRange_',\n    value: function addSeekableRange_() {}\n    // intentional no-op\n\n    /**\n     * Create a new flash source buffer and add it to our flash media source.\n     *\n     * @link https://developer.mozilla.org/en-US/docs/Web/API/MediaSource/addSourceBuffer\n     * @param {String} type the content-type of the source\n     * @return {Object} the flash source buffer\n     */\n\n  }, {\n    key: 'addSourceBuffer',\n    value: function addSourceBuffer(type) {\n      var parsedType = (0, _codecUtils.parseContentType)(type);\n      var sourceBuffer = undefined;\n\n      // if this is an FLV type, we'll push data to flash\n      if (parsedType.type === 'video/mp2t') {\n        // Flash source buffers\n        sourceBuffer = new _flashSourceBuffer2['default'](this);\n      } else {\n        throw new Error('NotSupportedError (Video.js)');\n      }\n\n      this.sourceBuffers.push(sourceBuffer);\n      return sourceBuffer;\n    }\n\n    /**\n     * Signals the end of the stream.\n     *\n     * @link https://w3c.github.io/media-source/#widl-MediaSource-endOfStream-void-EndOfStreamError-error\n     * @param {String=} error Signals that a playback error\n     * has occurred. If specified, it must be either \"network\" or\n     * \"decode\".\n     */\n  }, {\n    key: 'endOfStream',\n    value: function endOfStream(error) {\n      if (error === 'network') {\n        // MEDIA_ERR_NETWORK\n        this.tech_.error(2);\n      } else if (error === 'decode') {\n        // MEDIA_ERR_DECODE\n        this.tech_.error(3);\n      }\n      if (this.readyState !== 'ended') {\n        this.readyState = 'ended';\n        this.swfObj.vjs_endOfStream();\n      }\n    }\n  }]);\n\n  return FlashMediaSource;\n})(_videoJs2['default'].EventTarget);\n\nexports['default'] = FlashMediaSource;\ntry {\n  Object.defineProperty(FlashMediaSource.prototype, 'duration', {\n    /**\n     * Return the presentation duration.\n     *\n     * @return {Double} the duration of the media in seconds\n     * @link http://www.w3.org/TR/media-source/#widl-MediaSource-duration\n     */\n    get: function get() {\n      if (!this.swfObj) {\n        return NaN;\n      }\n      // get the current duration from the SWF\n      return this.swfObj.vjs_getProperty('duration');\n    },\n    /**\n     * Set the presentation duration.\n     *\n     * @param {Double} value the duration of the media in seconds\n     * @return {Double} the duration of the media in seconds\n     * @link http://www.w3.org/TR/media-source/#widl-MediaSource-duration\n     */\n    set: function set(value) {\n      var i = undefined;\n      var oldDuration = this.swfObj.vjs_getProperty('duration');\n\n      this.swfObj.vjs_setProperty('duration', value);\n\n      if (value < oldDuration) {\n        // In MSE, this triggers the range removal algorithm which causes\n        // an update to occur\n        for (i = 0; i < this.sourceBuffers.length; i++) {\n          this.sourceBuffers[i].remove(value, oldDuration);\n        }\n      }\n\n      return value;\n    }\n  });\n} catch (e) {\n  // IE8 throws if defineProperty is called on a non-DOM node. We\n  // don't support IE8 but we shouldn't throw an error if loaded\n  // there.\n  FlashMediaSource.prototype.duration = NaN;\n}\n\nfor (var property in _flashConstants2['default']) {\n  FlashMediaSource[property] = _flashConstants2['default'][property];\n}\nmodule.exports = exports['default'];\n}).call(this,typeof global !== \"undefined\" ? global : typeof self !== \"undefined\" ? self : typeof window !== \"undefined\" ? window : {})\n},{\"./codec-utils\":26,\"./flash-constants\":28,\"./flash-source-buffer\":30}],30:[function(require,module,exports){\n(function (global){\n/**\n * @file flash-source-buffer.js\n */\n'use strict';\n\nObject.defineProperty(exports, '__esModule', {\n  value: true\n});\n\nvar _createClass = (function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ('value' in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; })();\n\nvar _get = function get(_x, _x2, _x3) { var _again = true; _function: while (_again) { var object = _x, property = _x2, receiver = _x3; _again = false; if (object === null) object = Function.prototype; var desc = Object.getOwnPropertyDescriptor(object, property); if (desc === undefined) { var parent = Object.getPrototypeOf(object); if (parent === null) { return undefined; } else { _x = parent; _x2 = property; _x3 = receiver; _again = true; desc = parent = undefined; continue _function; } } else if ('value' in desc) { return desc.value; } else { var getter = desc.get; if (getter === undefined) { return undefined; } return getter.call(receiver); } } };\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { 'default': obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError('Cannot call a class as a function'); } }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== 'function' && superClass !== null) { throw new TypeError('Super expression must either be null or a function, not ' + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\nvar _videoJs = (typeof window !== \"undefined\" ? window['videojs'] : typeof global !== \"undefined\" ? global['videojs'] : null);\n\nvar _videoJs2 = _interopRequireDefault(_videoJs);\n\nvar _muxJs = require('mux.js');\n\nvar _muxJs2 = _interopRequireDefault(_muxJs);\n\nvar _removeCuesFromTrack = require('./remove-cues-from-track');\n\nvar _removeCuesFromTrack2 = _interopRequireDefault(_removeCuesFromTrack);\n\nvar _createTextTracksIfNecessary = require('./create-text-tracks-if-necessary');\n\nvar _createTextTracksIfNecessary2 = _interopRequireDefault(_createTextTracksIfNecessary);\n\nvar _addTextTrackData = require('./add-text-track-data');\n\nvar _addTextTrackData2 = _interopRequireDefault(_addTextTrackData);\n\nvar _flashConstants = require('./flash-constants');\n\nvar _flashConstants2 = _interopRequireDefault(_flashConstants);\n\n/**\n * A wrapper around the setTimeout function that uses\n * the flash constant time between ticks value.\n *\n * @param {Function} func the function callback to run\n * @private\n */\nvar scheduleTick = function scheduleTick(func) {\n  // Chrome doesn't invoke requestAnimationFrame callbacks\n  // in background tabs, so use setTimeout.\n  window.setTimeout(func, _flashConstants2['default'].TIME_BETWEEN_TICKS);\n};\n\n/**\n * Round a number to a specified number of places much like\n * toFixed but return a number instead of a string representation.\n *\n * @param {Number} num A number\n * @param {Number} places The number of decimal places which to\n * round\n * @private\n */\nvar toDecimalPlaces = function toDecimalPlaces(num, places) {\n  if (typeof places !== 'number' || places < 0) {\n    places = 0;\n  }\n\n  var scale = Math.pow(10, places);\n\n  return Math.round(num * scale) / scale;\n};\n\n/**\n * A SourceBuffer implementation for Flash rather than HTML.\n *\n * @link https://developer.mozilla.org/en-US/docs/Web/API/MediaSource\n * @param {Object} mediaSource the flash media source\n * @class FlashSourceBuffer\n * @extends videojs.EventTarget\n */\n\nvar FlashSourceBuffer = (function (_videojs$EventTarget) {\n  _inherits(FlashSourceBuffer, _videojs$EventTarget);\n\n  function FlashSourceBuffer(mediaSource) {\n    var _this = this;\n\n    _classCallCheck(this, FlashSourceBuffer);\n\n    _get(Object.getPrototypeOf(FlashSourceBuffer.prototype), 'constructor', this).call(this);\n    var encodedHeader = undefined;\n\n    // Start off using the globally defined value but refine\n    // as we append data into flash\n    this.chunkSize_ = _flashConstants2['default'].BYTES_PER_CHUNK;\n\n    // byte arrays queued to be appended\n    this.buffer_ = [];\n\n    // the total number of queued bytes\n    this.bufferSize_ = 0;\n\n    // to be able to determine the correct position to seek to, we\n    // need to retain information about the mapping between the\n    // media timeline and PTS values\n    this.basePtsOffset_ = NaN;\n\n    this.mediaSource = mediaSource;\n\n    // indicates whether the asynchronous continuation of an operation\n    // is still being processed\n    // see https://w3c.github.io/media-source/#widl-SourceBuffer-updating\n    this.updating = false;\n    this.timestampOffset_ = 0;\n\n    // TS to FLV transmuxer\n    this.segmentParser_ = new _muxJs2['default'].flv.Transmuxer();\n    this.segmentParser_.on('data', this.receiveBuffer_.bind(this));\n    encodedHeader = window.btoa(String.fromCharCode.apply(null, Array.prototype.slice.call(this.segmentParser_.getFlvHeader())));\n    this.mediaSource.swfObj.vjs_appendBuffer(encodedHeader);\n\n    Object.defineProperty(this, 'timestampOffset', {\n      get: function get() {\n        return this.timestampOffset_;\n      },\n      set: function set(val) {\n        if (typeof val === 'number' && val >= 0) {\n          this.timestampOffset_ = val;\n          this.segmentParser_ = new _muxJs2['default'].flv.Transmuxer();\n          this.segmentParser_.on('data', this.receiveBuffer_.bind(this));\n          // We have to tell flash to expect a discontinuity\n          this.mediaSource.swfObj.vjs_discontinuity();\n          // the media <-> PTS mapping must be re-established after\n          // the discontinuity\n          this.basePtsOffset_ = NaN;\n        }\n      }\n    });\n\n    Object.defineProperty(this, 'buffered', {\n      get: function get() {\n        if (!this.mediaSource || !this.mediaSource.swfObj || !('vjs_getProperty' in this.mediaSource.swfObj)) {\n          return _videoJs2['default'].createTimeRange();\n        }\n\n        var buffered = this.mediaSource.swfObj.vjs_getProperty('buffered');\n\n        if (buffered && buffered.length) {\n          buffered[0][0] = toDecimalPlaces(buffered[0][0], 3);\n          buffered[0][1] = toDecimalPlaces(buffered[0][1], 3);\n        }\n        return _videoJs2['default'].createTimeRanges(buffered);\n      }\n    });\n\n    // On a seek we remove all text track data since flash has no concept\n    // of a buffered-range and everything else is reset on seek\n    this.mediaSource.player_.on('seeked', function () {\n      (0, _removeCuesFromTrack2['default'])(0, Infinity, _this.metadataTrack_);\n      (0, _removeCuesFromTrack2['default'])(0, Infinity, _this.inbandTextTrack_);\n    });\n  }\n\n  /**\n   * Append bytes to the sourcebuffers buffer, in this case we\n   * have to append it to swf object.\n   *\n   * @link https://developer.mozilla.org/en-US/docs/Web/API/SourceBuffer/appendBuffer\n   * @param {Array} bytes\n   */\n\n  _createClass(FlashSourceBuffer, [{\n    key: 'appendBuffer',\n    value: function appendBuffer(bytes) {\n      var _this2 = this;\n\n      var error = undefined;\n      var chunk = 512 * 1024;\n      var i = 0;\n\n      if (this.updating) {\n        error = new Error('SourceBuffer.append() cannot be called ' + 'while an update is in progress');\n        error.name = 'InvalidStateError';\n        error.code = 11;\n        throw error;\n      }\n\n      this.updating = true;\n      this.mediaSource.readyState = 'open';\n      this.trigger({ type: 'update' });\n\n      // this is here to use recursion\n      var chunkInData = function chunkInData() {\n        _this2.segmentParser_.push(bytes.subarray(i, i + chunk));\n        i += chunk;\n        if (i < bytes.byteLength) {\n          scheduleTick(chunkInData);\n        } else {\n          scheduleTick(_this2.segmentParser_.flush.bind(_this2.segmentParser_));\n        }\n      };\n\n      chunkInData();\n    }\n\n    /**\n     * Reset the parser and remove any data queued to be sent to the SWF.\n     *\n     * @link https://developer.mozilla.org/en-US/docs/Web/API/SourceBuffer/abort\n     */\n  }, {\n    key: 'abort',\n    value: function abort() {\n      this.buffer_ = [];\n      this.bufferSize_ = 0;\n      this.mediaSource.swfObj.vjs_abort();\n\n      // report any outstanding updates have ended\n      if (this.updating) {\n        this.updating = false;\n        this.trigger({ type: 'updateend' });\n      }\n    }\n\n    /**\n     * Flash cannot remove ranges already buffered in the NetStream\n     * but seeking clears the buffer entirely. For most purposes,\n     * having this operation act as a no-op is acceptable.\n     *\n     * @link https://developer.mozilla.org/en-US/docs/Web/API/SourceBuffer/remove\n     * @param {Double} start start of the section to remove\n     * @param {Double} end end of the section to remove\n     */\n  }, {\n    key: 'remove',\n    value: function remove(start, end) {\n      (0, _removeCuesFromTrack2['default'])(start, end, this.metadataTrack_);\n      (0, _removeCuesFromTrack2['default'])(start, end, this.inbandTextTrack_);\n      this.trigger({ type: 'update' });\n      this.trigger({ type: 'updateend' });\n    }\n\n    /**\n     * Receive a buffer from the flv.\n     *\n     * @param {Object} segment\n     * @private\n     */\n  }, {\n    key: 'receiveBuffer_',\n    value: function receiveBuffer_(segment) {\n      var _this3 = this;\n\n      // create an in-band caption track if one is present in the segment\n      (0, _createTextTracksIfNecessary2['default'])(this, this.mediaSource, segment);\n      (0, _addTextTrackData2['default'])(this, segment.captions, segment.metadata);\n\n      // Do this asynchronously since convertTagsToData_ can be time consuming\n      scheduleTick(function () {\n        var flvBytes = _this3.convertTagsToData_(segment);\n\n        if (_this3.buffer_.length === 0) {\n          scheduleTick(_this3.processBuffer_.bind(_this3));\n        }\n\n        if (flvBytes) {\n          _this3.buffer_.push(flvBytes);\n          _this3.bufferSize_ += flvBytes.byteLength;\n        }\n      });\n    }\n\n    /**\n     * Append a portion of the current buffer to the SWF.\n     *\n     * @private\n     */\n  }, {\n    key: 'processBuffer_',\n    value: function processBuffer_() {\n      var chunk = undefined;\n      var i = undefined;\n      var length = undefined;\n      var binary = undefined;\n      var b64str = undefined;\n      var startByte = 0;\n      var appendIterations = 0;\n      var startTime = +new Date();\n      var appendTime = undefined;\n\n      if (!this.buffer_.length) {\n        if (this.updating !== false) {\n          this.updating = false;\n          this.trigger({ type: 'updateend' });\n        }\n        // do nothing if the buffer is empty\n        return;\n      }\n\n      do {\n        appendIterations++;\n        // concatenate appends up to the max append size\n        chunk = this.buffer_[0].subarray(startByte, startByte + this.chunkSize_);\n\n        // requeue any bytes that won't make it this round\n        if (chunk.byteLength < this.chunkSize_ || this.buffer_[0].byteLength === startByte + this.chunkSize_) {\n          startByte = 0;\n          this.buffer_.shift();\n        } else {\n          startByte += this.chunkSize_;\n        }\n\n        this.bufferSize_ -= chunk.byteLength;\n\n        // base64 encode the bytes\n        binary = '';\n        length = chunk.byteLength;\n        for (i = 0; i < length; i++) {\n          binary += String.fromCharCode(chunk[i]);\n        }\n        b64str = window.btoa(binary);\n\n        // bypass normal ExternalInterface calls and pass xml directly\n        // IE can be slow by default\n        this.mediaSource.swfObj.CallFunction('<invoke name=\"vjs_appendBuffer\"' + 'returntype=\"javascript\"><arguments><string>' + b64str + '</string></arguments></invoke>');\n        appendTime = new Date() - startTime;\n      } while (this.buffer_.length && appendTime < _flashConstants2['default'].TIME_PER_TICK);\n\n      if (this.buffer_.length && startByte) {\n        this.buffer_[0] = this.buffer_[0].subarray(startByte);\n      }\n\n      if (appendTime >= _flashConstants2['default'].TIME_PER_TICK) {\n        // We want to target 4 iterations per time-slot so that gives us\n        // room to adjust to changes in Flash load and other externalities\n        // such as garbage collection while still maximizing throughput\n        this.chunkSize_ = Math.floor(this.chunkSize_ * (appendIterations / 4));\n      }\n\n      // We also make sure that the chunk-size doesn't drop below 1KB or\n      // go above 1MB as a sanity check\n      this.chunkSize_ = Math.max(_flashConstants2['default'].MIN_CHUNK, Math.min(this.chunkSize_, _flashConstants2['default'].MAX_CHUNK));\n\n      // schedule another append if necessary\n      if (this.bufferSize_ !== 0) {\n        scheduleTick(this.processBuffer_.bind(this));\n      } else {\n        this.updating = false;\n        this.trigger({ type: 'updateend' });\n      }\n    }\n\n    /**\n     * Turns an array of flv tags into a Uint8Array representing the\n     * flv data. Also removes any tags that are before the current\n     * time so that playback begins at or slightly after the right\n     * place on a seek\n     *\n     * @private\n     * @param {Object} segmentData object of segment data\n     */\n  }, {\n    key: 'convertTagsToData_',\n    value: function convertTagsToData_(segmentData) {\n      var segmentByteLength = 0;\n      var tech = this.mediaSource.tech_;\n      var targetPts = 0;\n      var i = undefined;\n      var j = undefined;\n      var segment = undefined;\n      var filteredTags = [];\n      var tags = this.getOrderedTags_(segmentData);\n\n      // Establish the media timeline to PTS translation if we don't\n      // have one already\n      if (isNaN(this.basePtsOffset_) && tags.length) {\n        this.basePtsOffset_ = tags[0].pts;\n      }\n\n      // Trim any tags that are before the end of the end of\n      // the current buffer\n      if (tech.buffered().length) {\n        targetPts = tech.buffered().end(0) - this.timestampOffset;\n      }\n      // Trim to currentTime if it's ahead of buffered or buffered doesn't exist\n      targetPts = Math.max(targetPts, tech.currentTime() - this.timestampOffset);\n\n      // PTS values are represented in milliseconds\n      targetPts *= 1e3;\n      targetPts += this.basePtsOffset_;\n\n      // skip tags with a presentation time less than the seek target\n      for (i = 0; i < tags.length; i++) {\n        if (tags[i].pts >= targetPts) {\n          filteredTags.push(tags[i]);\n        }\n      }\n\n      if (filteredTags.length === 0) {\n        return;\n      }\n\n      // concatenate the bytes into a single segment\n      for (i = 0; i < filteredTags.length; i++) {\n        segmentByteLength += filteredTags[i].bytes.byteLength;\n      }\n      segment = new Uint8Array(segmentByteLength);\n      for (i = 0, j = 0; i < filteredTags.length; i++) {\n        segment.set(filteredTags[i].bytes, j);\n        j += filteredTags[i].bytes.byteLength;\n      }\n\n      return segment;\n    }\n\n    /**\n     * Assemble the FLV tags in decoder order.\n     *\n     * @private\n     * @param {Object} segmentData object of segment data\n     */\n  }, {\n    key: 'getOrderedTags_',\n    value: function getOrderedTags_(segmentData) {\n      var videoTags = segmentData.tags.videoTags;\n      var audioTags = segmentData.tags.audioTags;\n      var tag = undefined;\n      var tags = [];\n\n      while (videoTags.length || audioTags.length) {\n        if (!videoTags.length) {\n          // only audio tags remain\n          tag = audioTags.shift();\n        } else if (!audioTags.length) {\n          // only video tags remain\n          tag = videoTags.shift();\n        } else if (audioTags[0].dts < videoTags[0].dts) {\n          // audio should be decoded next\n          tag = audioTags.shift();\n        } else {\n          // video should be decoded next\n          tag = videoTags.shift();\n        }\n\n        tags.push(tag.finalize());\n      }\n\n      return tags;\n    }\n  }]);\n\n  return FlashSourceBuffer;\n})(_videoJs2['default'].EventTarget);\n\nexports['default'] = FlashSourceBuffer;\nmodule.exports = exports['default'];\n}).call(this,typeof global !== \"undefined\" ? global : typeof self !== \"undefined\" ? self : typeof window !== \"undefined\" ? window : {})\n},{\"./add-text-track-data\":25,\"./create-text-tracks-if-necessary\":27,\"./flash-constants\":28,\"./remove-cues-from-track\":32,\"mux.js\":43}],31:[function(require,module,exports){\n(function (global){\n/**\n * @file html-media-source.js\n */\n'use strict';\n\nObject.defineProperty(exports, '__esModule', {\n  value: true\n});\n\nvar _createClass = (function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ('value' in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; })();\n\nvar _get = function get(_x, _x2, _x3) { var _again = true; _function: while (_again) { var object = _x, property = _x2, receiver = _x3; _again = false; if (object === null) object = Function.prototype; var desc = Object.getOwnPropertyDescriptor(object, property); if (desc === undefined) { var parent = Object.getPrototypeOf(object); if (parent === null) { return undefined; } else { _x = parent; _x2 = property; _x3 = receiver; _again = true; desc = parent = undefined; continue _function; } } else if ('value' in desc) { return desc.value; } else { var getter = desc.get; if (getter === undefined) { return undefined; } return getter.call(receiver); } } };\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { 'default': obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError('Cannot call a class as a function'); } }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== 'function' && superClass !== null) { throw new TypeError('Super expression must either be null or a function, not ' + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\nvar _videoJs = (typeof window !== \"undefined\" ? window['videojs'] : typeof global !== \"undefined\" ? global['videojs'] : null);\n\nvar _videoJs2 = _interopRequireDefault(_videoJs);\n\nvar _virtualSourceBuffer = require('./virtual-source-buffer');\n\nvar _virtualSourceBuffer2 = _interopRequireDefault(_virtualSourceBuffer);\n\nvar _codecUtils = require('./codec-utils');\n\n/**\n * Replace the old apple-style `avc1.<dd>.<dd>` codec string with the standard\n * `avc1.<hhhhhh>`\n *\n * @param {Array} codecs an array of codec strings to fix\n * @return {Array} the translated codec array\n * @private\n */\nvar translateLegacyCodecs = function translateLegacyCodecs(codecs) {\n  return codecs.map(function (codec) {\n    return codec.replace(/avc1\\.(\\d+)\\.(\\d+)/i, function (orig, profile, avcLevel) {\n      var profileHex = ('00' + Number(profile).toString(16)).slice(-2);\n      var avcLevelHex = ('00' + Number(avcLevel).toString(16)).slice(-2);\n\n      return 'avc1.' + profileHex + '00' + avcLevelHex;\n    });\n  });\n};\n\n/**\n * Our MediaSource implementation in HTML, mimics native\n * MediaSource where/if possible.\n *\n * @link https://developer.mozilla.org/en-US/docs/Web/API/MediaSource\n * @class HtmlMediaSource\n * @extends videojs.EventTarget\n */\n\nvar HtmlMediaSource = (function (_videojs$EventTarget) {\n  _inherits(HtmlMediaSource, _videojs$EventTarget);\n\n  function HtmlMediaSource() {\n    var _this = this;\n\n    _classCallCheck(this, HtmlMediaSource);\n\n    _get(Object.getPrototypeOf(HtmlMediaSource.prototype), 'constructor', this).call(this);\n    var property = undefined;\n\n    this.nativeMediaSource_ = new window.MediaSource();\n    // delegate to the native MediaSource's methods by default\n    for (property in this.nativeMediaSource_) {\n      if (!(property in HtmlMediaSource.prototype) && typeof this.nativeMediaSource_[property] === 'function') {\n        this[property] = this.nativeMediaSource_[property].bind(this.nativeMediaSource_);\n      }\n    }\n\n    // emulate `duration` and `seekable` until seeking can be\n    // handled uniformly for live streams\n    // see https://github.com/w3c/media-source/issues/5\n    this.duration_ = NaN;\n    Object.defineProperty(this, 'duration', {\n      get: function get() {\n        if (this.duration_ === Infinity) {\n          return this.duration_;\n        }\n        return this.nativeMediaSource_.duration;\n      },\n      set: function set(duration) {\n        this.duration_ = duration;\n        if (duration !== Infinity) {\n          this.nativeMediaSource_.duration = duration;\n          return;\n        }\n      }\n    });\n    Object.defineProperty(this, 'seekable', {\n      get: function get() {\n        if (this.duration_ === Infinity) {\n          return _videoJs2['default'].createTimeRanges([[0, this.nativeMediaSource_.duration]]);\n        }\n        return this.nativeMediaSource_.seekable;\n      }\n    });\n\n    Object.defineProperty(this, 'readyState', {\n      get: function get() {\n        return this.nativeMediaSource_.readyState;\n      }\n    });\n\n    Object.defineProperty(this, 'activeSourceBuffers', {\n      get: function get() {\n        return this.activeSourceBuffers_;\n      }\n    });\n\n    // the list of virtual and native SourceBuffers created by this\n    // MediaSource\n    this.sourceBuffers = [];\n\n    this.activeSourceBuffers_ = [];\n\n    /**\n     * update the list of active source buffers based upon various\n     * imformation from HLS and video.js\n     *\n     * @private\n     */\n    this.updateActiveSourceBuffers_ = function () {\n      // Retain the reference but empty the array\n      _this.activeSourceBuffers_.length = 0;\n\n      // By default, the audio in the combined virtual source buffer is enabled\n      // and the audio-only source buffer (if it exists) is disabled.\n      var combined = false;\n      var audioOnly = true;\n\n      // TODO: maybe we can store the sourcebuffers on the track objects?\n      // safari may do something like this\n      for (var i = 0; i < _this.player_.audioTracks().length; i++) {\n        var track = _this.player_.audioTracks()[i];\n\n        if (track.enabled && track.kind !== 'main') {\n          // The enabled track is an alternate audio track so disable the audio in\n          // the combined source buffer and enable the audio-only source buffer.\n          combined = true;\n          audioOnly = false;\n          break;\n        }\n      }\n\n      // Since we currently support a max of two source buffers, add all of the source\n      // buffers (in order).\n      _this.sourceBuffers.forEach(function (sourceBuffer) {\n        /* eslinst-disable */\n        // TODO once codecs are required, we can switch to using the codecs to determine\n        //      what stream is the video stream, rather than relying on videoTracks\n        /* eslinst-enable */\n\n        if (sourceBuffer.videoCodec_ && sourceBuffer.audioCodec_) {\n          // combined\n          sourceBuffer.audioDisabled_ = combined;\n        } else if (sourceBuffer.videoCodec_ && !sourceBuffer.audioCodec_) {\n          // If the \"combined\" source buffer is video only, then we do not want\n          // disable the audio-only source buffer (this is mostly for demuxed\n          // audio and video hls)\n          sourceBuffer.audioDisabled_ = true;\n          audioOnly = false;\n        } else if (!sourceBuffer.videoCodec_ && sourceBuffer.audioCodec_) {\n          // audio only\n          sourceBuffer.audioDisabled_ = audioOnly;\n          if (audioOnly) {\n            return;\n          }\n        }\n\n        _this.activeSourceBuffers_.push(sourceBuffer);\n      });\n    };\n\n    // Re-emit MediaSource events on the polyfill\n    ['sourceopen', 'sourceclose', 'sourceended'].forEach(function (eventName) {\n      this.nativeMediaSource_.addEventListener(eventName, this.trigger.bind(this));\n    }, this);\n\n    // capture the associated player when the MediaSource is\n    // successfully attached\n    this.on('sourceopen', function (event) {\n      // Get the player this MediaSource is attached to\n      var video = document.querySelector('[src=\"' + _this.url_ + '\"]');\n\n      if (!video) {\n        return;\n      }\n\n      _this.player_ = (0, _videoJs2['default'])(video.parentNode);\n\n      if (_this.player_.audioTracks && _this.player_.audioTracks()) {\n        _this.player_.audioTracks().on('change', _this.updateActiveSourceBuffers_);\n        _this.player_.audioTracks().on('addtrack', _this.updateActiveSourceBuffers_);\n        _this.player_.audioTracks().on('removetrack', _this.updateActiveSourceBuffers_);\n      }\n    });\n\n    // explicitly terminate any WebWorkers that were created\n    // by SourceHandlers\n    this.on('sourceclose', function (event) {\n      this.sourceBuffers.forEach(function (sourceBuffer) {\n        if (sourceBuffer.transmuxer_) {\n          sourceBuffer.transmuxer_.terminate();\n        }\n      });\n      this.sourceBuffers.length = 0;\n      if (!this.player_) {\n        return;\n      }\n\n      if (this.player_.audioTracks && this.player_.audioTracks()) {\n        this.player_.audioTracks().off('change', this.updateActiveSourceBuffers_);\n        this.player_.audioTracks().off('addtrack', this.updateActiveSourceBuffers_);\n        this.player_.audioTracks().off('removetrack', this.updateActiveSourceBuffers_);\n      }\n    });\n  }\n\n  /**\n   * Add a range that that can now be seeked to.\n   *\n   * @param {Double} start where to start the addition\n   * @param {Double} end where to end the addition\n   * @private\n   */\n\n  _createClass(HtmlMediaSource, [{\n    key: 'addSeekableRange_',\n    value: function addSeekableRange_(start, end) {\n      var error = undefined;\n\n      if (this.duration !== Infinity) {\n        error = new Error('MediaSource.addSeekableRange() can only be invoked ' + 'when the duration is Infinity');\n        error.name = 'InvalidStateError';\n        error.code = 11;\n        throw error;\n      }\n\n      if (end > this.nativeMediaSource_.duration || isNaN(this.nativeMediaSource_.duration)) {\n        this.nativeMediaSource_.duration = end;\n      }\n    }\n\n    /**\n     * Add a source buffer to the media source.\n     *\n     * @link https://developer.mozilla.org/en-US/docs/Web/API/MediaSource/addSourceBuffer\n     * @param {String} type the content-type of the content\n     * @return {Object} the created source buffer\n     */\n  }, {\n    key: 'addSourceBuffer',\n    value: function addSourceBuffer(type) {\n      var buffer = undefined;\n      var parsedType = (0, _codecUtils.parseContentType)(type);\n\n      // Create a VirtualSourceBuffer to transmux MPEG-2 transport\n      // stream segments into fragmented MP4s\n      if (parsedType.type === 'video/mp2t') {\n        var codecs = [];\n\n        if (parsedType.parameters && parsedType.parameters.codecs) {\n          codecs = parsedType.parameters.codecs.split(',');\n          codecs = translateLegacyCodecs(codecs);\n          codecs = codecs.filter(function (codec) {\n            return (0, _codecUtils.isAudioCodec)(codec) || (0, _codecUtils.isVideoCodec)(codec);\n          });\n        }\n\n        if (codecs.length === 0) {\n          codecs = ['avc1.4d400d', 'mp4a.40.2'];\n        }\n\n        buffer = new _virtualSourceBuffer2['default'](this, codecs);\n\n        if (this.sourceBuffers.length !== 0) {\n          // If another VirtualSourceBuffer already exists, then we are creating a\n          // SourceBuffer for an alternate audio track and therefore we know that\n          // the source has both an audio and video track.\n          // That means we should trigger the manual creation of the real\n          // SourceBuffers instead of waiting for the transmuxer to return data\n          this.sourceBuffers[0].createRealSourceBuffers_();\n          buffer.createRealSourceBuffers_();\n\n          // Automatically disable the audio on the first source buffer if\n          // a second source buffer is ever created\n          this.sourceBuffers[0].audioDisabled_ = true;\n        }\n      } else {\n        // delegate to the native implementation\n        buffer = this.nativeMediaSource_.addSourceBuffer(type);\n      }\n\n      this.sourceBuffers.push(buffer);\n      return buffer;\n    }\n  }]);\n\n  return HtmlMediaSource;\n})(_videoJs2['default'].EventTarget);\n\nexports['default'] = HtmlMediaSource;\nmodule.exports = exports['default'];\n}).call(this,typeof global !== \"undefined\" ? global : typeof self !== \"undefined\" ? self : typeof window !== \"undefined\" ? window : {})\n},{\"./codec-utils\":26,\"./virtual-source-buffer\":35}],32:[function(require,module,exports){\n/**\n * @file remove-cues-from-track.js\n */\n\n/**\n * Remove cues from a track on video.js.\n *\n * @param {Double} start start of where we should remove the cue\n * @param {Double} end end of where the we should remove the cue\n * @param {Object} track the text track to remove the cues from\n * @private\n */\n\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nvar removeCuesFromTrack = function removeCuesFromTrack(start, end, track) {\n  var i = undefined;\n  var cue = undefined;\n\n  if (!track) {\n    return;\n  }\n\n  i = track.cues.length;\n\n  while (i--) {\n    cue = track.cues[i];\n\n    // Remove any overlapping cue\n    if (cue.startTime <= end && cue.endTime >= start) {\n      track.removeCue(cue);\n    }\n  }\n};\n\nexports[\"default\"] = removeCuesFromTrack;\nmodule.exports = exports[\"default\"];\n},{}],33:[function(require,module,exports){\n/**\n * @file transmuxer-worker.js\n */\n\n/**\n * videojs-contrib-media-sources\n *\n * Copyright (c) 2015 Brightcove\n * All rights reserved.\n *\n * Handles communication between the browser-world and the mux.js\n * transmuxer running inside of a WebWorker by exposing a simple\n * message-based interface to a Transmuxer object.\n */\n'use strict';\n\nObject.defineProperty(exports, '__esModule', {\n  value: true\n});\n\nvar _createClass = (function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ('value' in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; })();\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { 'default': obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError('Cannot call a class as a function'); } }\n\nvar _muxJs = require('mux.js');\n\nvar _muxJs2 = _interopRequireDefault(_muxJs);\n\n/**\n * Re-emits tranmsuxer events by converting them into messages to the\n * world outside the worker.\n *\n * @param {Object} transmuxer the transmuxer to wire events on\n * @private\n */\nvar wireTransmuxerEvents = function wireTransmuxerEvents(transmuxer) {\n  transmuxer.on('data', function (segment) {\n    // transfer ownership of the underlying ArrayBuffer\n    // instead of doing a copy to save memory\n    // ArrayBuffers are transferable but generic TypedArrays are not\n    // @link https://developer.mozilla.org/en-US/docs/Web/API/Web_Workers_API/Using_web_workers#Passing_data_by_transferring_ownership_(transferable_objects)\n    var typedArray = segment.data;\n\n    segment.data = typedArray.buffer;\n    postMessage({\n      action: 'data',\n      segment: segment,\n      byteOffset: typedArray.byteOffset,\n      byteLength: typedArray.byteLength\n    }, [segment.data]);\n  });\n\n  if (transmuxer.captionStream) {\n    transmuxer.captionStream.on('data', function (caption) {\n      postMessage({\n        action: 'caption',\n        data: caption\n      });\n    });\n  }\n\n  transmuxer.on('done', function (data) {\n    postMessage({ action: 'done' });\n  });\n};\n\n/**\n * All incoming messages route through this hash. If no function exists\n * to handle an incoming message, then we ignore the message.\n *\n * @class MessageHandlers\n * @param {Object} options the options to initialize with\n */\n\nvar MessageHandlers = (function () {\n  function MessageHandlers(options) {\n    _classCallCheck(this, MessageHandlers);\n\n    this.options = options || {};\n    this.init();\n  }\n\n  /**\n   * Our web wroker interface so that things can talk to mux.js\n   * that will be running in a web worker. the scope is passed to this by\n   * webworkify.\n   *\n   * @param {Object} self the scope for the web worker\n   */\n\n  /**\n   * initialize our web worker and wire all the events.\n   */\n\n  _createClass(MessageHandlers, [{\n    key: 'init',\n    value: function init() {\n      if (this.transmuxer) {\n        this.transmuxer.dispose();\n      }\n      this.transmuxer = new _muxJs2['default'].mp4.Transmuxer(this.options);\n      wireTransmuxerEvents(this.transmuxer);\n    }\n\n    /**\n     * Adds data (a ts segment) to the start of the transmuxer pipeline for\n     * processing.\n     *\n     * @param {ArrayBuffer} data data to push into the muxer\n     */\n  }, {\n    key: 'push',\n    value: function push(data) {\n      // Cast array buffer to correct type for transmuxer\n      var segment = new Uint8Array(data.data, data.byteOffset, data.byteLength);\n\n      this.transmuxer.push(segment);\n    }\n\n    /**\n     * Recreate the transmuxer so that the next segment added via `push`\n     * start with a fresh transmuxer.\n     */\n  }, {\n    key: 'reset',\n    value: function reset() {\n      this.init();\n    }\n\n    /**\n     * Set the value that will be used as the `baseMediaDecodeTime` time for the\n     * next segment pushed in. Subsequent segments will have their `baseMediaDecodeTime`\n     * set relative to the first based on the PTS values.\n     *\n     * @param {Object} data used to set the timestamp offset in the muxer\n     */\n  }, {\n    key: 'setTimestampOffset',\n    value: function setTimestampOffset(data) {\n      var timestampOffset = data.timestampOffset || 0;\n\n      this.transmuxer.setBaseMediaDecodeTime(Math.round(timestampOffset * 90000));\n    }\n\n    /**\n     * Forces the pipeline to finish processing the last segment and emit it's\n     * results.\n     *\n     * @param {Object} data event data, not really used\n     */\n  }, {\n    key: 'flush',\n    value: function flush(data) {\n      this.transmuxer.flush();\n    }\n  }]);\n\n  return MessageHandlers;\n})();\n\nvar Worker = function Worker(self) {\n  self.onmessage = function (event) {\n    if (event.data.action === 'init' && event.data.options) {\n      this.messageHandlers = new MessageHandlers(event.data.options);\n      return;\n    }\n\n    if (!this.messageHandlers) {\n      this.messageHandlers = new MessageHandlers();\n    }\n\n    if (event.data && event.data.action && event.data.action !== 'init') {\n      if (this.messageHandlers[event.data.action]) {\n        this.messageHandlers[event.data.action](event.data);\n      }\n    }\n  };\n};\n\nexports['default'] = function (self) {\n  return new Worker(self);\n};\n\nmodule.exports = exports['default'];\n},{\"mux.js\":43}],34:[function(require,module,exports){\n(function (global){\n/**\n * @file videojs-contrib-media-sources.js\n */\n'use strict';\n\nObject.defineProperty(exports, '__esModule', {\n  value: true\n});\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { 'default': obj }; }\n\nvar _flashMediaSource = require('./flash-media-source');\n\nvar _flashMediaSource2 = _interopRequireDefault(_flashMediaSource);\n\nvar _htmlMediaSource = require('./html-media-source');\n\nvar _htmlMediaSource2 = _interopRequireDefault(_htmlMediaSource);\n\nvar _videoJs = (typeof window !== \"undefined\" ? window['videojs'] : typeof global !== \"undefined\" ? global['videojs'] : null);\n\nvar _videoJs2 = _interopRequireDefault(_videoJs);\n\nvar urlCount = 0;\n\n// ------------\n// Media Source\n// ------------\n\nvar defaults = {\n  // how to determine the MediaSource implementation to use. There\n  // are three available modes:\n  // - auto: use native MediaSources where available and Flash\n  //   everywhere else\n  // - html5: always use native MediaSources\n  // - flash: always use the Flash MediaSource polyfill\n  mode: 'auto'\n};\n\n// store references to the media sources so they can be connected\n// to a video element (a swf object)\n// TODO: can we store this somewhere local to this module?\n_videoJs2['default'].mediaSources = {};\n\n/**\n * Provide a method for a swf object to notify JS that a\n * media source is now open.\n *\n * @param {String} msObjectURL string referencing the MSE Object URL\n * @param {String} swfId the swf id\n */\nvar open = function open(msObjectURL, swfId) {\n  var mediaSource = _videoJs2['default'].mediaSources[msObjectURL];\n\n  if (mediaSource) {\n    mediaSource.trigger({ type: 'sourceopen', swfId: swfId });\n  } else {\n    throw new Error('Media Source not found (Video.js)');\n  }\n};\n\n/**\n * Check to see if the native MediaSource object exists and supports\n * an MP4 container with both H.264 video and AAC-LC audio.\n *\n * @return {Boolean} if  native media sources are supported\n */\nvar supportsNativeMediaSources = function supportsNativeMediaSources() {\n  return !!window.MediaSource && !!window.MediaSource.isTypeSupported && window.MediaSource.isTypeSupported('video/mp4;codecs=\"avc1.4d400d,mp4a.40.2\"');\n};\n\n/**\n * An emulation of the MediaSource API so that we can support\n * native and non-native functionality such as flash and\n * video/mp2t videos. returns an instance of HtmlMediaSource or\n * FlashMediaSource depending on what is supported and what options\n * are passed in.\n *\n * @link https://developer.mozilla.org/en-US/docs/Web/API/MediaSource/MediaSource\n * @param {Object} options options to use during setup.\n */\nvar MediaSource = function MediaSource(options) {\n  var settings = _videoJs2['default'].mergeOptions(defaults, options);\n\n  this.MediaSource = {\n    open: open,\n    supportsNativeMediaSources: supportsNativeMediaSources\n  };\n\n  // determine whether HTML MediaSources should be used\n  if (settings.mode === 'html5' || settings.mode === 'auto' && supportsNativeMediaSources()) {\n    return new _htmlMediaSource2['default']();\n  }\n\n  // otherwise, emulate them through the SWF\n  return new _flashMediaSource2['default']();\n};\n\nexports.MediaSource = MediaSource;\nMediaSource.open = open;\nMediaSource.supportsNativeMediaSources = supportsNativeMediaSources;\n\n/**\n * A wrapper around the native URL for our MSE object\n * implementation, this object is exposed under videojs.URL\n *\n * @link https://developer.mozilla.org/en-US/docs/Web/API/URL/URL\n */\nvar URL = {\n  /**\n   * A wrapper around the native createObjectURL for our objects.\n   * This function maps a native or emulated mediaSource to a blob\n   * url so that it can be loaded into video.js\n   *\n   * @link https://developer.mozilla.org/en-US/docs/Web/API/URL/createObjectURL\n   * @param {MediaSource} object the object to create a blob url to\n   */\n  createObjectURL: function createObjectURL(object) {\n    var objectUrlPrefix = 'blob:vjs-media-source/';\n    var url = undefined;\n\n    // use the native MediaSource to generate an object URL\n    if (object instanceof _htmlMediaSource2['default']) {\n      url = window.URL.createObjectURL(object.nativeMediaSource_);\n      object.url_ = url;\n      return url;\n    }\n    // if the object isn't an emulated MediaSource, delegate to the\n    // native implementation\n    if (!(object instanceof _flashMediaSource2['default'])) {\n      url = window.URL.createObjectURL(object);\n      object.url_ = url;\n      return url;\n    }\n\n    // build a URL that can be used to map back to the emulated\n    // MediaSource\n    url = objectUrlPrefix + urlCount;\n\n    urlCount++;\n\n    // setup the mapping back to object\n    _videoJs2['default'].mediaSources[url] = object;\n\n    return url;\n  }\n};\n\nexports.URL = URL;\n_videoJs2['default'].MediaSource = MediaSource;\n_videoJs2['default'].URL = URL;\n}).call(this,typeof global !== \"undefined\" ? global : typeof self !== \"undefined\" ? self : typeof window !== \"undefined\" ? window : {})\n},{\"./flash-media-source\":29,\"./html-media-source\":31}],35:[function(require,module,exports){\n(function (global){\n/**\n * @file virtual-source-buffer.js\n */\n'use strict';\n\nObject.defineProperty(exports, '__esModule', {\n  value: true\n});\n\nvar _createClass = (function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ('value' in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; })();\n\nvar _get = function get(_x, _x2, _x3) { var _again = true; _function: while (_again) { var object = _x, property = _x2, receiver = _x3; _again = false; if (object === null) object = Function.prototype; var desc = Object.getOwnPropertyDescriptor(object, property); if (desc === undefined) { var parent = Object.getPrototypeOf(object); if (parent === null) { return undefined; } else { _x = parent; _x2 = property; _x3 = receiver; _again = true; desc = parent = undefined; continue _function; } } else if ('value' in desc) { return desc.value; } else { var getter = desc.get; if (getter === undefined) { return undefined; } return getter.call(receiver); } } };\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { 'default': obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError('Cannot call a class as a function'); } }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== 'function' && superClass !== null) { throw new TypeError('Super expression must either be null or a function, not ' + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\nvar _videoJs = (typeof window !== \"undefined\" ? window['videojs'] : typeof global !== \"undefined\" ? global['videojs'] : null);\n\nvar _videoJs2 = _interopRequireDefault(_videoJs);\n\nvar _createTextTracksIfNecessary = require('./create-text-tracks-if-necessary');\n\nvar _createTextTracksIfNecessary2 = _interopRequireDefault(_createTextTracksIfNecessary);\n\nvar _removeCuesFromTrack = require('./remove-cues-from-track');\n\nvar _removeCuesFromTrack2 = _interopRequireDefault(_removeCuesFromTrack);\n\nvar _addTextTrackData = require('./add-text-track-data');\n\nvar _addTextTrackData2 = _interopRequireDefault(_addTextTrackData);\n\nvar _webworkify = require('webworkify');\n\nvar _webworkify2 = _interopRequireDefault(_webworkify);\n\nvar _transmuxerWorker = require('./transmuxer-worker');\n\nvar _transmuxerWorker2 = _interopRequireDefault(_transmuxerWorker);\n\nvar _codecUtils = require('./codec-utils');\n\n/**\n * VirtualSourceBuffers exist so that we can transmux non native formats\n * into a native format, but keep the same api as a native source buffer.\n * It creates a transmuxer, that works in its own thread (a web worker) and\n * that transmuxer muxes the data into a native format. VirtualSourceBuffer will\n * then send all of that data to the naive sourcebuffer so that it is\n * indestinguishable from a natively supported format.\n *\n * @param {HtmlMediaSource} mediaSource the parent mediaSource\n * @param {Array} codecs array of codecs that we will be dealing with\n * @class VirtualSourceBuffer\n * @extends video.js.EventTarget\n */\n\nvar VirtualSourceBuffer = (function (_videojs$EventTarget) {\n  _inherits(VirtualSourceBuffer, _videojs$EventTarget);\n\n  function VirtualSourceBuffer(mediaSource, codecs) {\n    var _this = this;\n\n    _classCallCheck(this, VirtualSourceBuffer);\n\n    _get(Object.getPrototypeOf(VirtualSourceBuffer.prototype), 'constructor', this).call(this, _videoJs2['default'].EventTarget);\n    this.timestampOffset_ = 0;\n    this.pendingBuffers_ = [];\n    this.bufferUpdating_ = false;\n    this.mediaSource_ = mediaSource;\n    this.codecs_ = codecs;\n    this.audioCodec_ = null;\n    this.videoCodec_ = null;\n    this.audioDisabled_ = false;\n\n    var options = {\n      remux: false\n    };\n\n    this.codecs_.forEach(function (codec) {\n      if ((0, _codecUtils.isAudioCodec)(codec)) {\n        _this.audioCodec_ = codec;\n      } else if ((0, _codecUtils.isVideoCodec)(codec)) {\n        _this.videoCodec_ = codec;\n      }\n    });\n\n    // append muxed segments to their respective native buffers as\n    // soon as they are available\n    this.transmuxer_ = (0, _webworkify2['default'])(_transmuxerWorker2['default']);\n    this.transmuxer_.postMessage({ action: 'init', options: options });\n\n    this.transmuxer_.onmessage = function (event) {\n      if (event.data.action === 'data') {\n        return _this.data_(event);\n      }\n\n      if (event.data.action === 'done') {\n        return _this.done_(event);\n      }\n    };\n\n    // this timestampOffset is a property with the side-effect of resetting\n    // baseMediaDecodeTime in the transmuxer on the setter\n    Object.defineProperty(this, 'timestampOffset', {\n      get: function get() {\n        return this.timestampOffset_;\n      },\n      set: function set(val) {\n        if (typeof val === 'number' && val >= 0) {\n          this.timestampOffset_ = val;\n\n          // We have to tell the transmuxer to set the baseMediaDecodeTime to\n          // the desired timestampOffset for the next segment\n          this.transmuxer_.postMessage({\n            action: 'setTimestampOffset',\n            timestampOffset: val\n          });\n        }\n      }\n    });\n\n    // setting the append window affects both source buffers\n    Object.defineProperty(this, 'appendWindowStart', {\n      get: function get() {\n        return (this.videoBuffer_ || this.audioBuffer_).appendWindowStart;\n      },\n      set: function set(start) {\n        if (this.videoBuffer_) {\n          this.videoBuffer_.appendWindowStart = start;\n        }\n        if (this.audioBuffer_) {\n          this.audioBuffer_.appendWindowStart = start;\n        }\n      }\n    });\n\n    // this buffer is \"updating\" if either of its native buffers are\n    Object.defineProperty(this, 'updating', {\n      get: function get() {\n        return !!(this.bufferUpdating_ || !this.audioDisabled_ && this.audioBuffer_ && this.audioBuffer_.updating || this.videoBuffer_ && this.videoBuffer_.updating);\n      }\n    });\n\n    // the buffered property is the intersection of the buffered\n    // ranges of the native source buffers\n    Object.defineProperty(this, 'buffered', {\n      get: function get() {\n        var start = null;\n        var end = null;\n        var arity = 0;\n        var extents = [];\n        var ranges = [];\n\n        if (!this.videoBuffer_ && (this.audioDisabled_ || !this.audioBuffer_)) {\n          return _videoJs2['default'].createTimeRange();\n        }\n\n        // Handle the case where we only have one buffer\n        if (!this.videoBuffer_) {\n          return this.audioBuffer_.buffered;\n        } else if (this.audioDisabled_ || !this.audioBuffer_) {\n          return this.videoBuffer_.buffered;\n        }\n\n        // Handle the case where there is no buffer data\n        if ((!this.videoBuffer_ || this.videoBuffer_.buffered.length === 0) && (!this.audioBuffer_ || this.audioBuffer_.buffered.length === 0)) {\n          return _videoJs2['default'].createTimeRange();\n        }\n\n        // Handle the case where we have both buffers and create an\n        // intersection of the two\n        var videoBuffered = this.videoBuffer_.buffered;\n        var audioBuffered = this.audioBuffer_.buffered;\n        var count = videoBuffered.length;\n\n        // A) Gather up all start and end times\n        while (count--) {\n          extents.push({ time: videoBuffered.start(count), type: 'start' });\n          extents.push({ time: videoBuffered.end(count), type: 'end' });\n        }\n        count = audioBuffered.length;\n        while (count--) {\n          extents.push({ time: audioBuffered.start(count), type: 'start' });\n          extents.push({ time: audioBuffered.end(count), type: 'end' });\n        }\n        // B) Sort them by time\n        extents.sort(function (a, b) {\n          return a.time - b.time;\n        });\n\n        // C) Go along one by one incrementing arity for start and decrementing\n        //    arity for ends\n        for (count = 0; count < extents.length; count++) {\n          if (extents[count].type === 'start') {\n            arity++;\n\n            // D) If arity is ever incremented to 2 we are entering an\n            //    overlapping range\n            if (arity === 2) {\n              start = extents[count].time;\n            }\n          } else if (extents[count].type === 'end') {\n            arity--;\n\n            // E) If arity is ever decremented to 1 we leaving an\n            //    overlapping range\n            if (arity === 1) {\n              end = extents[count].time;\n            }\n          }\n\n          // F) Record overlapping ranges\n          if (start !== null && end !== null) {\n            ranges.push([start, end]);\n            start = null;\n            end = null;\n          }\n        }\n\n        return _videoJs2['default'].createTimeRanges(ranges);\n      }\n    });\n  }\n\n  /**\n   * When we get a data event from the transmuxer\n   * we call this function and handle the data that\n   * was sent to us\n   *\n   * @private\n   * @param {Event} event the data event from the transmuxer\n   */\n\n  _createClass(VirtualSourceBuffer, [{\n    key: 'data_',\n    value: function data_(event) {\n      var segment = event.data.segment;\n\n      // Cast ArrayBuffer to TypedArray\n      segment.data = new Uint8Array(segment.data, event.data.byteOffset, event.data.byteLength);\n\n      (0, _createTextTracksIfNecessary2['default'])(this, this.mediaSource_, segment);\n\n      // Add the segments to the pendingBuffers array\n      this.pendingBuffers_.push(segment);\n      return;\n    }\n\n    /**\n     * When we get a done event from the transmuxer\n     * we call this function and we process all\n     * of the pending data that we have been saving in the\n     * data_ function\n     *\n     * @private\n     * @param {Event} event the done event from the transmuxer\n     */\n  }, {\n    key: 'done_',\n    value: function done_(event) {\n      // All buffers should have been flushed from the muxer\n      // start processing anything we have received\n      this.processPendingSegments_();\n      return;\n    }\n\n    /**\n     * Create our internal native audio/video source buffers and add\n     * event handlers to them with the following conditions:\n     * 1. they do not already exist on the mediaSource\n     * 2. this VSB has a codec for them\n     *\n     * @private\n     */\n  }, {\n    key: 'createRealSourceBuffers_',\n    value: function createRealSourceBuffers_() {\n      var _this2 = this;\n\n      var types = ['audio', 'video'];\n\n      types.forEach(function (type) {\n        // Don't create a SourceBuffer of this type if we don't have a\n        // codec for it\n        if (!_this2[type + 'Codec_']) {\n          return;\n        }\n\n        // Do nothing if a SourceBuffer of this type already exists\n        if (_this2[type + 'Buffer_']) {\n          return;\n        }\n\n        var buffer = null;\n\n        // If the mediasource already has a SourceBuffer for the codec\n        // use that\n        if (_this2.mediaSource_[type + 'Buffer_']) {\n          buffer = _this2.mediaSource_[type + 'Buffer_'];\n        } else {\n          buffer = _this2.mediaSource_.nativeMediaSource_.addSourceBuffer(type + '/mp4;codecs=\"' + _this2[type + 'Codec_'] + '\"');\n          _this2.mediaSource_[type + 'Buffer_'] = buffer;\n        }\n\n        _this2[type + 'Buffer_'] = buffer;\n\n        // Wire up the events to the SourceBuffer\n        ['update', 'updatestart', 'updateend'].forEach(function (event) {\n          buffer.addEventListener(event, function () {\n            // if audio is disabled\n            if (type === 'audio' && _this2.audioDisabled_) {\n              return;\n            }\n\n            var shouldTrigger = types.every(function (t) {\n              // skip checking audio's updating status if audio\n              // is not enabled\n              if (t === 'audio' && _this2.audioDisabled_) {\n                return true;\n              }\n              // if the other type if updating we don't trigger\n              if (type !== t && _this2[t + 'Buffer_'] && _this2[t + 'Buffer_'].updating) {\n                return false;\n              }\n              return true;\n            });\n\n            if (shouldTrigger) {\n              return _this2.trigger(event);\n            }\n          });\n        });\n      });\n    }\n\n    /**\n     * Emulate the native mediasource function, but our function will\n     * send all of the proposed segments to the transmuxer so that we\n     * can transmux them before we append them to our internal\n     * native source buffers in the correct format.\n     *\n     * @link https://developer.mozilla.org/en-US/docs/Web/API/SourceBuffer/appendBuffer\n     * @param {Uint8Array} segment the segment to append to the buffer\n     */\n  }, {\n    key: 'appendBuffer',\n    value: function appendBuffer(segment) {\n      // Start the internal \"updating\" state\n      this.bufferUpdating_ = true;\n\n      this.transmuxer_.postMessage({\n        action: 'push',\n        // Send the typed-array of data as an ArrayBuffer so that\n        // it can be sent as a \"Transferable\" and avoid the costly\n        // memory copy\n        data: segment.buffer,\n\n        // To recreate the original typed-array, we need information\n        // about what portion of the ArrayBuffer it was a view into\n        byteOffset: segment.byteOffset,\n        byteLength: segment.byteLength\n      }, [segment.buffer]);\n      this.transmuxer_.postMessage({ action: 'flush' });\n    }\n\n    /**\n     * Emulate the native mediasource function and remove parts\n     * of the buffer from any of our internal buffers that exist\n     *\n     * @link https://developer.mozilla.org/en-US/docs/Web/API/SourceBuffer/remove\n     * @param {Double} start position to start the remove at\n     * @param {Double} end position to end the remove at\n     */\n  }, {\n    key: 'remove',\n    value: function remove(start, end) {\n      if (this.videoBuffer_) {\n        this.videoBuffer_.remove(start, end);\n      }\n      if (!this.audioDisabled_ && this.audioBuffer_) {\n        this.audioBuffer_.remove(start, end);\n      }\n\n      // Remove Metadata Cues (id3)\n      (0, _removeCuesFromTrack2['default'])(start, end, this.metadataTrack_);\n\n      // Remove Any Captions\n      (0, _removeCuesFromTrack2['default'])(start, end, this.inbandTextTrack_);\n    }\n\n    /**\n     * Process any segments that the muxer has output\n     * Concatenate segments together based on type and append them into\n     * their respective sourceBuffers\n     *\n     * @private\n     */\n  }, {\n    key: 'processPendingSegments_',\n    value: function processPendingSegments_() {\n      var sortedSegments = {\n        video: {\n          segments: [],\n          bytes: 0\n        },\n        audio: {\n          segments: [],\n          bytes: 0\n        },\n        captions: [],\n        metadata: []\n      };\n\n      // Sort segments into separate video/audio arrays and\n      // keep track of their total byte lengths\n      sortedSegments = this.pendingBuffers_.reduce(function (segmentObj, segment) {\n        var type = segment.type;\n        var data = segment.data;\n\n        segmentObj[type].segments.push(data);\n        segmentObj[type].bytes += data.byteLength;\n\n        // Gather any captions into a single array\n        if (segment.captions) {\n          segmentObj.captions = segmentObj.captions.concat(segment.captions);\n        }\n\n        if (segment.info) {\n          segmentObj[type].info = segment.info;\n        }\n\n        // Gather any metadata into a single array\n        if (segment.metadata) {\n          segmentObj.metadata = segmentObj.metadata.concat(segment.metadata);\n        }\n\n        return segmentObj;\n      }, sortedSegments);\n\n      // Create the real source buffers if they don't exist by now since we\n      // finally are sure what tracks are contained in the source\n      if (!this.videoBuffer_ && !this.audioBuffer_) {\n        // Remove any codecs that may have been specified by default but\n        // are no longer applicable now\n        if (sortedSegments.video.bytes === 0) {\n          this.videoCodec_ = null;\n        }\n        if (sortedSegments.audio.bytes === 0) {\n          this.audioCodec_ = null;\n        }\n\n        this.createRealSourceBuffers_();\n      }\n\n      if (sortedSegments.audio.info) {\n        this.mediaSource_.trigger({ type: 'audioinfo', info: sortedSegments.audio.info });\n      }\n      if (sortedSegments.video.info) {\n        this.mediaSource_.trigger({ type: 'videoinfo', info: sortedSegments.video.info });\n      }\n\n      // Merge multiple video and audio segments into one and append\n      if (this.videoBuffer_) {\n        this.concatAndAppendSegments_(sortedSegments.video, this.videoBuffer_);\n        // TODO: are video tracks the only ones with text tracks?\n        (0, _addTextTrackData2['default'])(this, sortedSegments.captions, sortedSegments.metadata);\n      }\n      if (!this.audioDisabled_ && this.audioBuffer_) {\n        this.concatAndAppendSegments_(sortedSegments.audio, this.audioBuffer_);\n      }\n\n      this.pendingBuffers_.length = 0;\n\n      // We are no longer in the internal \"updating\" state\n      this.bufferUpdating_ = false;\n    }\n\n    /**\n     * Combine all segments into a single Uint8Array and then append them\n     * to the destination buffer\n     *\n     * @param {Object} segmentObj\n     * @param {SourceBuffer} destinationBuffer native source buffer to append data to\n     * @private\n     */\n  }, {\n    key: 'concatAndAppendSegments_',\n    value: function concatAndAppendSegments_(segmentObj, destinationBuffer) {\n      var offset = 0;\n      var tempBuffer = undefined;\n\n      if (segmentObj.bytes) {\n        tempBuffer = new Uint8Array(segmentObj.bytes);\n\n        // Combine the individual segments into one large typed-array\n        segmentObj.segments.forEach(function (segment) {\n          tempBuffer.set(segment, offset);\n          offset += segment.byteLength;\n        });\n\n        destinationBuffer.appendBuffer(tempBuffer);\n      }\n    }\n\n    /**\n     * Emulate the native mediasource function. abort any soureBuffer\n     * actions and throw out any un-appended data.\n     *\n     * @link https://developer.mozilla.org/en-US/docs/Web/API/SourceBuffer/abort\n     */\n  }, {\n    key: 'abort',\n    value: function abort() {\n      if (this.videoBuffer_) {\n        this.videoBuffer_.abort();\n      }\n      if (this.audioBuffer_) {\n        this.audioBuffer_.abort();\n      }\n      if (this.transmuxer_) {\n        this.transmuxer_.postMessage({ action: 'reset' });\n      }\n      this.pendingBuffers_.length = 0;\n      this.bufferUpdating_ = false;\n    }\n  }]);\n\n  return VirtualSourceBuffer;\n})(_videoJs2['default'].EventTarget);\n\nexports['default'] = VirtualSourceBuffer;\nmodule.exports = exports['default'];\n}).call(this,typeof global !== \"undefined\" ? global : typeof self !== \"undefined\" ? self : typeof window !== \"undefined\" ? window : {})\n},{\"./add-text-track-data\":25,\"./codec-utils\":26,\"./create-text-tracks-if-necessary\":27,\"./remove-cues-from-track\":32,\"./transmuxer-worker\":33,\"webworkify\":56}],36:[function(require,module,exports){\n/**\n * mux.js\n *\n * Copyright (c) 2016 Brightcove\n * All rights reserved.\n *\n * A stream-based aac to mp4 converter. This utility can be used to\n * deliver mp4s to a SourceBuffer on platforms that support native\n * Media Source Extensions.\n */\n'use strict';\nvar Stream = require('../utils/stream.js');\n\n// Constants\nvar AacStream;\n\n/**\n * Splits an incoming stream of binary data into ADTS and ID3 Frames.\n */\n\nAacStream = function() {\n  var\n    everything = new Uint8Array(),\n    receivedTimeStamp = false,\n    timeStamp = 0;\n\n  AacStream.prototype.init.call(this);\n\n  this.setTimestamp = function (timestamp) {\n    timeStamp = timestamp;\n  };\n\n  this.parseId3TagSize = function(header, byteIndex) {\n    var\n      returnSize = (header[byteIndex + 6] << 21) |\n                   (header[byteIndex + 7] << 14) |\n                   (header[byteIndex + 8] << 7) |\n                   (header[byteIndex + 9]),\n      flags = header[byteIndex + 5],\n      footerPresent = (flags & 16) >> 4;\n\n    if (footerPresent) {\n      return returnSize + 20;\n    }\n    return returnSize + 10;\n  };\n\n  this.parseAdtsSize = function(header, byteIndex) {\n    var\n      lowThree = (header[byteIndex + 5] & 0xE0) >> 5,\n      middle = header[byteIndex + 4] << 3,\n      highTwo = header[byteIndex + 3] & 0x3 << 11;\n\n    return (highTwo | middle) | lowThree;\n  };\n\n  this.push = function(bytes) {\n    var\n      frameSize = 0,\n      byteIndex = 0,\n      bytesLeft,\n      chunk,\n      packet,\n      tempLength;\n\n    // If there are bytes remaining from the last segment, prepend them to the\n    // bytes that were pushed in\n    if (everything.length) {\n      tempLength = everything.length;\n      everything = new Uint8Array(bytes.byteLength + tempLength);\n      everything.set(everything.subarray(0, tempLength));\n      everything.set(bytes, tempLength);\n    } else {\n      everything = bytes;\n    }\n\n    while (everything.length - byteIndex >= 3) {\n      if ((everything[byteIndex] === 'I'.charCodeAt(0)) &&\n          (everything[byteIndex + 1] === 'D'.charCodeAt(0)) &&\n          (everything[byteIndex + 2] === '3'.charCodeAt(0))) {\n\n        // Exit early because we don't have enough to parse\n        // the ID3 tag header\n        if (everything.length - byteIndex < 10) {\n          break;\n        }\n\n        // check framesize\n        frameSize = this.parseId3TagSize(everything, byteIndex);\n\n        // Exit early if we don't have enough in the buffer\n        // to emit a full packet\n        if (frameSize > everything.length) {\n          break;\n        }\n        chunk = {\n          type: 'timed-metadata',\n          data: everything.subarray(byteIndex, byteIndex + frameSize)\n        };\n        this.trigger('data', chunk);\n        byteIndex += frameSize;\n        continue;\n      } else if ((everything[byteIndex] & 0xff === 0xff) &&\n                 ((everything[byteIndex + 1] & 0xf0) === 0xf0)) {\n\n        // Exit early because we don't have enough to parse\n        // the ADTS frame header\n        if (everything.length - byteIndex < 7) {\n          break;\n        }\n\n        frameSize = this.parseAdtsSize(everything, byteIndex);\n\n        // Exit early if we don't have enough in the buffer\n        // to emit a full packet\n        if (frameSize > everything.length) {\n          break;\n        }\n\n        packet = {\n          type: 'audio',\n          data: everything.subarray(byteIndex, byteIndex + frameSize),\n          pts: timeStamp,\n          dts: timeStamp,\n        };\n        this.trigger('data', packet);\n        byteIndex += frameSize;\n        continue;\n      }\n      byteIndex++;\n    }\n    bytesLeft = everything.length - byteIndex;\n\n    if (bytesLeft > 0) {\n      everything = everything.subarray(byteIndex);\n    } else {\n      everything = new Uint8Array();\n    }\n  };\n};\n\nAacStream.prototype = new Stream();\n\n\n\nmodule.exports = AacStream;\n\n},{\"../utils/stream.js\":55}],37:[function(require,module,exports){\n'use strict';\n\nvar Stream = require('../utils/stream.js');\n\nvar AdtsStream;\n\nvar\n  ADTS_SAMPLING_FREQUENCIES = [\n    96000,\n    88200,\n    64000,\n    48000,\n    44100,\n    32000,\n    24000,\n    22050,\n    16000,\n    12000,\n    11025,\n    8000,\n    7350\n  ];\n\n/*\n * Accepts a ElementaryStream and emits data events with parsed\n * AAC Audio Frames of the individual packets. Input audio in ADTS\n * format is unpacked and re-emitted as AAC frames.\n *\n * @see http://wiki.multimedia.cx/index.php?title=ADTS\n * @see http://wiki.multimedia.cx/?title=Understanding_AAC\n */\nAdtsStream = function() {\n  var self, buffer;\n\n  AdtsStream.prototype.init.call(this);\n\n  self = this;\n\n  this.push = function(packet) {\n    var\n      i = 0,\n      frameNum = 0,\n      frameLength,\n      protectionSkipBytes,\n      frameEnd,\n      oldBuffer,\n      numFrames,\n      sampleCount,\n      adtsFrameDuration;\n\n    if (packet.type !== 'audio') {\n      // ignore non-audio data\n      return;\n    }\n\n    // Prepend any data in the buffer to the input data so that we can parse\n    // aac frames the cross a PES packet boundary\n    if (buffer) {\n      oldBuffer = buffer;\n      buffer = new Uint8Array(oldBuffer.byteLength + packet.data.byteLength);\n      buffer.set(oldBuffer);\n      buffer.set(packet.data, oldBuffer.byteLength);\n    } else {\n      buffer = packet.data;\n    }\n\n    // unpack any ADTS frames which have been fully received\n    // for details on the ADTS header, see http://wiki.multimedia.cx/index.php?title=ADTS\n    while (i + 5 < buffer.length) {\n\n      // Loook for the start of an ADTS header..\n      if (buffer[i] !== 0xFF || (buffer[i + 1] & 0xF6) !== 0xF0) {\n        // If a valid header was not found,  jump one forward and attempt to\n        // find a valid ADTS header starting at the next byte\n        i++;\n        continue;\n      }\n\n      // The protection skip bit tells us if we have 2 bytes of CRC data at the\n      // end of the ADTS header\n      protectionSkipBytes = (~buffer[i + 1] & 0x01) * 2;\n\n      // Frame length is a 13 bit integer starting 16 bits from the\n      // end of the sync sequence\n      frameLength = ((buffer[i + 3] & 0x03) << 11) |\n        (buffer[i + 4] << 3) |\n        ((buffer[i + 5] & 0xe0) >> 5);\n\n      sampleCount = ((buffer[i + 6] & 0x03) + 1) * 1024;\n      adtsFrameDuration = (sampleCount * 90000) /\n        ADTS_SAMPLING_FREQUENCIES[(buffer[i + 2] & 0x3c) >>> 2];\n\n      frameEnd = i + frameLength;\n\n      // If we don't have enough data to actually finish this ADTS frame, return\n      // and wait for more data\n      if (buffer.byteLength < frameEnd) {\n        return;\n      }\n\n      // Otherwise, deliver the complete AAC frame\n      this.trigger('data', {\n        pts: packet.pts + (frameNum * adtsFrameDuration),\n        dts: packet.dts + (frameNum * adtsFrameDuration),\n        sampleCount: sampleCount,\n        audioobjecttype: ((buffer[i + 2] >>> 6) & 0x03) + 1,\n        channelcount: ((buffer[i + 2] & 1) << 2) |\n          ((buffer[i + 3] & 0xc0) >>> 6),\n        samplerate: ADTS_SAMPLING_FREQUENCIES[(buffer[i + 2] & 0x3c) >>> 2],\n        samplingfrequencyindex: (buffer[i + 2] & 0x3c) >>> 2,\n        // assume ISO/IEC 14496-12 AudioSampleEntry default of 16\n        samplesize: 16,\n        data: buffer.subarray(i + 7 + protectionSkipBytes, frameEnd)\n      });\n\n      // If the buffer is empty, clear it and return\n      if (buffer.byteLength === frameEnd) {\n        buffer = undefined;\n        return;\n      }\n\n      frameNum++;\n\n      // Remove the finished frame from the buffer and start the process again\n      buffer = buffer.subarray(frameEnd);\n    }\n  };\n  this.flush = function() {\n    this.trigger('done');\n  };\n};\n\nAdtsStream.prototype = new Stream();\n\nmodule.exports = AdtsStream;\n\n},{\"../utils/stream.js\":55}],38:[function(require,module,exports){\n'use strict';\n\nvar Stream = require('../utils/stream.js');\nvar ExpGolomb = require('../utils/exp-golomb.js');\n\nvar H264Stream, NalByteStream;\n\n/**\n * Accepts a NAL unit byte stream and unpacks the embedded NAL units.\n */\nNalByteStream = function() {\n  var\n    syncPoint = 0,\n    i,\n    buffer;\n  NalByteStream.prototype.init.call(this);\n\n  this.push = function(data) {\n    var swapBuffer;\n\n    if (!buffer) {\n      buffer = data.data;\n    } else {\n      swapBuffer = new Uint8Array(buffer.byteLength + data.data.byteLength);\n      swapBuffer.set(buffer);\n      swapBuffer.set(data.data, buffer.byteLength);\n      buffer = swapBuffer;\n    }\n\n    // Rec. ITU-T H.264, Annex B\n    // scan for NAL unit boundaries\n\n    // a match looks like this:\n    // 0 0 1 .. NAL .. 0 0 1\n    // ^ sync point        ^ i\n    // or this:\n    // 0 0 1 .. NAL .. 0 0 0\n    // ^ sync point        ^ i\n\n    // advance the sync point to a NAL start, if necessary\n    for (; syncPoint < buffer.byteLength - 3; syncPoint++) {\n      if (buffer[syncPoint + 2] === 1) {\n        // the sync point is properly aligned\n        i = syncPoint + 5;\n        break;\n      }\n    }\n\n    while (i < buffer.byteLength) {\n      // look at the current byte to determine if we've hit the end of\n      // a NAL unit boundary\n      switch (buffer[i]) {\n      case 0:\n        // skip past non-sync sequences\n        if (buffer[i - 1] !== 0) {\n          i += 2;\n          break;\n        } else if (buffer[i - 2] !== 0) {\n          i++;\n          break;\n        }\n\n        // deliver the NAL unit if it isn't empty\n        if (syncPoint + 3 !==  i - 2) {\n          this.trigger('data', buffer.subarray(syncPoint + 3, i - 2));\n        }\n\n        // drop trailing zeroes\n        do {\n          i++;\n        } while (buffer[i] !== 1 && i < buffer.length);\n        syncPoint = i - 2;\n        i += 3;\n        break;\n      case 1:\n        // skip past non-sync sequences\n        if (buffer[i - 1] !== 0 ||\n            buffer[i - 2] !== 0) {\n          i += 3;\n          break;\n        }\n\n        // deliver the NAL unit\n        this.trigger('data', buffer.subarray(syncPoint + 3, i - 2));\n        syncPoint = i - 2;\n        i += 3;\n        break;\n      default:\n        // the current byte isn't a one or zero, so it cannot be part\n        // of a sync sequence\n        i += 3;\n        break;\n      }\n    }\n    // filter out the NAL units that were delivered\n    buffer = buffer.subarray(syncPoint);\n    i -= syncPoint;\n    syncPoint = 0;\n  };\n\n  this.flush = function() {\n    // deliver the last buffered NAL unit\n    if (buffer && buffer.byteLength > 3) {\n      this.trigger('data', buffer.subarray(syncPoint + 3));\n    }\n    // reset the stream state\n    buffer = null;\n    syncPoint = 0;\n    this.trigger('done');\n  };\n};\nNalByteStream.prototype = new Stream();\n\n/**\n * Accepts input from a ElementaryStream and produces H.264 NAL unit data\n * events.\n */\nH264Stream = function() {\n  var\n    nalByteStream = new NalByteStream(),\n    self,\n    trackId,\n    currentPts,\n    currentDts,\n\n    discardEmulationPreventionBytes,\n    readSequenceParameterSet,\n    skipScalingList;\n\n  H264Stream.prototype.init.call(this);\n  self = this;\n\n  this.push = function(packet) {\n    if (packet.type !== 'video') {\n      return;\n    }\n    trackId = packet.trackId;\n    currentPts = packet.pts;\n    currentDts = packet.dts;\n\n    nalByteStream.push(packet);\n  };\n\n  nalByteStream.on('data', function(data) {\n    var\n      event = {\n        trackId: trackId,\n        pts: currentPts,\n        dts: currentDts,\n        data: data\n      };\n\n    switch (data[0] & 0x1f) {\n    case 0x05:\n      event.nalUnitType = 'slice_layer_without_partitioning_rbsp_idr';\n      break;\n    case 0x06:\n      event.nalUnitType = 'sei_rbsp';\n      event.escapedRBSP = discardEmulationPreventionBytes(data.subarray(1));\n      break;\n    case 0x07:\n      event.nalUnitType = 'seq_parameter_set_rbsp';\n      event.escapedRBSP = discardEmulationPreventionBytes(data.subarray(1));\n      event.config = readSequenceParameterSet(event.escapedRBSP);\n      break;\n    case 0x08:\n      event.nalUnitType = 'pic_parameter_set_rbsp';\n      break;\n    case 0x09:\n      event.nalUnitType = 'access_unit_delimiter_rbsp';\n      break;\n\n    default:\n      break;\n    }\n    self.trigger('data', event);\n  });\n  nalByteStream.on('done', function() {\n    self.trigger('done');\n  });\n\n  this.flush = function() {\n    nalByteStream.flush();\n  };\n\n  /**\n   * Advance the ExpGolomb decoder past a scaling list. The scaling\n   * list is optionally transmitted as part of a sequence parameter\n   * set and is not relevant to transmuxing.\n   * @param count {number} the number of entries in this scaling list\n   * @param expGolombDecoder {object} an ExpGolomb pointed to the\n   * start of a scaling list\n   * @see Recommendation ITU-T H.264, Section 7.3.2.1.1.1\n   */\n  skipScalingList = function(count, expGolombDecoder) {\n    var\n      lastScale = 8,\n      nextScale = 8,\n      j,\n      deltaScale;\n\n    for (j = 0; j < count; j++) {\n      if (nextScale !== 0) {\n        deltaScale = expGolombDecoder.readExpGolomb();\n        nextScale = (lastScale + deltaScale + 256) % 256;\n      }\n\n      lastScale = (nextScale === 0) ? lastScale : nextScale;\n    }\n  };\n\n  /**\n   * Expunge any \"Emulation Prevention\" bytes from a \"Raw Byte\n   * Sequence Payload\"\n   * @param data {Uint8Array} the bytes of a RBSP from a NAL\n   * unit\n   * @return {Uint8Array} the RBSP without any Emulation\n   * Prevention Bytes\n   */\n  discardEmulationPreventionBytes = function(data) {\n    var\n      length = data.byteLength,\n      emulationPreventionBytesPositions = [],\n      i = 1,\n      newLength, newData;\n\n    // Find all `Emulation Prevention Bytes`\n    while (i < length - 2) {\n      if (data[i] === 0 && data[i + 1] === 0 && data[i + 2] === 0x03) {\n        emulationPreventionBytesPositions.push(i + 2);\n        i += 2;\n      } else {\n        i++;\n      }\n    }\n\n    // If no Emulation Prevention Bytes were found just return the original\n    // array\n    if (emulationPreventionBytesPositions.length === 0) {\n      return data;\n    }\n\n    // Create a new array to hold the NAL unit data\n    newLength = length - emulationPreventionBytesPositions.length;\n    newData = new Uint8Array(newLength);\n    var sourceIndex = 0;\n\n    for (i = 0; i < newLength; sourceIndex++, i++) {\n      if (sourceIndex === emulationPreventionBytesPositions[0]) {\n        // Skip this byte\n        sourceIndex++;\n        // Remove this position index\n        emulationPreventionBytesPositions.shift();\n      }\n      newData[i] = data[sourceIndex];\n    }\n\n    return newData;\n  };\n\n  /**\n   * Read a sequence parameter set and return some interesting video\n   * properties. A sequence parameter set is the H264 metadata that\n   * describes the properties of upcoming video frames.\n   * @param data {Uint8Array} the bytes of a sequence parameter set\n   * @return {object} an object with configuration parsed from the\n   * sequence parameter set, including the dimensions of the\n   * associated video frames.\n   */\n  readSequenceParameterSet = function(data) {\n    var\n      frameCropLeftOffset = 0,\n      frameCropRightOffset = 0,\n      frameCropTopOffset = 0,\n      frameCropBottomOffset = 0,\n      sarScale = 1,\n      expGolombDecoder, profileIdc, levelIdc, profileCompatibility,\n      chromaFormatIdc, picOrderCntType,\n      numRefFramesInPicOrderCntCycle, picWidthInMbsMinus1,\n      picHeightInMapUnitsMinus1,\n      frameMbsOnlyFlag,\n      scalingListCount,\n      sarRatio,\n      aspectRatioIdc,\n      i;\n\n    expGolombDecoder = new ExpGolomb(data);\n    profileIdc = expGolombDecoder.readUnsignedByte(); // profile_idc\n    profileCompatibility = expGolombDecoder.readUnsignedByte(); // constraint_set[0-5]_flag\n    levelIdc = expGolombDecoder.readUnsignedByte(); // level_idc u(8)\n    expGolombDecoder.skipUnsignedExpGolomb(); // seq_parameter_set_id\n\n    // some profiles have more optional data we don't need\n    if (profileIdc === 100 ||\n        profileIdc === 110 ||\n        profileIdc === 122 ||\n        profileIdc === 244 ||\n        profileIdc ===  44 ||\n        profileIdc ===  83 ||\n        profileIdc ===  86 ||\n        profileIdc === 118 ||\n        profileIdc === 128 ||\n        profileIdc === 138 ||\n        profileIdc === 139 ||\n        profileIdc === 134) {\n      chromaFormatIdc = expGolombDecoder.readUnsignedExpGolomb();\n      if (chromaFormatIdc === 3) {\n        expGolombDecoder.skipBits(1); // separate_colour_plane_flag\n      }\n      expGolombDecoder.skipUnsignedExpGolomb(); // bit_depth_luma_minus8\n      expGolombDecoder.skipUnsignedExpGolomb(); // bit_depth_chroma_minus8\n      expGolombDecoder.skipBits(1); // qpprime_y_zero_transform_bypass_flag\n      if (expGolombDecoder.readBoolean()) { // seq_scaling_matrix_present_flag\n        scalingListCount = (chromaFormatIdc !== 3) ? 8 : 12;\n        for (i = 0; i < scalingListCount; i++) {\n          if (expGolombDecoder.readBoolean()) { // seq_scaling_list_present_flag[ i ]\n            if (i < 6) {\n              skipScalingList(16, expGolombDecoder);\n            } else {\n              skipScalingList(64, expGolombDecoder);\n            }\n          }\n        }\n      }\n    }\n\n    expGolombDecoder.skipUnsignedExpGolomb(); // log2_max_frame_num_minus4\n    picOrderCntType = expGolombDecoder.readUnsignedExpGolomb();\n\n    if (picOrderCntType === 0) {\n      expGolombDecoder.readUnsignedExpGolomb(); //log2_max_pic_order_cnt_lsb_minus4\n    } else if (picOrderCntType === 1) {\n      expGolombDecoder.skipBits(1); // delta_pic_order_always_zero_flag\n      expGolombDecoder.skipExpGolomb(); // offset_for_non_ref_pic\n      expGolombDecoder.skipExpGolomb(); // offset_for_top_to_bottom_field\n      numRefFramesInPicOrderCntCycle = expGolombDecoder.readUnsignedExpGolomb();\n      for(i = 0; i < numRefFramesInPicOrderCntCycle; i++) {\n        expGolombDecoder.skipExpGolomb(); // offset_for_ref_frame[ i ]\n      }\n    }\n\n    expGolombDecoder.skipUnsignedExpGolomb(); // max_num_ref_frames\n    expGolombDecoder.skipBits(1); // gaps_in_frame_num_value_allowed_flag\n\n    picWidthInMbsMinus1 = expGolombDecoder.readUnsignedExpGolomb();\n    picHeightInMapUnitsMinus1 = expGolombDecoder.readUnsignedExpGolomb();\n\n    frameMbsOnlyFlag = expGolombDecoder.readBits(1);\n    if (frameMbsOnlyFlag === 0) {\n      expGolombDecoder.skipBits(1); // mb_adaptive_frame_field_flag\n    }\n\n    expGolombDecoder.skipBits(1); // direct_8x8_inference_flag\n    if (expGolombDecoder.readBoolean()) { // frame_cropping_flag\n      frameCropLeftOffset = expGolombDecoder.readUnsignedExpGolomb();\n      frameCropRightOffset = expGolombDecoder.readUnsignedExpGolomb();\n      frameCropTopOffset = expGolombDecoder.readUnsignedExpGolomb();\n      frameCropBottomOffset = expGolombDecoder.readUnsignedExpGolomb();\n    }\n    if (expGolombDecoder.readBoolean()) {\n      // vui_parameters_present_flag\n      if (expGolombDecoder.readBoolean()) {\n        // aspect_ratio_info_present_flag\n        aspectRatioIdc = expGolombDecoder.readUnsignedByte();\n        switch (aspectRatioIdc) {\n          case 1: sarRatio = [1,1]; break;\n          case 2: sarRatio = [12,11]; break;\n          case 3: sarRatio = [10,11]; break;\n          case 4: sarRatio = [16,11]; break;\n          case 5: sarRatio = [40,33]; break;\n          case 6: sarRatio = [24,11]; break;\n          case 7: sarRatio = [20,11]; break;\n          case 8: sarRatio = [32,11]; break;\n          case 9: sarRatio = [80,33]; break;\n          case 10: sarRatio = [18,11]; break;\n          case 11: sarRatio = [15,11]; break;\n          case 12: sarRatio = [64,33]; break;\n          case 13: sarRatio = [160,99]; break;\n          case 14: sarRatio = [4,3]; break;\n          case 15: sarRatio = [3,2]; break;\n          case 16: sarRatio = [2,1]; break;\n          case 255: {\n            sarRatio = [expGolombDecoder.readUnsignedByte() << 8 |\n                        expGolombDecoder.readUnsignedByte(),\n                        expGolombDecoder.readUnsignedByte() << 8 |\n                        expGolombDecoder.readUnsignedByte() ];\n            break;\n          }\n        }\n        if (sarRatio) {\n          sarScale = sarRatio[0] / sarRatio[1];\n        }\n      }\n    }\n    return {\n      profileIdc: profileIdc,\n      levelIdc: levelIdc,\n      profileCompatibility: profileCompatibility,\n      width: Math.ceil((((picWidthInMbsMinus1 + 1) * 16) - frameCropLeftOffset * 2 - frameCropRightOffset * 2) * sarScale),\n      height: ((2 - frameMbsOnlyFlag) * (picHeightInMapUnitsMinus1 + 1) * 16) - (frameCropTopOffset * 2) - (frameCropBottomOffset * 2)\n    };\n  };\n\n};\nH264Stream.prototype = new Stream();\n\nmodule.exports = {\n  H264Stream: H264Stream,\n  NalByteStream: NalByteStream,\n};\n\n},{\"../utils/exp-golomb.js\":54,\"../utils/stream.js\":55}],39:[function(require,module,exports){\nmodule.exports = {\n  adts: require('./adts'),\n  h264: require('./h264'),\n};\n\n},{\"./adts\":37,\"./h264\":38}],40:[function(require,module,exports){\n/**\n * An object that stores the bytes of an FLV tag and methods for\n * querying and manipulating that data.\n * @see http://download.macromedia.com/f4v/video_file_format_spec_v10_1.pdf\n */\n'use strict';\n\nvar FlvTag;\n\n// (type:uint, extraData:Boolean = false) extends ByteArray\nFlvTag = function(type, extraData) {\n  var\n    // Counter if this is a metadata tag, nal start marker if this is a video\n    // tag. unused if this is an audio tag\n    adHoc = 0, // :uint\n\n    // The default size is 16kb but this is not enough to hold iframe\n    // data and the resizing algorithm costs a bit so we create a larger\n    // starting buffer for video tags\n    bufferStartSize = 16384,\n\n    // checks whether the FLV tag has enough capacity to accept the proposed\n    // write and re-allocates the internal buffers if necessary\n    prepareWrite = function(flv, count) {\n      var\n        bytes,\n        minLength = flv.position + count;\n      if (minLength < flv.bytes.byteLength) {\n        // there's enough capacity so do nothing\n        return;\n      }\n\n      // allocate a new buffer and copy over the data that will not be modified\n      bytes = new Uint8Array(minLength * 2);\n      bytes.set(flv.bytes.subarray(0, flv.position), 0);\n      flv.bytes = bytes;\n      flv.view = new DataView(flv.bytes.buffer);\n    },\n\n    // commonly used metadata properties\n    widthBytes = FlvTag.widthBytes || new Uint8Array('width'.length),\n    heightBytes = FlvTag.heightBytes || new Uint8Array('height'.length),\n    videocodecidBytes = FlvTag.videocodecidBytes || new Uint8Array('videocodecid'.length),\n    i;\n\n  if (!FlvTag.widthBytes) {\n    // calculating the bytes of common metadata names ahead of time makes the\n    // corresponding writes faster because we don't have to loop over the\n    // characters\n    // re-test with test/perf.html if you're planning on changing this\n    for (i = 0; i < 'width'.length; i++) {\n      widthBytes[i] = 'width'.charCodeAt(i);\n    }\n    for (i = 0; i < 'height'.length; i++) {\n      heightBytes[i] = 'height'.charCodeAt(i);\n    }\n    for (i = 0; i < 'videocodecid'.length; i++) {\n      videocodecidBytes[i] = 'videocodecid'.charCodeAt(i);\n    }\n\n    FlvTag.widthBytes = widthBytes;\n    FlvTag.heightBytes = heightBytes;\n    FlvTag.videocodecidBytes = videocodecidBytes;\n  }\n\n  this.keyFrame = false; // :Boolean\n\n  switch(type) {\n  case FlvTag.VIDEO_TAG:\n    this.length = 16;\n    // Start the buffer at 256k\n    bufferStartSize *= 6;\n    break;\n  case FlvTag.AUDIO_TAG:\n    this.length = 13;\n    this.keyFrame = true;\n    break;\n  case FlvTag.METADATA_TAG:\n    this.length = 29;\n    this.keyFrame = true;\n    break;\n  default:\n    throw(\"Error Unknown TagType\");\n  }\n\n  this.bytes = new Uint8Array(bufferStartSize);\n  this.view = new DataView(this.bytes.buffer);\n  this.bytes[0] = type;\n  this.position = this.length;\n  this.keyFrame = extraData; // Defaults to false\n\n  // presentation timestamp\n  this.pts = 0;\n  // decoder timestamp\n  this.dts = 0;\n\n  // ByteArray#writeBytes(bytes:ByteArray, offset:uint = 0, length:uint = 0)\n  this.writeBytes = function(bytes, offset, length) {\n    var\n      start = offset || 0,\n      end;\n    length = length || bytes.byteLength;\n    end = start + length;\n\n    prepareWrite(this, length);\n    this.bytes.set(bytes.subarray(start, end), this.position);\n\n    this.position += length;\n    this.length = Math.max(this.length, this.position);\n  };\n\n  // ByteArray#writeByte(value:int):void\n  this.writeByte = function(byte) {\n    prepareWrite(this, 1);\n    this.bytes[this.position] = byte;\n    this.position++;\n    this.length = Math.max(this.length, this.position);\n  };\n\n  // ByteArray#writeShort(value:int):void\n  this.writeShort = function(short) {\n    prepareWrite(this, 2);\n    this.view.setUint16(this.position, short);\n    this.position += 2;\n    this.length = Math.max(this.length, this.position);\n  };\n\n  // Negative index into array\n  // (pos:uint):int\n  this.negIndex = function(pos) {\n    return this.bytes[this.length - pos];\n  };\n\n  // The functions below ONLY work when this[0] == VIDEO_TAG.\n  // We are not going to check for that because we dont want the overhead\n  // (nal:ByteArray = null):int\n  this.nalUnitSize = function() {\n    if (adHoc === 0) {\n      return 0;\n    }\n\n    return this.length - (adHoc + 4);\n  };\n\n  this.startNalUnit = function() {\n    // remember position and add 4 bytes\n    if (adHoc > 0) {\n      throw new Error(\"Attempted to create new NAL wihout closing the old one\");\n    }\n\n    // reserve 4 bytes for nal unit size\n    adHoc = this.length;\n    this.length += 4;\n    this.position = this.length;\n  };\n\n  // (nal:ByteArray = null):void\n  this.endNalUnit = function(nalContainer) {\n    var\n      nalStart, // :uint\n      nalLength; // :uint\n\n    // Rewind to the marker and write the size\n    if (this.length === adHoc + 4) {\n      // we started a nal unit, but didnt write one, so roll back the 4 byte size value\n      this.length -= 4;\n    } else if (adHoc > 0) {\n      nalStart = adHoc + 4;\n      nalLength = this.length - nalStart;\n\n      this.position = adHoc;\n      this.view.setUint32(this.position, nalLength);\n      this.position = this.length;\n\n      if (nalContainer) {\n        // Add the tag to the NAL unit\n        nalContainer.push(this.bytes.subarray(nalStart, nalStart + nalLength));\n      }\n    }\n\n    adHoc = 0;\n  };\n\n  /**\n   * Write out a 64-bit floating point valued metadata property. This method is\n   * called frequently during a typical parse and needs to be fast.\n   */\n  // (key:String, val:Number):void\n  this.writeMetaDataDouble = function(key, val) {\n    var i;\n    prepareWrite(this, 2 + key.length + 9);\n\n    // write size of property name\n    this.view.setUint16(this.position, key.length);\n    this.position += 2;\n\n    // this next part looks terrible but it improves parser throughput by\n    // 10kB/s in my testing\n\n    // write property name\n    if (key === 'width') {\n      this.bytes.set(widthBytes, this.position);\n      this.position += 5;\n    } else if (key === 'height') {\n      this.bytes.set(heightBytes, this.position);\n      this.position += 6;\n    } else if (key === 'videocodecid') {\n      this.bytes.set(videocodecidBytes, this.position);\n      this.position += 12;\n    } else {\n      for (i = 0; i < key.length; i++) {\n        this.bytes[this.position] = key.charCodeAt(i);\n        this.position++;\n      }\n    }\n\n    // skip null byte\n    this.position++;\n\n    // write property value\n    this.view.setFloat64(this.position, val);\n    this.position += 8;\n\n    // update flv tag length\n    this.length = Math.max(this.length, this.position);\n    ++adHoc;\n  };\n\n  // (key:String, val:Boolean):void\n  this.writeMetaDataBoolean = function(key, val) {\n    var i;\n    prepareWrite(this, 2);\n    this.view.setUint16(this.position, key.length);\n    this.position += 2;\n    for (i = 0; i < key.length; i++) {\n      // if key.charCodeAt(i) >= 255, handle error\n      prepareWrite(this, 1);\n      this.bytes[this.position] = key.charCodeAt(i);\n      this.position++;\n    }\n    prepareWrite(this, 2);\n    this.view.setUint8(this.position, 0x01);\n    this.position++;\n    this.view.setUint8(this.position, val ? 0x01 : 0x00);\n    this.position++;\n    this.length = Math.max(this.length, this.position);\n    ++adHoc;\n  };\n\n  // ():ByteArray\n  this.finalize = function() {\n    var\n      dtsDelta, // :int\n      len; // :int\n\n    switch(this.bytes[0]) {\n      // Video Data\n    case FlvTag.VIDEO_TAG:\n      this.bytes[11] = ((this.keyFrame || extraData) ? 0x10 : 0x20 ) | 0x07; // We only support AVC, 1 = key frame (for AVC, a seekable frame), 2 = inter frame (for AVC, a non-seekable frame)\n      this.bytes[12] = extraData ?  0x00 : 0x01;\n\n      dtsDelta = this.pts - this.dts;\n      this.bytes[13] = (dtsDelta & 0x00FF0000) >>> 16;\n      this.bytes[14] = (dtsDelta & 0x0000FF00) >>>  8;\n      this.bytes[15] = (dtsDelta & 0x000000FF) >>>  0;\n      break;\n\n    case FlvTag.AUDIO_TAG:\n      this.bytes[11] = 0xAF; // 44 kHz, 16-bit stereo\n      this.bytes[12] = extraData ? 0x00 : 0x01;\n      break;\n\n    case FlvTag.METADATA_TAG:\n      this.position = 11;\n      this.view.setUint8(this.position, 0x02); // String type\n      this.position++;\n      this.view.setUint16(this.position, 0x0A); // 10 Bytes\n      this.position += 2;\n      // set \"onMetaData\"\n      this.bytes.set([0x6f, 0x6e, 0x4d, 0x65,\n                      0x74, 0x61, 0x44, 0x61,\n                      0x74, 0x61], this.position);\n      this.position += 10;\n      this.bytes[this.position] = 0x08; // Array type\n      this.position++;\n      this.view.setUint32(this.position, adHoc);\n      this.position = this.length;\n      this.bytes.set([0, 0, 9], this.position);\n      this.position += 3; // End Data Tag\n      this.length = this.position;\n      break;\n    }\n\n    len = this.length - 11;\n\n    // write the DataSize field\n    this.bytes[ 1] = (len & 0x00FF0000) >>> 16;\n    this.bytes[ 2] = (len & 0x0000FF00) >>>  8;\n    this.bytes[ 3] = (len & 0x000000FF) >>>  0;\n    // write the Timestamp\n    this.bytes[ 4] = (this.dts & 0x00FF0000) >>> 16;\n    this.bytes[ 5] = (this.dts & 0x0000FF00) >>>  8;\n    this.bytes[ 6] = (this.dts & 0x000000FF) >>>  0;\n    this.bytes[ 7] = (this.dts & 0xFF000000) >>> 24;\n    // write the StreamID\n    this.bytes[ 8] = 0;\n    this.bytes[ 9] = 0;\n    this.bytes[10] = 0;\n\n    // Sometimes we're at the end of the view and have one slot to write a\n    // uint32, so, prepareWrite of count 4, since, view is uint8\n    prepareWrite(this, 4);\n    this.view.setUint32(this.length, this.length);\n    this.length += 4;\n    this.position += 4;\n\n    // trim down the byte buffer to what is actually being used\n    this.bytes = this.bytes.subarray(0, this.length);\n    this.frameTime = FlvTag.frameTime(this.bytes);\n    // if bytes.bytelength isn't equal to this.length, handle error\n    return this;\n  };\n};\n\nFlvTag.AUDIO_TAG = 0x08; // == 8, :uint\nFlvTag.VIDEO_TAG = 0x09; // == 9, :uint\nFlvTag.METADATA_TAG = 0x12; // == 18, :uint\n\n// (tag:ByteArray):Boolean {\nFlvTag.isAudioFrame = function(tag) {\n  return FlvTag.AUDIO_TAG === tag[0];\n};\n\n// (tag:ByteArray):Boolean {\nFlvTag.isVideoFrame = function(tag) {\n  return FlvTag.VIDEO_TAG === tag[0];\n};\n\n// (tag:ByteArray):Boolean {\nFlvTag.isMetaData = function(tag) {\n  return FlvTag.METADATA_TAG === tag[0];\n};\n\n// (tag:ByteArray):Boolean {\nFlvTag.isKeyFrame = function(tag) {\n  if (FlvTag.isVideoFrame(tag)) {\n    return tag[11] === 0x17;\n  }\n\n  if (FlvTag.isAudioFrame(tag)) {\n    return true;\n  }\n\n  if (FlvTag.isMetaData(tag)) {\n    return true;\n  }\n\n  return false;\n};\n\n// (tag:ByteArray):uint {\nFlvTag.frameTime = function(tag) {\n  var pts = tag[ 4] << 16; // :uint\n  pts |= tag[ 5] <<  8;\n  pts |= tag[ 6] <<  0;\n  pts |= tag[ 7] << 24;\n  return pts;\n};\n\nmodule.exports = FlvTag;\n\n},{}],41:[function(require,module,exports){\nmodule.exports = {\n  tag: require('./flv-tag'),\n  Transmuxer: require('./transmuxer'),\n  tools: require('../tools/flv-inspector'),\n};\n\n},{\"../tools/flv-inspector\":52,\"./flv-tag\":40,\"./transmuxer\":42}],42:[function(require,module,exports){\n'use strict';\n\nvar Stream = require('../utils/stream.js');\nvar FlvTag = require('./flv-tag.js');\nvar m2ts = require('../m2ts/m2ts.js');\nvar AdtsStream = require('../codecs/adts.js');\nvar H264Stream = require('../codecs/h264').H264Stream;\n\nvar\n  MetadataStream,\n  Transmuxer,\n  VideoSegmentStream,\n  AudioSegmentStream,\n  CoalesceStream,\n  collectTimelineInfo,\n  metaDataTag,\n  extraDataTag;\n\n/**\n * Store information about the start and end of the tracka and the\n * duration for each frame/sample we process in order to calculate\n * the baseMediaDecodeTime\n */\ncollectTimelineInfo = function (track, data) {\n  if (typeof data.pts === 'number') {\n    if (track.timelineStartInfo.pts === undefined) {\n      track.timelineStartInfo.pts = data.pts;\n    } else {\n      track.timelineStartInfo.pts =\n        Math.min(track.timelineStartInfo.pts, data.pts);\n    }\n  }\n\n  if (typeof data.dts === 'number') {\n    if (track.timelineStartInfo.dts === undefined) {\n      track.timelineStartInfo.dts = data.dts;\n    } else {\n      track.timelineStartInfo.dts =\n        Math.min(track.timelineStartInfo.dts, data.dts);\n    }\n  }\n};\n\nmetaDataTag = function(track, pts) {\n  var\n    tag = new FlvTag(FlvTag.METADATA_TAG); // :FlvTag\n\n  tag.dts = pts;\n  tag.pts = pts;\n\n  tag.writeMetaDataDouble(\"videocodecid\", 7);\n  tag.writeMetaDataDouble(\"width\", track.width);\n  tag.writeMetaDataDouble(\"height\", track.height);\n\n  return tag;\n};\n\nextraDataTag = function(track, pts) {\n  var\n    i,\n    tag = new FlvTag(FlvTag.VIDEO_TAG, true);\n\n  tag.dts = pts;\n  tag.pts = pts;\n\n  tag.writeByte(0x01);// version\n  tag.writeByte(track.profileIdc);// profile\n  tag.writeByte(track.profileCompatibility);// compatibility\n  tag.writeByte(track.levelIdc);// level\n  tag.writeByte(0xFC | 0x03); // reserved (6 bits), NULA length size - 1 (2 bits)\n  tag.writeByte(0xE0 | 0x01 ); // reserved (3 bits), num of SPS (5 bits)\n  tag.writeShort( track.sps[0].length ); // data of SPS\n  tag.writeBytes( track.sps[0] ); // SPS\n\n  tag.writeByte(track.pps.length); // num of PPS (will there ever be more that 1 PPS?)\n  for (i = 0 ; i < track.pps.length ; ++i) {\n    tag.writeShort(track.pps[i].length); // 2 bytes for length of PPS\n    tag.writeBytes(track.pps[i]); // data of PPS\n  }\n\n  return tag;\n};\n\n/**\n * Constructs a single-track, media segment from AAC data\n * events. The output of this stream can be fed to flash.\n */\nAudioSegmentStream = function(track) {\n  var\n    adtsFrames = [],\n    adtsFramesLength = 0,\n    sequenceNumber = 0,\n    earliestAllowedDts = 0,\n    oldExtraData;\n\n  AudioSegmentStream.prototype.init.call(this);\n\n  this.push = function(data) {\n    collectTimelineInfo(track, data);\n\n    if (track && track.channelcount === undefined) {\n      track.audioobjecttype = data.audioobjecttype;\n      track.channelcount = data.channelcount;\n      track.samplerate = data.samplerate;\n      track.samplingfrequencyindex = data.samplingfrequencyindex;\n      track.samplesize = data.samplesize;\n      track.extraData = (track.audioobjecttype << 11) |\n                        (track.samplingfrequencyindex << 7) |\n                        (track.channelcount << 3);\n    }\n\n    data.pts = Math.round(data.pts / 90);\n    data.dts = Math.round(data.dts / 90);\n\n    // buffer audio data until end() is called\n    adtsFrames.push(data);\n  };\n\n  this.flush = function() {\n    var currentFrame, adtsFrame, deltaDts,lastMetaPts, tags = [];\n    // return early if no audio data has been observed\n    if (adtsFrames.length === 0) {\n      this.trigger('done');\n      return;\n    }\n\n    lastMetaPts = -Infinity;\n\n    while (adtsFrames.length) {\n      currentFrame = adtsFrames.shift();\n\n      // write out metadata tags every 1 second so that the decoder\n      // is re-initialized quickly after seeking into a different\n      // audio configuration\n      if (track.extraData !== oldExtraData || currentFrame.pts - lastMetaPts >= 1000) {\n       adtsFrame = new FlvTag(FlvTag.METADATA_TAG);\n        adtsFrame.pts = currentFrame.pts;\n        adtsFrame.dts = currentFrame.dts;\n\n        // AAC is always 10\n        adtsFrame.writeMetaDataDouble(\"audiocodecid\", 10);\n        adtsFrame.writeMetaDataBoolean(\"stereo\", 2 === track.channelcount);\n        adtsFrame.writeMetaDataDouble (\"audiosamplerate\", track.samplerate);\n        // Is AAC always 16 bit?\n        adtsFrame.writeMetaDataDouble (\"audiosamplesize\", 16);\n\n        tags.push(adtsFrame);\n\n        oldExtraData = track.extraData;\n\n        adtsFrame = new FlvTag(FlvTag.AUDIO_TAG, true);\n        // For audio, DTS is always the same as PTS. We want to set the DTS\n        // however so we can compare with video DTS to determine approximate\n        // packet order\n        adtsFrame.pts = currentFrame.pts;\n        adtsFrame.dts = currentFrame.dts;\n\n        adtsFrame.view.setUint16(adtsFrame.position, track.extraData);\n        adtsFrame.position += 2;\n        adtsFrame.length = Math.max(adtsFrame.length, adtsFrame.position);\n\n        tags.push(adtsFrame);\n\n        lastMetaPts = currentFrame.pts;\n      }\n      adtsFrame = new FlvTag(FlvTag.AUDIO_TAG);\n      adtsFrame.pts = currentFrame.pts;\n      adtsFrame.dts = currentFrame.dts;\n\n      adtsFrame.writeBytes(currentFrame.data);\n\n      tags.push(adtsFrame);\n    }\n\n    oldExtraData = null;\n    this.trigger('data', {track: track, tags: tags});\n\n    this.trigger('done');\n  };\n};\nAudioSegmentStream.prototype = new Stream();\n\n/**\n * Store FlvTags for the h264 stream\n * @param track {object} track metadata configuration\n */\nVideoSegmentStream = function(track) {\n  var\n    sequenceNumber = 0,\n    nalUnits = [],\n    nalUnitsLength = 0,\n    config,\n    h264Frame;\n  VideoSegmentStream.prototype.init.call(this);\n\n  this.finishFrame = function(tags, frame) {\n    if (!frame) {\n      return;\n    }\n    // Check if keyframe and the length of tags.\n    // This makes sure we write metadata on the first frame of a segment.\n    if (config && track && track.newMetadata &&\n        (frame.keyFrame || tags.length === 0)) {\n      // Push extra data on every IDR frame in case we did a stream change + seek\n      tags.push(metaDataTag(config, frame.pts));\n      tags.push(extraDataTag(track, frame.pts));\n      track.newMetadata = false;\n    }\n\n    frame.endNalUnit();\n    tags.push(frame);\n  };\n\n  this.push = function(data) {\n    collectTimelineInfo(track, data);\n\n    data.pts = Math.round(data.pts / 90);\n    data.dts = Math.round(data.dts / 90);\n\n    // buffer video until flush() is called\n    nalUnits.push(data);\n  };\n\n  this.flush = function() {\n    var\n      currentNal,\n      tags = [];\n\n    // Throw away nalUnits at the start of the byte stream until we find\n    // the first AUD\n    while (nalUnits.length) {\n      if (nalUnits[0].nalUnitType === 'access_unit_delimiter_rbsp') {\n        break;\n      }\n      nalUnits.shift();\n    }\n\n    // return early if no video data has been observed\n    if (nalUnits.length === 0) {\n      this.trigger('done');\n      return;\n    }\n\n    while (nalUnits.length) {\n      currentNal = nalUnits.shift();\n\n      // record the track config\n      if (currentNal.nalUnitType === 'seq_parameter_set_rbsp') {\n        track.newMetadata = true;\n        config = currentNal.config;\n        track.width = config.width;\n        track.height = config.height;\n        track.sps = [currentNal.data];\n        track.profileIdc = config.profileIdc;\n        track.levelIdc = config.levelIdc;\n        track.profileCompatibility = config.profileCompatibility;\n        h264Frame.endNalUnit();\n      } else if (currentNal.nalUnitType === 'pic_parameter_set_rbsp') {\n        track.newMetadata = true;\n        track.pps = [currentNal.data];\n        h264Frame.endNalUnit();\n      } else if (currentNal.nalUnitType === 'access_unit_delimiter_rbsp') {\n        if (h264Frame) {\n          this.finishFrame(tags, h264Frame);\n        }\n        h264Frame = new FlvTag(FlvTag.VIDEO_TAG);\n        h264Frame.pts = currentNal.pts;\n        h264Frame.dts = currentNal.dts;\n      } else {\n        if (currentNal.nalUnitType === 'slice_layer_without_partitioning_rbsp_idr') {\n          // the current sample is a key frame\n          h264Frame.keyFrame = true;\n        }\n        h264Frame.endNalUnit();\n      }\n      h264Frame.startNalUnit();\n      h264Frame.writeBytes(currentNal.data);\n    }\n    if (h264Frame) {\n      this.finishFrame(tags, h264Frame);\n    }\n\n    this.trigger('data', {track: track, tags: tags});\n\n    // Continue with the flush process now\n    this.trigger('done');\n  };\n};\n\nVideoSegmentStream.prototype = new Stream();\n\n/**\n * The final stage of the transmuxer that emits the flv tags\n * for audio, video, and metadata. Also tranlates in time and\n * outputs caption data and id3 cues.\n */\nCoalesceStream = function(options) {\n  // Number of Tracks per output segment\n  // If greater than 1, we combine multiple\n  // tracks into a single segment\n  this.numberOfTracks = 0;\n  this.metadataStream = options.metadataStream;\n\n  this.videoTags = [];\n  this.audioTags = [];\n  this.videoTrack = null;\n  this.audioTrack = null;\n  this.pendingCaptions = [];\n  this.pendingMetadata = [];\n  this.pendingTracks = 0;\n\n  CoalesceStream.prototype.init.call(this);\n\n  // Take output from multiple\n  this.push = function(output) {\n    // buffer incoming captions until the associated video segment\n    // finishes\n    if (output.text) {\n      return this.pendingCaptions.push(output);\n    }\n    // buffer incoming id3 tags until the final flush\n    if (output.frames) {\n      return this.pendingMetadata.push(output);\n    }\n\n    if (output.track.type === 'video') {\n      this.videoTrack = output.track;\n      this.videoTags = output.tags;\n      this.pendingTracks++;\n    }\n    if (output.track.type === 'audio') {\n      this.audioTrack = output.track;\n      this.audioTags = output.tags;\n      this.pendingTracks++;\n    }\n  };\n};\n\nCoalesceStream.prototype = new Stream();\nCoalesceStream.prototype.flush = function() {\n  var\n    id3,\n    caption,\n    i,\n    timelineStartPts,\n    event = {\n      tags: {},\n      captions: [],\n      metadata: []\n    };\n\n  if (this.pendingTracks < this.numberOfTracks) {\n    return;\n  }\n\n  if (this.videoTrack) {\n    timelineStartPts = this.videoTrack.timelineStartInfo.pts;\n  } else if (this.audioTrack) {\n    timelineStartPts = this.audioTrack.timelineStartInfo.pts;\n  }\n\n  event.tags.videoTags = this.videoTags;\n  event.tags.audioTags = this.audioTags;\n\n  // Translate caption PTS times into second offsets into the\n  // video timeline for the segment\n  for (i = 0; i < this.pendingCaptions.length; i++) {\n    caption = this.pendingCaptions[i];\n    caption.startTime = caption.startPts - timelineStartPts;\n    caption.startTime /= 90e3;\n    caption.endTime = caption.endPts - timelineStartPts;\n    caption.endTime /= 90e3;\n    event.captions.push(caption);\n  }\n\n  // Translate ID3 frame PTS times into second offsets into the\n  // video timeline for the segment\n  for (i = 0; i < this.pendingMetadata.length; i++) {\n    id3 = this.pendingMetadata[i];\n    id3.cueTime = id3.pts - timelineStartPts;\n    id3.cueTime /= 90e3;\n    event.metadata.push(id3);\n  }\n  // We add this to every single emitted segment even though we only need\n  // it for the first\n  event.metadata.dispatchType = this.metadataStream.dispatchType;\n\n  // Reset stream state\n  this.videoTrack = null;\n  this.audioTrack = null;\n  this.videoTags = [];\n  this.audioTags = [];\n  this.pendingCaptions.length = 0;\n  this.pendingMetadata.length = 0;\n  this.pendingTracks = 0;\n\n  // Emit the final segment\n  this.trigger('data', event);\n\n  this.trigger('done');\n};\n\n/**\n * An object that incrementally transmuxes MPEG2 Trasport Stream\n * chunks into an FLV.\n */\nTransmuxer = function(options) {\n  var\n    self = this,\n    videoTrack,\n    audioTrack,\n\n    packetStream, parseStream, elementaryStream,\n    adtsStream, h264Stream,\n    videoSegmentStream, audioSegmentStream, captionStream,\n    coalesceStream;\n\n  Transmuxer.prototype.init.call(this);\n\n  options = options || {};\n\n  // expose the metadata stream\n  this.metadataStream = new m2ts.MetadataStream();\n\n  options.metadataStream = this.metadataStream;\n\n  // set up the parsing pipeline\n  packetStream = new m2ts.TransportPacketStream();\n  parseStream = new m2ts.TransportParseStream();\n  elementaryStream = new m2ts.ElementaryStream();\n  adtsStream = new AdtsStream();\n  h264Stream = new H264Stream();\n  coalesceStream = new CoalesceStream(options);\n\n  // disassemble MPEG2-TS packets into elementary streams\n  packetStream\n    .pipe(parseStream)\n    .pipe(elementaryStream);\n\n  // !!THIS ORDER IS IMPORTANT!!\n  // demux the streams\n  elementaryStream\n    .pipe(h264Stream);\n  elementaryStream\n    .pipe(adtsStream);\n\n  elementaryStream\n    .pipe(this.metadataStream)\n    .pipe(coalesceStream);\n  // if CEA-708 parsing is available, hook up a caption stream\n  captionStream = new m2ts.CaptionStream();\n  h264Stream.pipe(captionStream)\n    .pipe(coalesceStream);\n\n  // hook up the segment streams once track metadata is delivered\n  elementaryStream.on('data', function(data) {\n    var i, videoTrack, audioTrack;\n\n    if (data.type === 'metadata') {\n      i = data.tracks.length;\n\n      // scan the tracks listed in the metadata\n      while (i--) {\n        if (data.tracks[i].type === 'video') {\n          videoTrack = data.tracks[i];\n        } else if (data.tracks[i].type === 'audio') {\n          audioTrack = data.tracks[i];\n        }\n      }\n\n      // hook up the video segment stream to the first track with h264 data\n      if (videoTrack && !videoSegmentStream) {\n        coalesceStream.numberOfTracks++;\n        videoSegmentStream = new VideoSegmentStream(videoTrack);\n\n        // Set up the final part of the video pipeline\n        h264Stream\n          .pipe(videoSegmentStream)\n          .pipe(coalesceStream);\n      }\n\n      if (audioTrack && !audioSegmentStream) {\n        // hook up the audio segment stream to the first track with aac data\n        coalesceStream.numberOfTracks++;\n        audioSegmentStream = new AudioSegmentStream(audioTrack);\n\n        // Set up the final part of the audio pipeline\n        adtsStream\n          .pipe(audioSegmentStream)\n          .pipe(coalesceStream);\n      }\n    }\n  });\n\n  // feed incoming data to the front of the parsing pipeline\n  this.push = function(data) {\n    packetStream.push(data);\n  };\n\n  // flush any buffered data\n  this.flush = function() {\n    // Start at the top of the pipeline and flush all pending work\n    packetStream.flush();\n  };\n\n  // Re-emit any data coming from the coalesce stream to the outside world\n  coalesceStream.on('data', function (event) {\n    self.trigger('data', event);\n  });\n\n  // Let the consumer know we have finished flushing the entire pipeline\n  coalesceStream.on('done', function () {\n    self.trigger('done');\n  });\n\n  // For information on the FLV format, see\n  // http://download.macromedia.com/f4v/video_file_format_spec_v10_1.pdf.\n  // Technically, this function returns the header and a metadata FLV tag\n  // if duration is greater than zero\n  // duration in seconds\n  // @return {object} the bytes of the FLV header as a Uint8Array\n  this.getFlvHeader = function(duration, audio, video) { // :ByteArray {\n    var\n      headBytes = new Uint8Array(3 + 1 + 1 + 4),\n      head = new DataView(headBytes.buffer),\n      metadata,\n      result,\n      metadataLength;\n\n    // default arguments\n    duration = duration || 0;\n    audio = audio === undefined? true : audio;\n    video = video === undefined? true : video;\n\n    // signature\n    head.setUint8(0, 0x46); // 'F'\n    head.setUint8(1, 0x4c); // 'L'\n    head.setUint8(2, 0x56); // 'V'\n\n    // version\n    head.setUint8(3, 0x01);\n\n    // flags\n    head.setUint8(4, (audio ? 0x04 : 0x00) | (video ? 0x01 : 0x00));\n\n    // data offset, should be 9 for FLV v1\n    head.setUint32(5, headBytes.byteLength);\n\n    // init the first FLV tag\n    if (duration <= 0) {\n      // no duration available so just write the first field of the first\n      // FLV tag\n      result = new Uint8Array(headBytes.byteLength + 4);\n      result.set(headBytes);\n      result.set([0, 0, 0, 0], headBytes.byteLength);\n      return result;\n    }\n\n    // write out the duration metadata tag\n    metadata = new FlvTag(FlvTag.METADATA_TAG);\n    metadata.pts = metadata.dts = 0;\n    metadata.writeMetaDataDouble(\"duration\", duration);\n    metadataLength = metadata.finalize().length;\n    result = new Uint8Array(headBytes.byteLength + metadataLength);\n    result.set(headBytes);\n    result.set(head.byteLength, metadataLength);\n\n    return result;\n  };\n};\nTransmuxer.prototype = new Stream();\n\n// forward compatibility\nmodule.exports = Transmuxer;\n\n},{\"../codecs/adts.js\":37,\"../codecs/h264\":38,\"../m2ts/m2ts.js\":46,\"../utils/stream.js\":55,\"./flv-tag.js\":40}],43:[function(require,module,exports){\n'use strict';\n\nvar muxjs = {\n  codecs: require('./codecs'),\n  mp4: require('./mp4'),\n  flv: require('./flv'),\n  mp2t: require('./m2ts'),\n};\nmodule.exports = muxjs;\n\n},{\"./codecs\":39,\"./flv\":41,\"./m2ts\":45,\"./mp4\":49}],44:[function(require,module,exports){\n/**\n * mux.js\n *\n * Copyright (c) 2015 Brightcove\n * All rights reserved.\n *\n * Reads in-band caption information from a video elementary\n * stream. Captions must follow the CEA-708 standard for injection\n * into an MPEG-2 transport streams.\n * @see https://en.wikipedia.org/wiki/CEA-708\n */\n\n'use strict';\n\n// -----------------\n// Link To Transport\n// -----------------\n\n// Supplemental enhancement information (SEI) NAL units have a\n// payload type field to indicate how they are to be\n// interpreted. CEAS-708 caption content is always transmitted with\n// payload type 0x04.\nvar USER_DATA_REGISTERED_ITU_T_T35 = 4,\n    RBSP_TRAILING_BITS = 128,\n    Stream = require('../utils/stream');\n\n/**\n  * Parse a supplemental enhancement information (SEI) NAL unit.\n  * Stops parsing once a message of type ITU T T35 has been found.\n  *\n  * @param bytes {Uint8Array} the bytes of a SEI NAL unit\n  * @return {object} the parsed SEI payload\n  * @see Rec. ITU-T H.264, 7.3.2.3.1\n  */\nvar parseSei = function(bytes) {\n  var\n    i = 0,\n    result = {\n      payloadType: -1,\n      payloadSize: 0,\n    },\n    payloadType = 0,\n    payloadSize = 0;\n\n  // go through the sei_rbsp parsing each each individual sei_message\n  while (i < bytes.byteLength) {\n    // stop once we have hit the end of the sei_rbsp\n    if (bytes[i] === RBSP_TRAILING_BITS) {\n      break;\n    }\n\n    // Parse payload type\n    while (bytes[i] === 0xFF) {\n      payloadType += 255;\n      i++;\n    }\n    payloadType += bytes[i++];\n\n    // Parse payload size\n    while (bytes[i] === 0xFF) {\n      payloadSize += 255;\n      i++;\n    }\n    payloadSize += bytes[i++];\n\n    // this sei_message is a 608/708 caption so save it and break\n    // there can only ever be one caption message in a frame's sei\n    if (!result.payload && payloadType === USER_DATA_REGISTERED_ITU_T_T35) {\n      result.payloadType = payloadType;\n      result.payloadSize = payloadSize;\n      result.payload = bytes.subarray(i, i + payloadSize);\n      break;\n    }\n\n    // skip the payload and parse the next message\n    i += payloadSize;\n    payloadType = 0;\n    payloadSize = 0;\n  }\n\n  return result;\n};\n\n// see ANSI/SCTE 128-1 (2013), section 8.1\nvar parseUserData = function(sei) {\n  // itu_t_t35_contry_code must be 181 (United States) for\n  // captions\n  if (sei.payload[0] !== 181) {\n    return null;\n  }\n\n  // itu_t_t35_provider_code should be 49 (ATSC) for captions\n  if (((sei.payload[1] << 8) | sei.payload[2]) !== 49) {\n    return null;\n  }\n\n  // the user_identifier should be \"GA94\" to indicate ATSC1 data\n  if (String.fromCharCode(sei.payload[3],\n                          sei.payload[4],\n                          sei.payload[5],\n                          sei.payload[6]) !== 'GA94') {\n    return null;\n  }\n\n  // finally, user_data_type_code should be 0x03 for caption data\n  if (sei.payload[7] !== 0x03) {\n    return null;\n  }\n\n  // return the user_data_type_structure and strip the trailing\n  // marker bits\n  return sei.payload.subarray(8, sei.payload.length - 1);\n};\n\n// see CEA-708-D, section 4.4\nvar parseCaptionPackets = function(pts, userData) {\n  var results = [], i, count, offset, data;\n\n  // if this is just filler, return immediately\n  if (!(userData[0] & 0x40)) {\n    return results;\n  }\n\n  // parse out the cc_data_1 and cc_data_2 fields\n  count = userData[0] & 0x1f;\n  for (i = 0; i < count; i++) {\n    offset = i * 3;\n    data = {\n      type: userData[offset + 2] & 0x03,\n      pts: pts\n    };\n\n    // capture cc data when cc_valid is 1\n    if (userData[offset + 2] & 0x04) {\n      data.ccData = (userData[offset + 3] << 8) | userData[offset + 4];\n      results.push(data);\n    }\n  }\n  return results;\n};\n\nvar CaptionStream = function() {\n  var self = this;\n  CaptionStream.prototype.init.call(this);\n\n  this.captionPackets_ = [];\n\n  this.field1_ = new Cea608Stream();\n\n  // forward data and done events from field1_ to this CaptionStream\n  this.field1_.on('data', this.trigger.bind(this, 'data'));\n  this.field1_.on('done', this.trigger.bind(this, 'done'));\n};\nCaptionStream.prototype = new Stream();\nCaptionStream.prototype.push = function(event) {\n  var sei, userData, captionPackets;\n\n  // only examine SEI NALs\n  if (event.nalUnitType !== 'sei_rbsp') {\n    return;\n  }\n\n  // parse the sei\n  sei = parseSei(event.escapedRBSP);\n\n  // ignore everything but user_data_registered_itu_t_t35\n  if (sei.payloadType !== USER_DATA_REGISTERED_ITU_T_T35) {\n    return;\n  }\n\n  // parse out the user data payload\n  userData = parseUserData(sei);\n\n  // ignore unrecognized userData\n  if (!userData) {\n    return;\n  }\n\n  // parse out CC data packets and save them for later\n  this.captionPackets_ = this.captionPackets_.concat(parseCaptionPackets(event.pts, userData));\n};\n\nCaptionStream.prototype.flush = function () {\n  // make sure we actually parsed captions before proceeding\n  if (!this.captionPackets_.length) {\n    this.field1_.flush();\n    return;\n  }\n\n  // sort caption byte-pairs based on their PTS values\n  this.captionPackets_.sort(function(a, b) {\n    return a.pts - b.pts;\n  });\n\n  // Push each caption into Cea608Stream\n  this.captionPackets_.forEach(this.field1_.push, this.field1_);\n\n  this.captionPackets_.length = 0;\n  this.field1_.flush();\n  return;\n};\n// ----------------------\n// Session to Application\n// ----------------------\n\nvar BASIC_CHARACTER_TRANSLATION = {\n  0x2a: 0xe1,\n  0x5c: 0xe9,\n  0x5e: 0xed,\n  0x5f: 0xf3,\n  0x60: 0xfa,\n  0x7b: 0xe7,\n  0x7c: 0xf7,\n  0x7d: 0xd1,\n  0x7e: 0xf1,\n  0x7f: 0x2588\n};\n\nvar getCharFromCode = function(code) {\n  if(code === null) {\n    return '';\n  }\n  code = BASIC_CHARACTER_TRANSLATION[code] || code;\n  return String.fromCharCode(code);\n};\n\n// Constants for the byte codes recognized by Cea608Stream. This\n// list is not exhaustive. For a more comprehensive listing and\n// semantics see\n// http://www.gpo.gov/fdsys/pkg/CFR-2010-title47-vol1/pdf/CFR-2010-title47-vol1-sec15-119.pdf\nvar PADDING                    = 0x0000,\n\n    // Pop-on Mode\n    RESUME_CAPTION_LOADING     = 0x1420,\n    END_OF_CAPTION             = 0x142f,\n\n    // Roll-up Mode\n    ROLL_UP_2_ROWS             = 0x1425,\n    ROLL_UP_3_ROWS             = 0x1426,\n    ROLL_UP_4_ROWS             = 0x1427,\n    RESUME_DIRECT_CAPTIONING   = 0x1429,\n    CARRIAGE_RETURN            = 0x142d,\n    // Erasure\n    BACKSPACE                  = 0x1421,\n    ERASE_DISPLAYED_MEMORY     = 0x142c,\n    ERASE_NON_DISPLAYED_MEMORY = 0x142e;\n\n// the index of the last row in a CEA-608 display buffer\nvar BOTTOM_ROW = 14;\n// CEA-608 captions are rendered onto a 34x15 matrix of character\n// cells. The \"bottom\" row is the last element in the outer array.\nvar createDisplayBuffer = function() {\n  var result = [], i = BOTTOM_ROW + 1;\n  while (i--) {\n    result.push('');\n  }\n  return result;\n};\n\nvar Cea608Stream = function() {\n  Cea608Stream.prototype.init.call(this);\n\n  this.mode_ = 'popOn';\n  // When in roll-up mode, the index of the last row that will\n  // actually display captions. If a caption is shifted to a row\n  // with a lower index than this, it is cleared from the display\n  // buffer\n  this.topRow_ = 0;\n  this.startPts_ = 0;\n  this.displayed_ = createDisplayBuffer();\n  this.nonDisplayed_ = createDisplayBuffer();\n  this.lastControlCode_ = null;\n\n  this.push = function(packet) {\n    // Ignore other channels\n    if (packet.type !== 0) {\n      return;\n    }\n    var data, swap, char0, char1;\n    // remove the parity bits\n    data = packet.ccData & 0x7f7f;\n\n    // ignore duplicate control codes\n    if (data === this.lastControlCode_) {\n      this.lastControlCode_ = null;\n      return;\n    }\n\n    // Store control codes\n    if ((data & 0xf000) === 0x1000) {\n      this.lastControlCode_ = data;\n    } else {\n      this.lastControlCode_ = null;\n    }\n\n    switch (data) {\n    case PADDING:\n      break;\n    case RESUME_CAPTION_LOADING:\n      this.mode_ = 'popOn';\n      break;\n    case END_OF_CAPTION:\n      // if a caption was being displayed, it's gone now\n      this.flushDisplayed(packet.pts);\n\n      // flip memory\n      swap = this.displayed_;\n      this.displayed_ = this.nonDisplayed_;\n      this.nonDisplayed_ = swap;\n\n      // start measuring the time to display the caption\n      this.startPts_ = packet.pts;\n      break;\n\n    case ROLL_UP_2_ROWS:\n      this.topRow_ = BOTTOM_ROW - 1;\n      this.mode_ = 'rollUp';\n      break;\n    case ROLL_UP_3_ROWS:\n      this.topRow_ = BOTTOM_ROW - 2;\n      this.mode_ = 'rollUp';\n      break;\n    case ROLL_UP_4_ROWS:\n      this.topRow_ = BOTTOM_ROW - 3;\n      this.mode_ = 'rollUp';\n      break;\n    case CARRIAGE_RETURN:\n      this.flushDisplayed(packet.pts);\n      this.shiftRowsUp_();\n      this.startPts_ = packet.pts;\n      break;\n\n    case BACKSPACE:\n      if (this.mode_ === 'popOn') {\n        this.nonDisplayed_[BOTTOM_ROW] = this.nonDisplayed_[BOTTOM_ROW].slice(0, -1);\n      } else {\n        this.displayed_[BOTTOM_ROW] = this.displayed_[BOTTOM_ROW].slice(0, -1);\n      }\n      break;\n    case ERASE_DISPLAYED_MEMORY:\n      this.flushDisplayed(packet.pts);\n      this.displayed_ = createDisplayBuffer();\n      break;\n    case ERASE_NON_DISPLAYED_MEMORY:\n      this.nonDisplayed_ = createDisplayBuffer();\n      break;\n    default:\n      char0 = data >>> 8;\n      char1 = data & 0xff;\n\n      // Look for a Channel 1 Preamble Address Code\n      if (char0 >= 0x10 && char0 <= 0x17 &&\n          char1 >= 0x40 && char1 <= 0x7F &&\n          (char0 !== 0x10 || char1 < 0x60)) {\n        // Follow Safari's lead and replace the PAC with a space\n        char0 = 0x20;\n        // we only want one space so make the second character null\n        // which will get become '' in getCharFromCode\n        char1 = null;\n      }\n\n      // Look for special character sets\n      if ((char0 === 0x11 || char0 === 0x19) &&\n          (char1 >= 0x30 && char1 <= 0x3F)) {\n        // Put in eigth note and space\n        char0 = 0x266A;\n        char1 = '';\n      }\n\n      // ignore unsupported control codes\n      if ((char0 & 0xf0) === 0x10) {\n        return;\n      }\n\n      // character handling is dependent on the current mode\n      this[this.mode_](packet.pts, char0, char1);\n      break;\n    }\n  };\n};\nCea608Stream.prototype = new Stream();\n// Trigger a cue point that captures the current state of the\n// display buffer\nCea608Stream.prototype.flushDisplayed = function(pts) {\n  var content = this.displayed_\n    // remove spaces from the start and end of the string\n    .map(function(row) { return row.trim(); })\n    // remove empty rows\n    .filter(function(row) { return row.length; })\n    // combine all text rows to display in one cue\n    .join('\\n');\n\n  if (content.length) {\n    this.trigger('data', {\n      startPts: this.startPts_,\n      endPts: pts,\n      text: content\n    });\n  }\n};\n\n// Mode Implementations\nCea608Stream.prototype.popOn = function(pts, char0, char1) {\n  var baseRow = this.nonDisplayed_[BOTTOM_ROW];\n\n  // buffer characters\n  baseRow += getCharFromCode(char0);\n  baseRow += getCharFromCode(char1);\n  this.nonDisplayed_[BOTTOM_ROW] = baseRow;\n};\n\nCea608Stream.prototype.rollUp = function(pts, char0, char1) {\n  var baseRow = this.displayed_[BOTTOM_ROW];\n  if (baseRow === '') {\n    // we're starting to buffer new display input, so flush out the\n    // current display\n    this.flushDisplayed(pts);\n\n    this.startPts_ = pts;\n  }\n\n  baseRow += getCharFromCode(char0);\n  baseRow += getCharFromCode(char1);\n\n  this.displayed_[BOTTOM_ROW] = baseRow;\n};\nCea608Stream.prototype.shiftRowsUp_ = function() {\n  var i;\n  // clear out inactive rows\n  for (i = 0; i < this.topRow_; i++) {\n    this.displayed_[i] = '';\n  }\n  // shift displayed rows up\n  for (i = this.topRow_; i < BOTTOM_ROW; i++) {\n    this.displayed_[i] = this.displayed_[i + 1];\n  }\n  // clear out the bottom row\n  this.displayed_[BOTTOM_ROW] = '';\n};\n\n// exports\nmodule.exports = {\n  CaptionStream: CaptionStream,\n  Cea608Stream: Cea608Stream,\n};\n\n\n},{\"../utils/stream\":55}],45:[function(require,module,exports){\nmodule.exports = require('./m2ts');\n\n},{\"./m2ts\":46}],46:[function(require,module,exports){\n/**\n * mux.js\n *\n * Copyright (c) 2015 Brightcove\n * All rights reserved.\n *\n * A stream-based mp2t to mp4 converter. This utility can be used to\n * deliver mp4s to a SourceBuffer on platforms that support native\n * Media Source Extensions.\n */\n'use strict';\nvar Stream = require('../utils/stream.js'),\n  CaptionStream = require('./caption-stream'),\n  StreamTypes = require('./stream-types');\n\nvar Stream = require('../utils/stream.js');\nvar m2tsStreamTypes = require('./stream-types.js');\n\n// object types\nvar\n  TransportPacketStream, TransportParseStream, ElementaryStream,\n  AacStream, H264Stream, NalByteStream;\n\n// constants\nvar\n  MP2T_PACKET_LENGTH = 188, // bytes\n  SYNC_BYTE = 0x47,\n\n/**\n * Splits an incoming stream of binary data into MPEG-2 Transport\n * Stream packets.\n */\nTransportPacketStream = function() {\n  var\n    buffer = new Uint8Array(MP2T_PACKET_LENGTH),\n    bytesInBuffer = 0;\n\n  TransportPacketStream.prototype.init.call(this);\n\n   // Deliver new bytes to the stream.\n\n  this.push = function(bytes) {\n    var\n      i = 0,\n      startIndex = 0,\n      endIndex = MP2T_PACKET_LENGTH,\n      everything;\n\n    // If there are bytes remaining from the last segment, prepend them to the\n    // bytes that were pushed in\n    if (bytesInBuffer) {\n      everything = new Uint8Array(bytes.byteLength + bytesInBuffer);\n      everything.set(buffer.subarray(0, bytesInBuffer));\n      everything.set(bytes, bytesInBuffer);\n      bytesInBuffer = 0;\n    } else {\n      everything = bytes;\n    }\n\n    // While we have enough data for a packet\n    while (endIndex < everything.byteLength) {\n      // Look for a pair of start and end sync bytes in the data..\n      if (everything[startIndex] === SYNC_BYTE && everything[endIndex] === SYNC_BYTE) {\n        // We found a packet so emit it and jump one whole packet forward in\n        // the stream\n        this.trigger('data', everything.subarray(startIndex, endIndex));\n        startIndex += MP2T_PACKET_LENGTH;\n        endIndex += MP2T_PACKET_LENGTH;\n        continue;\n      }\n      // If we get here, we have somehow become de-synchronized and we need to step\n      // forward one byte at a time until we find a pair of sync bytes that denote\n      // a packet\n      startIndex++;\n      endIndex++;\n    }\n\n    // If there was some data left over at the end of the segment that couldn't\n    // possibly be a whole packet, keep it because it might be the start of a packet\n    // that continues in the next segment\n    if (startIndex < everything.byteLength) {\n      buffer.set(everything.subarray(startIndex), 0);\n      bytesInBuffer = everything.byteLength - startIndex;\n    }\n  };\n\n  this.flush = function () {\n    // If the buffer contains a whole packet when we are being flushed, emit it\n    // and empty the buffer. Otherwise hold onto the data because it may be\n    // important for decoding the next segment\n    if (bytesInBuffer === MP2T_PACKET_LENGTH && buffer[0] === SYNC_BYTE) {\n      this.trigger('data', buffer);\n      bytesInBuffer = 0;\n    }\n    this.trigger('done');\n  };\n};\nTransportPacketStream.prototype = new Stream();\n\n/**\n * Accepts an MP2T TransportPacketStream and emits data events with parsed\n * forms of the individual transport stream packets.\n */\nTransportParseStream = function() {\n  var parsePsi, parsePat, parsePmt, parsePes, self;\n  TransportParseStream.prototype.init.call(this);\n  self = this;\n\n  this.packetsWaitingForPmt = [];\n  this.programMapTable = undefined;\n\n  parsePsi = function(payload, psi) {\n    var offset = 0;\n\n    // PSI packets may be split into multiple sections and those\n    // sections may be split into multiple packets. If a PSI\n    // section starts in this packet, the payload_unit_start_indicator\n    // will be true and the first byte of the payload will indicate\n    // the offset from the current position to the start of the\n    // section.\n    if (psi.payloadUnitStartIndicator) {\n      offset += payload[offset] + 1;\n    }\n\n    if (psi.type === 'pat') {\n      parsePat(payload.subarray(offset), psi);\n    } else {\n      parsePmt(payload.subarray(offset), psi);\n    }\n  };\n\n  parsePat = function(payload, pat) {\n    pat.section_number = payload[7];\n    pat.last_section_number = payload[8];\n\n    // skip the PSI header and parse the first PMT entry\n    self.pmtPid = (payload[10] & 0x1F) << 8 | payload[11];\n    pat.pmtPid = self.pmtPid;\n  };\n\n  /**\n   * Parse out the relevant fields of a Program Map Table (PMT).\n   * @param payload {Uint8Array} the PMT-specific portion of an MP2T\n   * packet. The first byte in this array should be the table_id\n   * field.\n   * @param pmt {object} the object that should be decorated with\n   * fields parsed from the PMT.\n   */\n  parsePmt = function(payload, pmt) {\n    var sectionLength, tableEnd, programInfoLength, offset;\n\n    // PMTs can be sent ahead of the time when they should actually\n    // take effect. We don't believe this should ever be the case\n    // for HLS but we'll ignore \"forward\" PMT declarations if we see\n    // them. Future PMT declarations have the current_next_indicator\n    // set to zero.\n    if (!(payload[5] & 0x01)) {\n      return;\n    }\n\n    // overwrite any existing program map table\n    self.programMapTable = {};\n\n    // the mapping table ends at the end of the current section\n    sectionLength = (payload[1] & 0x0f) << 8 | payload[2];\n    tableEnd = 3 + sectionLength - 4;\n\n    // to determine where the table is, we have to figure out how\n    // long the program info descriptors are\n    programInfoLength = (payload[10] & 0x0f) << 8 | payload[11];\n\n    // advance the offset to the first entry in the mapping table\n    offset = 12 + programInfoLength;\n    while (offset < tableEnd) {\n      // add an entry that maps the elementary_pid to the stream_type\n      self.programMapTable[(payload[offset + 1] & 0x1F) << 8 | payload[offset + 2]] = payload[offset];\n\n      // move to the next table entry\n      // skip past the elementary stream descriptors, if present\n      offset += ((payload[offset + 3] & 0x0F) << 8 | payload[offset + 4]) + 5;\n    }\n\n    // record the map on the packet as well\n    pmt.programMapTable = self.programMapTable;\n\n    // if there are any packets waiting for a PMT to be found, process them now\n    while (self.packetsWaitingForPmt.length) {\n      self.processPes_.apply(self, self.packetsWaitingForPmt.shift());\n    }\n  };\n\n  /**\n   * Deliver a new MP2T packet to the stream.\n   */\n  this.push = function(packet) {\n    var\n      result = {},\n      offset = 4;\n\n    result.payloadUnitStartIndicator = !!(packet[1] & 0x40);\n\n    // pid is a 13-bit field starting at the last bit of packet[1]\n    result.pid = packet[1] & 0x1f;\n    result.pid <<= 8;\n    result.pid |= packet[2];\n\n    // if an adaption field is present, its length is specified by the\n    // fifth byte of the TS packet header. The adaptation field is\n    // used to add stuffing to PES packets that don't fill a complete\n    // TS packet, and to specify some forms of timing and control data\n    // that we do not currently use.\n    if (((packet[3] & 0x30) >>> 4) > 0x01) {\n      offset += packet[offset] + 1;\n    }\n\n    // parse the rest of the packet based on the type\n    if (result.pid === 0) {\n      result.type = 'pat';\n      parsePsi(packet.subarray(offset), result);\n      this.trigger('data', result);\n    } else if (result.pid === this.pmtPid) {\n      result.type = 'pmt';\n      parsePsi(packet.subarray(offset), result);\n      this.trigger('data', result);\n    } else if (this.programMapTable === undefined) {\n      // When we have not seen a PMT yet, defer further processing of\n      // PES packets until one has been parsed\n      this.packetsWaitingForPmt.push([packet, offset, result]);\n    } else {\n      this.processPes_(packet, offset, result);\n    }\n  };\n\n  this.processPes_ = function (packet, offset, result) {\n    result.streamType = this.programMapTable[result.pid];\n    result.type = 'pes';\n    result.data = packet.subarray(offset);\n\n    this.trigger('data', result);\n  };\n\n};\nTransportParseStream.prototype = new Stream();\nTransportParseStream.STREAM_TYPES  = {\n  h264: 0x1b,\n  adts: 0x0f\n};\n\n/**\n * Reconsistutes program elementary stream (PES) packets from parsed\n * transport stream packets. That is, if you pipe an\n * mp2t.TransportParseStream into a mp2t.ElementaryStream, the output\n * events will be events which capture the bytes for individual PES\n * packets plus relevant metadata that has been extracted from the\n * container.\n */\nElementaryStream = function() {\n  var\n    // PES packet fragments\n    video = {\n      data: [],\n      size: 0\n    },\n    audio = {\n      data: [],\n      size: 0\n    },\n    timedMetadata = {\n      data: [],\n      size: 0\n    },\n    parsePes = function(payload, pes) {\n      var ptsDtsFlags;\n\n      // find out if this packets starts a new keyframe\n      pes.dataAlignmentIndicator = (payload[6] & 0x04) !== 0;\n      // PES packets may be annotated with a PTS value, or a PTS value\n      // and a DTS value. Determine what combination of values is\n      // available to work with.\n      ptsDtsFlags = payload[7];\n\n      // PTS and DTS are normally stored as a 33-bit number.  Javascript\n      // performs all bitwise operations on 32-bit integers but javascript\n      // supports a much greater range (52-bits) of integer using standard\n      // mathematical operations.\n      // We construct a 31-bit value using bitwise operators over the 31\n      // most significant bits and then multiply by 4 (equal to a left-shift\n      // of 2) before we add the final 2 least significant bits of the\n      // timestamp (equal to an OR.)\n      if (ptsDtsFlags & 0xC0) {\n        // the PTS and DTS are not written out directly. For information\n        // on how they are encoded, see\n        // http://dvd.sourceforge.net/dvdinfo/pes-hdr.html\n        pes.pts = (payload[9] & 0x0E) << 27\n          | (payload[10] & 0xFF) << 20\n          | (payload[11] & 0xFE) << 12\n          | (payload[12] & 0xFF) <<  5\n          | (payload[13] & 0xFE) >>>  3;\n        pes.pts *= 4; // Left shift by 2\n        pes.pts += (payload[13] & 0x06) >>> 1; // OR by the two LSBs\n        pes.dts = pes.pts;\n        if (ptsDtsFlags & 0x40) {\n          pes.dts = (payload[14] & 0x0E ) << 27\n            | (payload[15] & 0xFF ) << 20\n            | (payload[16] & 0xFE ) << 12\n            | (payload[17] & 0xFF ) << 5\n            | (payload[18] & 0xFE ) >>> 3;\n          pes.dts *= 4; // Left shift by 2\n          pes.dts += (payload[18] & 0x06) >>> 1; // OR by the two LSBs\n        }\n      }\n\n      // the data section starts immediately after the PES header.\n      // pes_header_data_length specifies the number of header bytes\n      // that follow the last byte of the field.\n      pes.data = payload.subarray(9 + payload[8]);\n    },\n    flushStream = function(stream, type) {\n      var\n        packetData = new Uint8Array(stream.size),\n        event = {\n          type: type\n        },\n        i = 0,\n        fragment;\n\n      // do nothing if there is no buffered data\n      if (!stream.data.length) {\n        return;\n      }\n      event.trackId = stream.data[0].pid;\n\n      // reassemble the packet\n      while (stream.data.length) {\n        fragment = stream.data.shift();\n\n        packetData.set(fragment.data, i);\n        i += fragment.data.byteLength;\n      }\n\n      // parse assembled packet's PES header\n      parsePes(packetData, event);\n\n      stream.size = 0;\n\n      self.trigger('data', event);\n    },\n    self;\n\n  ElementaryStream.prototype.init.call(this);\n  self = this;\n\n  this.push = function(data) {\n    ({\n      pat: function() {\n        // we have to wait for the PMT to arrive as well before we\n        // have any meaningful metadata\n      },\n      pes: function() {\n        var stream, streamType;\n\n        switch (data.streamType) {\n        case StreamTypes.H264_STREAM_TYPE:\n        case m2tsStreamTypes.H264_STREAM_TYPE:\n          stream = video;\n          streamType = 'video';\n          break;\n        case StreamTypes.ADTS_STREAM_TYPE:\n          stream = audio;\n          streamType = 'audio';\n          break;\n        case StreamTypes.METADATA_STREAM_TYPE:\n          stream = timedMetadata;\n          streamType = 'timed-metadata';\n          break;\n        default:\n          // ignore unknown stream types\n          return;\n        }\n\n        // if a new packet is starting, we can flush the completed\n        // packet\n        if (data.payloadUnitStartIndicator) {\n          flushStream(stream, streamType);\n        }\n\n        // buffer this fragment until we are sure we've received the\n        // complete payload\n        stream.data.push(data);\n        stream.size += data.data.byteLength;\n      },\n      pmt: function() {\n        var\n          event = {\n            type: 'metadata',\n            tracks: []\n          },\n          programMapTable = data.programMapTable,\n          k,\n          track;\n\n        // translate streams to tracks\n        for (k in programMapTable) {\n          if (programMapTable.hasOwnProperty(k)) {\n            track = {\n              timelineStartInfo: {\n                baseMediaDecodeTime: 0\n              }\n            };\n            track.id = +k;\n            if (programMapTable[k] === m2tsStreamTypes.H264_STREAM_TYPE) {\n              track.codec = 'avc';\n              track.type = 'video';\n            } else if (programMapTable[k] === m2tsStreamTypes.ADTS_STREAM_TYPE) {\n              track.codec = 'adts';\n              track.type = 'audio';\n            }\n            event.tracks.push(track);\n          }\n        }\n        self.trigger('data', event);\n      }\n    })[data.type]();\n  };\n\n  /**\n   * Flush any remaining input. Video PES packets may be of variable\n   * length. Normally, the start of a new video packet can trigger the\n   * finalization of the previous packet. That is not possible if no\n   * more video is forthcoming, however. In that case, some other\n   * mechanism (like the end of the file) has to be employed. When it is\n   * clear that no additional data is forthcoming, calling this method\n   * will flush the buffered packets.\n   */\n  this.flush = function() {\n    // !!THIS ORDER IS IMPORTANT!!\n    // video first then audio\n    flushStream(video, 'video');\n    flushStream(audio, 'audio');\n    flushStream(timedMetadata, 'timed-metadata');\n    this.trigger('done');\n  };\n};\nElementaryStream.prototype = new Stream();\n\nvar m2ts = {\n  PAT_PID: 0x0000,\n  MP2T_PACKET_LENGTH: MP2T_PACKET_LENGTH,\n  TransportPacketStream: TransportPacketStream,\n  TransportParseStream: TransportParseStream,\n  ElementaryStream: ElementaryStream,\n  CaptionStream: CaptionStream.CaptionStream,\n  Cea608Stream: CaptionStream.Cea608Stream,\n  MetadataStream: require('./metadata-stream'),\n};\n\nfor (var type in StreamTypes) {\n  if (StreamTypes.hasOwnProperty(type)) {\n    m2ts[type] = StreamTypes[type];\n  }\n}\n\nmodule.exports = m2ts;\n\n},{\"../utils/stream.js\":55,\"./caption-stream\":44,\"./metadata-stream\":47,\"./stream-types\":48,\"./stream-types.js\":48}],47:[function(require,module,exports){\n/**\n * Accepts program elementary stream (PES) data events and parses out\n * ID3 metadata from them, if present.\n * @see http://id3.org/id3v2.3.0\n */\n'use strict';\nvar\n  Stream = require('../utils/stream'),\n  StreamTypes = require('./stream-types'),\n  // return a percent-encoded representation of the specified byte range\n  // @see http://en.wikipedia.org/wiki/Percent-encoding\n  percentEncode = function(bytes, start, end) {\n    var i, result = '';\n    for (i = start; i < end; i++) {\n      result += '%' + ('00' + bytes[i].toString(16)).slice(-2);\n    }\n    return result;\n  },\n  // return the string representation of the specified byte range,\n  // interpreted as UTf-8.\n  parseUtf8 = function(bytes, start, end) {\n    return decodeURIComponent(percentEncode(bytes, start, end));\n  },\n  // return the string representation of the specified byte range,\n  // interpreted as ISO-8859-1.\n  parseIso88591 = function(bytes, start, end) {\n    return unescape(percentEncode(bytes, start, end)); // jshint ignore:line\n  },\n  parseSyncSafeInteger = function (data) {\n    return (data[0] << 21) |\n            (data[1] << 14) |\n            (data[2] << 7) |\n            (data[3]);\n  },\n  tagParsers = {\n    'TXXX': function(tag) {\n      var i;\n      if (tag.data[0] !== 3) {\n        // ignore frames with unrecognized character encodings\n        return;\n      }\n\n      for (i = 1; i < tag.data.length; i++) {\n        if (tag.data[i] === 0) {\n          // parse the text fields\n          tag.description = parseUtf8(tag.data, 1, i);\n          // do not include the null terminator in the tag value\n          tag.value = parseUtf8(tag.data, i + 1, tag.data.length - 1);\n          break;\n        }\n      }\n      tag.data = tag.value;\n    },\n    'WXXX': function(tag) {\n      var i;\n      if (tag.data[0] !== 3) {\n        // ignore frames with unrecognized character encodings\n        return;\n      }\n\n      for (i = 1; i < tag.data.length; i++) {\n        if (tag.data[i] === 0) {\n          // parse the description and URL fields\n          tag.description = parseUtf8(tag.data, 1, i);\n          tag.url = parseUtf8(tag.data, i + 1, tag.data.length);\n          break;\n        }\n      }\n    },\n    'PRIV': function(tag) {\n      var i;\n\n      for (i = 0; i < tag.data.length; i++) {\n        if (tag.data[i] === 0) {\n          // parse the description and URL fields\n          tag.owner = parseIso88591(tag.data, 0, i);\n          break;\n        }\n      }\n      tag.privateData = tag.data.subarray(i + 1);\n      tag.data = tag.privateData;\n    }\n  },\n  MetadataStream;\n\nMetadataStream = function(options) {\n  var\n    settings = {\n      debug: !!(options && options.debug),\n\n      // the bytes of the program-level descriptor field in MP2T\n      // see ISO/IEC 13818-1:2013 (E), section 2.6 \"Program and\n      // program element descriptors\"\n      descriptor: options && options.descriptor\n    },\n    // the total size in bytes of the ID3 tag being parsed\n    tagSize = 0,\n    // tag data that is not complete enough to be parsed\n    buffer = [],\n    // the total number of bytes currently in the buffer\n    bufferSize = 0,\n    i;\n\n  MetadataStream.prototype.init.call(this);\n\n  // calculate the text track in-band metadata track dispatch type\n  // https://html.spec.whatwg.org/multipage/embedded-content.html#steps-to-expose-a-media-resource-specific-text-track\n  this.dispatchType = StreamTypes.METADATA_STREAM_TYPE.toString(16);\n  if (settings.descriptor) {\n    for (i = 0; i < settings.descriptor.length; i++) {\n      this.dispatchType += ('00' + settings.descriptor[i].toString(16)).slice(-2);\n    }\n  }\n\n  this.push = function(chunk) {\n    var tag, frameStart, frameSize, frame, i, frameHeader;\n    if (chunk.type !== 'timed-metadata') {\n      return;\n    }\n\n    // if data_alignment_indicator is set in the PES header,\n    // we must have the start of a new ID3 tag. Assume anything\n    // remaining in the buffer was malformed and throw it out\n    if (chunk.dataAlignmentIndicator) {\n      bufferSize = 0;\n      buffer.length = 0;\n    }\n\n    // ignore events that don't look like ID3 data\n    if (buffer.length === 0 &&\n        (chunk.data.length < 10 ||\n          chunk.data[0] !== 'I'.charCodeAt(0) ||\n          chunk.data[1] !== 'D'.charCodeAt(0) ||\n          chunk.data[2] !== '3'.charCodeAt(0))) {\n      if (settings.debug) {\n        console.log('Skipping unrecognized metadata packet');\n      }\n      return;\n    }\n\n    // add this chunk to the data we've collected so far\n\n    buffer.push(chunk);\n    bufferSize += chunk.data.byteLength;\n\n    // grab the size of the entire frame from the ID3 header\n    if (buffer.length === 1) {\n      // the frame size is transmitted as a 28-bit integer in the\n      // last four bytes of the ID3 header.\n      // The most significant bit of each byte is dropped and the\n      // results concatenated to recover the actual value.\n      tagSize = parseSyncSafeInteger(chunk.data.subarray(6, 10));\n\n      // ID3 reports the tag size excluding the header but it's more\n      // convenient for our comparisons to include it\n      tagSize += 10;\n    }\n\n    // if the entire frame has not arrived, wait for more data\n    if (bufferSize < tagSize) {\n      return;\n    }\n\n    // collect the entire frame so it can be parsed\n    tag = {\n      data: new Uint8Array(tagSize),\n      frames: [],\n      pts: buffer[0].pts,\n      dts: buffer[0].dts\n    };\n    for (i = 0; i < tagSize;) {\n      tag.data.set(buffer[0].data.subarray(0, tagSize - i), i);\n      i += buffer[0].data.byteLength;\n      bufferSize -= buffer[0].data.byteLength;\n      buffer.shift();\n    }\n\n    // find the start of the first frame and the end of the tag\n    frameStart = 10;\n    if (tag.data[5] & 0x40) {\n      // advance the frame start past the extended header\n      frameStart += 4; // header size field\n      frameStart += parseSyncSafeInteger(tag.data.subarray(10, 14));\n\n      // clip any padding off the end\n      tagSize -= parseSyncSafeInteger(tag.data.subarray(16, 20));\n    }\n\n    // parse one or more ID3 frames\n    // http://id3.org/id3v2.3.0#ID3v2_frame_overview\n    do {\n      // determine the number of bytes in this frame\n      frameSize = parseSyncSafeInteger(tag.data.subarray(frameStart + 4, frameStart + 8));\n      if (frameSize < 1) {\n        return console.log('Malformed ID3 frame encountered. Skipping metadata parsing.');\n      }\n      frameHeader = String.fromCharCode(tag.data[frameStart],\n                                        tag.data[frameStart + 1],\n                                        tag.data[frameStart + 2],\n                                        tag.data[frameStart + 3]);\n\n\n      frame = {\n        id: frameHeader,\n        data: tag.data.subarray(frameStart + 10, frameStart + frameSize + 10)\n      };\n      frame.key = frame.id;\n      if (tagParsers[frame.id]) {\n        tagParsers[frame.id](frame);\n        if (frame.owner === 'com.apple.streaming.transportStreamTimestamp') {\n          var\n            d = frame.data,\n            size = ((d[3] & 0x01)  << 30) |\n                   (d[4]  << 22) |\n                   (d[5] << 14) |\n                   (d[6] << 6) |\n                   (d[7] >>> 2);\n\n          size *= 4;\n          size += d[7] & 0x03;\n          frame.timeStamp = size;\n          this.trigger('timestamp', frame);\n        }\n      }\n      tag.frames.push(frame);\n\n      frameStart += 10; // advance past the frame header\n      frameStart += frameSize; // advance past the frame body\n    } while (frameStart < tagSize);\n    this.trigger('data', tag);\n  };\n};\nMetadataStream.prototype = new Stream();\n\nmodule.exports = MetadataStream;\n\n},{\"../utils/stream\":55,\"./stream-types\":48}],48:[function(require,module,exports){\n'use strict';\n\nmodule.exports = {\n  H264_STREAM_TYPE: 0x1B,\n  ADTS_STREAM_TYPE: 0x0F,\n  METADATA_STREAM_TYPE: 0x15\n};\n\n},{}],49:[function(require,module,exports){\nmodule.exports = {\n  generator: require('./mp4-generator'),\n  Transmuxer: require('./transmuxer').Transmuxer,\n  AudioSegmentStream: require('./transmuxer').AudioSegmentStream,\n  VideoSegmentStream: require('./transmuxer').VideoSegmentStream,\n  tools: require('../tools/mp4-inspector'),\n};\n\n},{\"../tools/mp4-inspector\":53,\"./mp4-generator\":50,\"./transmuxer\":51}],50:[function(require,module,exports){\n/**\n * mux.js\n *\n * Copyright (c) 2015 Brightcove\n * All rights reserved.\n *\n * Functions that generate fragmented MP4s suitable for use with Media\n * Source Extensions.\n */\n'use strict';\n\nvar box, dinf, esds, ftyp, mdat, mfhd, minf, moof, moov, mvex, mvhd, trak,\n    tkhd, mdia, mdhd, hdlr, sdtp, stbl, stsd, styp, traf, trex, trun,\n    types, MAJOR_BRAND, MINOR_VERSION, AVC1_BRAND, VIDEO_HDLR,\n    AUDIO_HDLR, HDLR_TYPES, VMHD, SMHD, DREF, STCO, STSC, STSZ, STTS;\n\n// pre-calculate constants\n(function() {\n  var i;\n  types = {\n    avc1: [], // codingname\n    avcC: [],\n    btrt: [],\n    dinf: [],\n    dref: [],\n    esds: [],\n    ftyp: [],\n    hdlr: [],\n    mdat: [],\n    mdhd: [],\n    mdia: [],\n    mfhd: [],\n    minf: [],\n    moof: [],\n    moov: [],\n    mp4a: [], // codingname\n    mvex: [],\n    mvhd: [],\n    sdtp: [],\n    smhd: [],\n    stbl: [],\n    stco: [],\n    stsc: [],\n    stsd: [],\n    stsz: [],\n    stts: [],\n    styp: [],\n    tfdt: [],\n    tfhd: [],\n    traf: [],\n    trak: [],\n    trun: [],\n    trex: [],\n    tkhd: [],\n    vmhd: []\n  };\n\n  // In environments where Uint8Array is undefined (e.g., IE8), skip set up so that we\n  // don't throw an error\n  if (typeof Uint8Array === 'undefined') {\n    return;\n  }\n\n  for (i in types) {\n    if (types.hasOwnProperty(i)) {\n      types[i] = [\n        i.charCodeAt(0),\n        i.charCodeAt(1),\n        i.charCodeAt(2),\n        i.charCodeAt(3)\n      ];\n    }\n  }\n\n  MAJOR_BRAND = new Uint8Array([\n    'i'.charCodeAt(0),\n    's'.charCodeAt(0),\n    'o'.charCodeAt(0),\n    'm'.charCodeAt(0)\n  ]);\n  AVC1_BRAND = new Uint8Array([\n    'a'.charCodeAt(0),\n    'v'.charCodeAt(0),\n    'c'.charCodeAt(0),\n    '1'.charCodeAt(0)\n  ]);\n  MINOR_VERSION = new Uint8Array([0, 0, 0, 1]);\n  VIDEO_HDLR = new Uint8Array([\n    0x00, // version 0\n    0x00, 0x00, 0x00, // flags\n    0x00, 0x00, 0x00, 0x00, // pre_defined\n    0x76, 0x69, 0x64, 0x65, // handler_type: 'vide'\n    0x00, 0x00, 0x00, 0x00, // reserved\n    0x00, 0x00, 0x00, 0x00, // reserved\n    0x00, 0x00, 0x00, 0x00, // reserved\n    0x56, 0x69, 0x64, 0x65,\n    0x6f, 0x48, 0x61, 0x6e,\n    0x64, 0x6c, 0x65, 0x72, 0x00 // name: 'VideoHandler'\n  ]);\n  AUDIO_HDLR = new Uint8Array([\n    0x00, // version 0\n    0x00, 0x00, 0x00, // flags\n    0x00, 0x00, 0x00, 0x00, // pre_defined\n    0x73, 0x6f, 0x75, 0x6e, // handler_type: 'soun'\n    0x00, 0x00, 0x00, 0x00, // reserved\n    0x00, 0x00, 0x00, 0x00, // reserved\n    0x00, 0x00, 0x00, 0x00, // reserved\n    0x53, 0x6f, 0x75, 0x6e,\n    0x64, 0x48, 0x61, 0x6e,\n    0x64, 0x6c, 0x65, 0x72, 0x00 // name: 'SoundHandler'\n  ]);\n  HDLR_TYPES = {\n    \"video\":VIDEO_HDLR,\n    \"audio\": AUDIO_HDLR\n  };\n  DREF = new Uint8Array([\n    0x00, // version 0\n    0x00, 0x00, 0x00, // flags\n    0x00, 0x00, 0x00, 0x01, // entry_count\n    0x00, 0x00, 0x00, 0x0c, // entry_size\n    0x75, 0x72, 0x6c, 0x20, // 'url' type\n    0x00, // version 0\n    0x00, 0x00, 0x01 // entry_flags\n  ]);\n  SMHD = new Uint8Array([\n    0x00,             // version\n    0x00, 0x00, 0x00, // flags\n    0x00, 0x00,       // balance, 0 means centered\n    0x00, 0x00        // reserved\n  ]);\n  STCO = new Uint8Array([\n    0x00, // version\n    0x00, 0x00, 0x00, // flags\n    0x00, 0x00, 0x00, 0x00 // entry_count\n  ]);\n  STSC = STCO;\n  STSZ = new Uint8Array([\n    0x00, // version\n    0x00, 0x00, 0x00, // flags\n    0x00, 0x00, 0x00, 0x00, // sample_size\n    0x00, 0x00, 0x00, 0x00, // sample_count\n  ]);\n  STTS = STCO;\n  VMHD = new Uint8Array([\n    0x00, // version\n    0x00, 0x00, 0x01, // flags\n    0x00, 0x00, // graphicsmode\n    0x00, 0x00,\n    0x00, 0x00,\n    0x00, 0x00 // opcolor\n  ]);\n})();\n\nbox = function(type) {\n  var\n    payload = [],\n    size = 0,\n    i,\n    result,\n    view;\n\n  for (i = 1; i < arguments.length; i++) {\n    payload.push(arguments[i]);\n  }\n\n  i = payload.length;\n\n  // calculate the total size we need to allocate\n  while (i--) {\n    size += payload[i].byteLength;\n  }\n  result = new Uint8Array(size + 8);\n  view = new DataView(result.buffer, result.byteOffset, result.byteLength);\n  view.setUint32(0, result.byteLength);\n  result.set(type, 4);\n\n  // copy the payload into the result\n  for (i = 0, size = 8; i < payload.length; i++) {\n    result.set(payload[i], size);\n    size += payload[i].byteLength;\n  }\n  return result;\n};\n\ndinf = function() {\n  return box(types.dinf, box(types.dref, DREF));\n};\n\nesds = function(track) {\n  return box(types.esds, new Uint8Array([\n    0x00, // version\n    0x00, 0x00, 0x00, // flags\n\n    // ES_Descriptor\n    0x03, // tag, ES_DescrTag\n    0x19, // length\n    0x00, 0x00, // ES_ID\n    0x00, // streamDependenceFlag, URL_flag, reserved, streamPriority\n\n    // DecoderConfigDescriptor\n    0x04, // tag, DecoderConfigDescrTag\n    0x11, // length\n    0x40, // object type\n    0x15,  // streamType\n    0x00, 0x06, 0x00, // bufferSizeDB\n    0x00, 0x00, 0xda, 0xc0, // maxBitrate\n    0x00, 0x00, 0xda, 0xc0, // avgBitrate\n\n    // DecoderSpecificInfo\n    0x05, // tag, DecoderSpecificInfoTag\n    0x02, // length\n    // ISO/IEC 14496-3, AudioSpecificConfig\n    // for samplingFrequencyIndex see ISO/IEC 13818-7:2006, 8.1.3.2.2, Table 35\n    (track.audioobjecttype << 3) | (track.samplingfrequencyindex >>> 1),\n    (track.samplingfrequencyindex << 7) | (track.channelcount << 3),\n    0x06, 0x01, 0x02 // GASpecificConfig\n  ]));\n};\n\nftyp = function() {\n  return box(types.ftyp, MAJOR_BRAND, MINOR_VERSION, MAJOR_BRAND, AVC1_BRAND);\n};\n\nhdlr = function(type) {\n  return box(types.hdlr, HDLR_TYPES[type]);\n};\nmdat = function(data) {\n  return box(types.mdat, data);\n};\nmdhd = function(track) {\n  var result = new Uint8Array([\n    0x00,                   // version 0\n    0x00, 0x00, 0x00,       // flags\n    0x00, 0x00, 0x00, 0x02, // creation_time\n    0x00, 0x00, 0x00, 0x03, // modification_time\n    0x00, 0x01, 0x5f, 0x90, // timescale, 90,000 \"ticks\" per second\n\n    (track.duration >>> 24) & 0xFF,\n    (track.duration >>> 16) & 0xFF,\n    (track.duration >>>  8) & 0xFF,\n    track.duration & 0xFF,  // duration\n    0x55, 0xc4,             // 'und' language (undetermined)\n    0x00, 0x00\n  ]);\n\n  // Use the sample rate from the track metadata, when it is\n  // defined. The sample rate can be parsed out of an ADTS header, for\n  // instance.\n  if (track.samplerate) {\n    result[12] = (track.samplerate >>> 24) & 0xFF;\n    result[13] = (track.samplerate >>> 16) & 0xFF;\n    result[14] = (track.samplerate >>>  8) & 0xFF;\n    result[15] = (track.samplerate)        & 0xFF;\n  }\n\n  return box(types.mdhd, result);\n};\nmdia = function(track) {\n  return box(types.mdia, mdhd(track), hdlr(track.type), minf(track));\n};\nmfhd = function(sequenceNumber) {\n  return box(types.mfhd, new Uint8Array([\n    0x00,\n    0x00, 0x00, 0x00, // flags\n    (sequenceNumber & 0xFF000000) >> 24,\n    (sequenceNumber & 0xFF0000) >> 16,\n    (sequenceNumber & 0xFF00) >> 8,\n    sequenceNumber & 0xFF, // sequence_number\n  ]));\n};\nminf = function(track) {\n  return box(types.minf,\n             track.type === 'video' ? box(types.vmhd, VMHD) : box(types.smhd, SMHD),\n             dinf(),\n             stbl(track));\n};\nmoof = function(sequenceNumber, tracks) {\n  var\n    trackFragments = [],\n    i = tracks.length;\n  // build traf boxes for each track fragment\n  while (i--) {\n    trackFragments[i] = traf(tracks[i]);\n  }\n  return box.apply(null, [\n    types.moof,\n    mfhd(sequenceNumber)\n  ].concat(trackFragments));\n};\n/**\n * Returns a movie box.\n * @param tracks {array} the tracks associated with this movie\n * @see ISO/IEC 14496-12:2012(E), section 8.2.1\n */\nmoov = function(tracks) {\n  var\n    i = tracks.length,\n    boxes = [];\n\n  while (i--) {\n    boxes[i] = trak(tracks[i]);\n  }\n\n  return box.apply(null, [types.moov, mvhd(0xffffffff)].concat(boxes).concat(mvex(tracks)));\n};\nmvex = function(tracks) {\n  var\n    i = tracks.length,\n    boxes = [];\n\n  while (i--) {\n    boxes[i] = trex(tracks[i]);\n  }\n  return box.apply(null, [types.mvex].concat(boxes));\n};\nmvhd = function(duration) {\n  var\n    bytes = new Uint8Array([\n      0x00, // version 0\n      0x00, 0x00, 0x00, // flags\n      0x00, 0x00, 0x00, 0x01, // creation_time\n      0x00, 0x00, 0x00, 0x02, // modification_time\n      0x00, 0x01, 0x5f, 0x90, // timescale, 90,000 \"ticks\" per second\n      (duration & 0xFF000000) >> 24,\n      (duration & 0xFF0000) >> 16,\n      (duration & 0xFF00) >> 8,\n      duration & 0xFF, // duration\n      0x00, 0x01, 0x00, 0x00, // 1.0 rate\n      0x01, 0x00, // 1.0 volume\n      0x00, 0x00, // reserved\n      0x00, 0x00, 0x00, 0x00, // reserved\n      0x00, 0x00, 0x00, 0x00, // reserved\n      0x00, 0x01, 0x00, 0x00,\n      0x00, 0x00, 0x00, 0x00,\n      0x00, 0x00, 0x00, 0x00,\n      0x00, 0x00, 0x00, 0x00,\n      0x00, 0x01, 0x00, 0x00,\n      0x00, 0x00, 0x00, 0x00,\n      0x00, 0x00, 0x00, 0x00,\n      0x00, 0x00, 0x00, 0x00,\n      0x40, 0x00, 0x00, 0x00, // transformation: unity matrix\n      0x00, 0x00, 0x00, 0x00,\n      0x00, 0x00, 0x00, 0x00,\n      0x00, 0x00, 0x00, 0x00,\n      0x00, 0x00, 0x00, 0x00,\n      0x00, 0x00, 0x00, 0x00,\n      0x00, 0x00, 0x00, 0x00, // pre_defined\n      0xff, 0xff, 0xff, 0xff // next_track_ID\n    ]);\n  return box(types.mvhd, bytes);\n};\n\nsdtp = function(track) {\n  var\n    samples = track.samples || [],\n    bytes = new Uint8Array(4 + samples.length),\n    flags,\n    i;\n\n  // leave the full box header (4 bytes) all zero\n\n  // write the sample table\n  for (i = 0; i < samples.length; i++) {\n    flags = samples[i].flags;\n\n    bytes[i + 4] = (flags.dependsOn << 4) |\n      (flags.isDependedOn << 2) |\n      (flags.hasRedundancy);\n  }\n\n  return box(types.sdtp,\n             bytes);\n};\n\nstbl = function(track) {\n  return box(types.stbl,\n             stsd(track),\n             box(types.stts, STTS),\n             box(types.stsc, STSC),\n             box(types.stsz, STSZ),\n             box(types.stco, STCO));\n};\n\n(function() {\n  var videoSample, audioSample;\n\n  stsd = function(track) {\n\n    return box(types.stsd, new Uint8Array([\n      0x00, // version 0\n      0x00, 0x00, 0x00, // flags\n      0x00, 0x00, 0x00, 0x01\n    ]), track.type === 'video' ? videoSample(track) : audioSample(track));\n  };\n\n  videoSample = function(track) {\n    var\n      sps = track.sps || [],\n      pps = track.pps || [],\n      sequenceParameterSets = [],\n      pictureParameterSets = [],\n      i;\n\n    // assemble the SPSs\n    for (i = 0; i < sps.length; i++) {\n      sequenceParameterSets.push((sps[i].byteLength & 0xFF00) >>> 8);\n      sequenceParameterSets.push((sps[i].byteLength & 0xFF)); // sequenceParameterSetLength\n      sequenceParameterSets = sequenceParameterSets.concat(Array.prototype.slice.call(sps[i])); // SPS\n    }\n\n    // assemble the PPSs\n    for (i = 0; i < pps.length; i++) {\n      pictureParameterSets.push((pps[i].byteLength & 0xFF00) >>> 8);\n      pictureParameterSets.push((pps[i].byteLength & 0xFF));\n      pictureParameterSets = pictureParameterSets.concat(Array.prototype.slice.call(pps[i]));\n    }\n\n    return box(types.avc1, new Uint8Array([\n      0x00, 0x00, 0x00,\n      0x00, 0x00, 0x00, // reserved\n      0x00, 0x01, // data_reference_index\n      0x00, 0x00, // pre_defined\n      0x00, 0x00, // reserved\n      0x00, 0x00, 0x00, 0x00,\n      0x00, 0x00, 0x00, 0x00,\n      0x00, 0x00, 0x00, 0x00, // pre_defined\n      (track.width & 0xff00) >> 8,\n      track.width & 0xff, // width\n      (track.height & 0xff00) >> 8,\n      track.height & 0xff, // height\n      0x00, 0x48, 0x00, 0x00, // horizresolution\n      0x00, 0x48, 0x00, 0x00, // vertresolution\n      0x00, 0x00, 0x00, 0x00, // reserved\n      0x00, 0x01, // frame_count\n      0x13,\n      0x76, 0x69, 0x64, 0x65,\n      0x6f, 0x6a, 0x73, 0x2d,\n      0x63, 0x6f, 0x6e, 0x74,\n      0x72, 0x69, 0x62, 0x2d,\n      0x68, 0x6c, 0x73, 0x00,\n      0x00, 0x00, 0x00, 0x00,\n      0x00, 0x00, 0x00, 0x00,\n      0x00, 0x00, 0x00, // compressorname\n      0x00, 0x18, // depth = 24\n      0x11, 0x11 // pre_defined = -1\n    ]), box(types.avcC, new Uint8Array([\n      0x01, // configurationVersion\n      track.profileIdc, // AVCProfileIndication\n      track.profileCompatibility, // profile_compatibility\n      track.levelIdc, // AVCLevelIndication\n      0xff // lengthSizeMinusOne, hard-coded to 4 bytes\n    ].concat([\n      sps.length // numOfSequenceParameterSets\n    ]).concat(sequenceParameterSets).concat([\n      pps.length // numOfPictureParameterSets\n    ]).concat(pictureParameterSets))), // \"PPS\"\n            box(types.btrt, new Uint8Array([\n              0x00, 0x1c, 0x9c, 0x80, // bufferSizeDB\n              0x00, 0x2d, 0xc6, 0xc0, // maxBitrate\n              0x00, 0x2d, 0xc6, 0xc0\n            ])) // avgBitrate\n              );\n  };\n\n  audioSample = function(track) {\n    return box(types.mp4a, new Uint8Array([\n\n      // SampleEntry, ISO/IEC 14496-12\n      0x00, 0x00, 0x00,\n      0x00, 0x00, 0x00, // reserved\n      0x00, 0x01, // data_reference_index\n\n      // AudioSampleEntry, ISO/IEC 14496-12\n      0x00, 0x00, 0x00, 0x00, // reserved\n      0x00, 0x00, 0x00, 0x00, // reserved\n      (track.channelcount & 0xff00) >> 8,\n      (track.channelcount & 0xff), // channelcount\n\n      (track.samplesize & 0xff00) >> 8,\n      (track.samplesize & 0xff), // samplesize\n      0x00, 0x00, // pre_defined\n      0x00, 0x00, // reserved\n\n      (track.samplerate & 0xff00) >> 8,\n      (track.samplerate & 0xff),\n      0x00, 0x00 // samplerate, 16.16\n\n      // MP4AudioSampleEntry, ISO/IEC 14496-14\n    ]), esds(track));\n  };\n})();\n\nstyp = function() {\n  return box(types.styp, MAJOR_BRAND, MINOR_VERSION, MAJOR_BRAND);\n};\n\ntkhd = function(track) {\n  var result = new Uint8Array([\n    0x00, // version 0\n    0x00, 0x00, 0x07, // flags\n    0x00, 0x00, 0x00, 0x00, // creation_time\n    0x00, 0x00, 0x00, 0x00, // modification_time\n    (track.id & 0xFF000000) >> 24,\n    (track.id & 0xFF0000) >> 16,\n    (track.id & 0xFF00) >> 8,\n    track.id & 0xFF, // track_ID\n    0x00, 0x00, 0x00, 0x00, // reserved\n    (track.duration & 0xFF000000) >> 24,\n    (track.duration & 0xFF0000) >> 16,\n    (track.duration & 0xFF00) >> 8,\n    track.duration & 0xFF, // duration\n    0x00, 0x00, 0x00, 0x00,\n    0x00, 0x00, 0x00, 0x00, // reserved\n    0x00, 0x00, // layer\n    0x00, 0x00, // alternate_group\n    0x01, 0x00, // non-audio track volume\n    0x00, 0x00, // reserved\n    0x00, 0x01, 0x00, 0x00,\n    0x00, 0x00, 0x00, 0x00,\n    0x00, 0x00, 0x00, 0x00,\n    0x00, 0x00, 0x00, 0x00,\n    0x00, 0x01, 0x00, 0x00,\n    0x00, 0x00, 0x00, 0x00,\n    0x00, 0x00, 0x00, 0x00,\n    0x00, 0x00, 0x00, 0x00,\n    0x40, 0x00, 0x00, 0x00, // transformation: unity matrix\n    (track.width & 0xFF00) >> 8,\n    track.width & 0xFF,\n    0x00, 0x00, // width\n    (track.height & 0xFF00) >> 8,\n    track.height & 0xFF,\n    0x00, 0x00 // height\n  ]);\n\n  return box(types.tkhd, result);\n};\n\n/**\n * Generate a track fragment (traf) box. A traf box collects metadata\n * about tracks in a movie fragment (moof) box.\n */\ntraf = function(track) {\n  var trackFragmentHeader, trackFragmentDecodeTime,\n      trackFragmentRun, sampleDependencyTable, dataOffset;\n\n  trackFragmentHeader = box(types.tfhd, new Uint8Array([\n    0x00, // version 0\n    0x00, 0x00, 0x3a, // flags\n    (track.id & 0xFF000000) >> 24,\n    (track.id & 0xFF0000) >> 16,\n    (track.id & 0xFF00) >> 8,\n    (track.id & 0xFF), // track_ID\n    0x00, 0x00, 0x00, 0x01, // sample_description_index\n    0x00, 0x00, 0x00, 0x00, // default_sample_duration\n    0x00, 0x00, 0x00, 0x00, // default_sample_size\n    0x00, 0x00, 0x00, 0x00  // default_sample_flags\n  ]));\n\n  trackFragmentDecodeTime = box(types.tfdt, new Uint8Array([\n    0x00, // version 0\n    0x00, 0x00, 0x00, // flags\n    // baseMediaDecodeTime\n    (track.baseMediaDecodeTime >>> 24) & 0xFF,\n    (track.baseMediaDecodeTime >>> 16) & 0xFF,\n    (track.baseMediaDecodeTime >>> 8) & 0xFF,\n    track.baseMediaDecodeTime & 0xFF\n  ]));\n\n  // the data offset specifies the number of bytes from the start of\n  // the containing moof to the first payload byte of the associated\n  // mdat\n  dataOffset = (32 + // tfhd\n                16 + // tfdt\n                8 +  // traf header\n                16 + // mfhd\n                8 +  // moof header\n                8);  // mdat header\n\n  // audio tracks require less metadata\n  if (track.type === 'audio') {\n    trackFragmentRun = trun(track, dataOffset);\n    return box(types.traf,\n               trackFragmentHeader,\n               trackFragmentDecodeTime,\n               trackFragmentRun);\n  }\n\n  // video tracks should contain an independent and disposable samples\n  // box (sdtp)\n  // generate one and adjust offsets to match\n  sampleDependencyTable = sdtp(track);\n  trackFragmentRun = trun(track,\n                          sampleDependencyTable.length + dataOffset);\n  return box(types.traf,\n             trackFragmentHeader,\n             trackFragmentDecodeTime,\n             trackFragmentRun,\n             sampleDependencyTable);\n};\n\n/**\n * Generate a track box.\n * @param track {object} a track definition\n * @return {Uint8Array} the track box\n */\ntrak = function(track) {\n  track.duration = track.duration || 0xffffffff;\n  return box(types.trak,\n             tkhd(track),\n             mdia(track));\n};\n\ntrex = function(track) {\n  var result = new Uint8Array([\n    0x00, // version 0\n    0x00, 0x00, 0x00, // flags\n    (track.id & 0xFF000000) >> 24,\n    (track.id & 0xFF0000) >> 16,\n    (track.id & 0xFF00) >> 8,\n    (track.id & 0xFF), // track_ID\n    0x00, 0x00, 0x00, 0x01, // default_sample_description_index\n    0x00, 0x00, 0x00, 0x00, // default_sample_duration\n    0x00, 0x00, 0x00, 0x00, // default_sample_size\n    0x00, 0x01, 0x00, 0x01 // default_sample_flags\n  ]);\n  // the last two bytes of default_sample_flags is the sample\n  // degradation priority, a hint about the importance of this sample\n  // relative to others. Lower the degradation priority for all sample\n  // types other than video.\n  if (track.type !== 'video') {\n    result[result.length - 1] = 0x00;\n  }\n\n  return box(types.trex, result);\n};\n\n(function() {\n  var audioTrun, videoTrun, trunHeader;\n\n  // This method assumes all samples are uniform. That is, if a\n  // duration is present for the first sample, it will be present for\n  // all subsequent samples.\n  // see ISO/IEC 14496-12:2012, Section 8.8.8.1\n  trunHeader = function(samples, offset) {\n    var durationPresent = 0, sizePresent = 0,\n        flagsPresent = 0, compositionTimeOffset = 0;\n\n    // trun flag constants\n    if (samples.length) {\n      if (samples[0].duration !== undefined) {\n        durationPresent = 0x1;\n      }\n      if (samples[0].size !== undefined) {\n        sizePresent = 0x2;\n      }\n      if (samples[0].flags !== undefined) {\n        flagsPresent = 0x4;\n      }\n      if (samples[0].compositionTimeOffset !== undefined) {\n        compositionTimeOffset = 0x8;\n      }\n    }\n\n    return [\n      0x00, // version 0\n      0x00,\n      durationPresent | sizePresent | flagsPresent | compositionTimeOffset,\n      0x01, // flags\n      (samples.length & 0xFF000000) >>> 24,\n      (samples.length & 0xFF0000) >>> 16,\n      (samples.length & 0xFF00) >>> 8,\n      samples.length & 0xFF, // sample_count\n      (offset & 0xFF000000) >>> 24,\n      (offset & 0xFF0000) >>> 16,\n      (offset & 0xFF00) >>> 8,\n      offset & 0xFF // data_offset\n    ];\n  };\n\n  videoTrun = function(track, offset) {\n    var bytes, samples, sample, i;\n\n    samples = track.samples || [];\n    offset += 8 + 12 + (16 * samples.length);\n\n    bytes = trunHeader(samples, offset);\n\n    for (i = 0; i < samples.length; i++) {\n      sample = samples[i];\n      bytes = bytes.concat([\n        (sample.duration & 0xFF000000) >>> 24,\n        (sample.duration & 0xFF0000) >>> 16,\n        (sample.duration & 0xFF00) >>> 8,\n        sample.duration & 0xFF, // sample_duration\n        (sample.size & 0xFF000000) >>> 24,\n        (sample.size & 0xFF0000) >>> 16,\n        (sample.size & 0xFF00) >>> 8,\n        sample.size & 0xFF, // sample_size\n        (sample.flags.isLeading << 2) | sample.flags.dependsOn,\n        (sample.flags.isDependedOn << 6) |\n          (sample.flags.hasRedundancy << 4) |\n          (sample.flags.paddingValue << 1) |\n          sample.flags.isNonSyncSample,\n        sample.flags.degradationPriority & 0xF0 << 8,\n        sample.flags.degradationPriority & 0x0F, // sample_flags\n        (sample.compositionTimeOffset & 0xFF000000) >>> 24,\n        (sample.compositionTimeOffset & 0xFF0000) >>> 16,\n        (sample.compositionTimeOffset & 0xFF00) >>> 8,\n        sample.compositionTimeOffset & 0xFF // sample_composition_time_offset\n      ]);\n    }\n    return box(types.trun, new Uint8Array(bytes));\n  };\n\n  audioTrun = function(track, offset) {\n    var bytes, samples, sample, i;\n\n    samples = track.samples || [];\n    offset += 8 + 12 + (8 * samples.length);\n\n    bytes = trunHeader(samples, offset);\n\n    for (i = 0; i < samples.length; i++) {\n      sample = samples[i];\n      bytes = bytes.concat([\n        (sample.duration & 0xFF000000) >>> 24,\n        (sample.duration & 0xFF0000) >>> 16,\n        (sample.duration & 0xFF00) >>> 8,\n        sample.duration & 0xFF, // sample_duration\n        (sample.size & 0xFF000000) >>> 24,\n        (sample.size & 0xFF0000) >>> 16,\n        (sample.size & 0xFF00) >>> 8,\n        sample.size & 0xFF]); // sample_size\n    }\n\n    return box(types.trun, new Uint8Array(bytes));\n  };\n\n  trun = function(track, offset) {\n    if (track.type === 'audio') {\n      return audioTrun(track, offset);\n    } else {\n      return videoTrun(track, offset);\n    }\n  };\n})();\n\nmodule.exports = {\n  ftyp: ftyp,\n  mdat: mdat,\n  moof: moof,\n  moov: moov,\n  initSegment: function(tracks) {\n    var\n      fileType = ftyp(),\n      movie = moov(tracks),\n      result;\n\n    result = new Uint8Array(fileType.byteLength + movie.byteLength);\n    result.set(fileType);\n    result.set(movie, fileType.byteLength);\n    return result;\n  }\n};\n\n},{}],51:[function(require,module,exports){\n/**\n * mux.js\n *\n * Copyright (c) 2015 Brightcove\n * All rights reserved.\n *\n * A stream-based mp2t to mp4 converter. This utility can be used to\n * deliver mp4s to a SourceBuffer on platforms that support native\n * Media Source Extensions.\n */\n'use strict';\n\nvar Stream = require('../utils/stream.js');\nvar mp4 = require('./mp4-generator.js');\nvar m2ts = require('../m2ts/m2ts.js');\nvar AdtsStream = require('../codecs/adts.js');\nvar H264Stream = require('../codecs/h264').H264Stream;\nvar AacStream = require('../aac');\n\n// constants\nvar AUDIO_PROPERTIES = [\n  'audioobjecttype',\n  'channelcount',\n  'samplerate',\n  'samplingfrequencyindex',\n  'samplesize'\n];\n\nvar VIDEO_PROPERTIES = [\n  'width',\n  'height',\n  'profileIdc',\n  'levelIdc',\n  'profileCompatibility',\n];\n\n// object types\nvar VideoSegmentStream, AudioSegmentStream, Transmuxer, CoalesceStream;\n\n// Helper functions\nvar\n  createDefaultSample,\n  isLikelyAacData,\n  collectDtsInfo,\n  clearDtsInfo,\n  calculateTrackBaseMediaDecodeTime,\n  arrayEquals,\n  sumFrameByteLengths;\n\n/**\n * Default sample object\n * see ISO/IEC 14496-12:2012, section 8.6.4.3\n */\ncreateDefaultSample = function () {\n  return {\n    size: 0,\n    flags: {\n      isLeading: 0,\n      dependsOn: 1,\n      isDependedOn: 0,\n      hasRedundancy: 0,\n      degradationPriority: 0\n    }\n  };\n};\n\nisLikelyAacData = function (data) {\n  if ((data[0] === 'I'.charCodeAt(0)) &&\n      (data[1] === 'D'.charCodeAt(0)) &&\n      (data[2] === '3'.charCodeAt(0))) {\n    return true;\n  }\n  return false;\n};\n\n/**\n * Compare two arrays (even typed) for same-ness\n */\narrayEquals = function(a, b) {\n  var\n    i;\n\n  if (a.length !== b.length) {\n    return false;\n  }\n\n  // compare the value of each element in the array\n  for (i = 0; i < a.length; i++) {\n    if (a[i] !== b[i]) {\n      return false;\n    }\n  }\n\n  return true;\n};\n\n/**\n * Sum the `byteLength` properties of the data in each AAC frame\n */\nsumFrameByteLengths = function(array) {\n  var\n    i,\n    currentObj,\n    sum = 0;\n\n  // sum the byteLength's all each nal unit in the frame\n  for (i = 0; i < array.length; i++) {\n    currentObj = array[i];\n    sum += currentObj.data.byteLength;\n  }\n\n  return sum;\n};\n\n/**\n * Constructs a single-track, ISO BMFF media segment from AAC data\n * events. The output of this stream can be fed to a SourceBuffer\n * configured with a suitable initialization segment.\n */\nAudioSegmentStream = function(track) {\n  var\n    adtsFrames = [],\n    sequenceNumber = 0,\n    earliestAllowedDts = 0;\n\n  AudioSegmentStream.prototype.init.call(this);\n\n  this.push = function(data) {\n    collectDtsInfo(track, data);\n\n    if (track) {\n      AUDIO_PROPERTIES.forEach(function(prop) {\n        track[prop] = data[prop];\n      });\n    }\n\n    // buffer audio data until end() is called\n    adtsFrames.push(data);\n  };\n\n  this.setEarliestDts = function(earliestDts) {\n    earliestAllowedDts = earliestDts - track.timelineStartInfo.baseMediaDecodeTime;\n  };\n\n  this.flush = function() {\n    var\n      frames,\n      moof,\n      mdat,\n      boxes;\n\n    // return early if no audio data has been observed\n    if (adtsFrames.length === 0) {\n      this.trigger('done', 'AudioSegmentStream');\n      return;\n    }\n\n    frames = this.trimAdtsFramesByEarliestDts_(adtsFrames);\n\n    // we have to build the index from byte locations to\n    // samples (that is, adts frames) in the audio data\n    track.samples = this.generateSampleTable_(frames);\n\n    // concatenate the audio data to constuct the mdat\n    mdat = mp4.mdat(this.concatenateFrameData_(frames));\n\n    adtsFrames = [];\n\n    calculateTrackBaseMediaDecodeTime(track);\n    moof = mp4.moof(sequenceNumber, [track]);\n    boxes = new Uint8Array(moof.byteLength + mdat.byteLength);\n\n    // bump the sequence number for next time\n    sequenceNumber++;\n\n    boxes.set(moof);\n    boxes.set(mdat, moof.byteLength);\n\n    clearDtsInfo(track);\n\n    this.trigger('data', {track: track, boxes: boxes});\n    this.trigger('done', 'AudioSegmentStream');\n  };\n\n  // If the audio segment extends before the earliest allowed dts\n  // value, remove AAC frames until starts at or after the earliest\n  // allowed DTS so that we don't end up with a negative baseMedia-\n  // DecodeTime for the audio track\n  this.trimAdtsFramesByEarliestDts_ = function(adtsFrames) {\n    if (track.minSegmentDts >= earliestAllowedDts) {\n      return adtsFrames;\n    }\n\n    // We will need to recalculate the earliest segment Dts\n    track.minSegmentDts = Infinity;\n\n    return adtsFrames.filter(function(currentFrame) {\n      // If this is an allowed frame, keep it and record it's Dts\n      if (currentFrame.dts >= earliestAllowedDts) {\n        track.minSegmentDts = Math.min(track.minSegmentDts, currentFrame.dts);\n        track.minSegmentPts = track.minSegmentDts;\n        return true;\n      }\n      // Otherwise, discard it\n      return false;\n    });\n  };\n\n  // generate the track's raw mdat data from an array of frames\n  this.generateSampleTable_ = function(frames) {\n    var\n      i,\n      currentFrame,\n      samples = [];\n\n    for (i = 0; i < frames.length; i++) {\n      currentFrame = frames[i];\n      samples.push({\n        size: currentFrame.data.byteLength,\n        duration: 1024 // For AAC audio, all samples contain 1024 samples\n      });\n    }\n    return samples;\n  };\n\n  // generate the track's sample table from an array of frames\n  this.concatenateFrameData_ = function(frames) {\n    var\n      i,\n      currentFrame,\n      dataOffset = 0,\n      data = new Uint8Array(sumFrameByteLengths(frames));\n\n    for (i = 0; i < frames.length; i++) {\n      currentFrame = frames[i];\n\n      data.set(currentFrame.data, dataOffset);\n      dataOffset += currentFrame.data.byteLength;\n    }\n    return data;\n  };\n};\n\nAudioSegmentStream.prototype = new Stream();\n\n/**\n * Constructs a single-track, ISO BMFF media segment from H264 data\n * events. The output of this stream can be fed to a SourceBuffer\n * configured with a suitable initialization segment.\n * @param track {object} track metadata configuration\n */\nVideoSegmentStream = function(track) {\n  var\n    sequenceNumber = 0,\n    nalUnits = [],\n    config,\n    pps;\n\n  VideoSegmentStream.prototype.init.call(this);\n\n  delete track.minPTS;\n\n  this.gopCache_ = [];\n\n  this.push = function(nalUnit) {\n    collectDtsInfo(track, nalUnit);\n\n    // record the track config\n    if (nalUnit.nalUnitType === 'seq_parameter_set_rbsp' && !config) {\n      config = nalUnit.config;\n      track.sps = [nalUnit.data];\n\n      VIDEO_PROPERTIES.forEach(function(prop) {\n        track[prop] = config[prop];\n      }, this);\n    }\n\n    if (nalUnit.nalUnitType === 'pic_parameter_set_rbsp' &&\n        !pps) {\n      pps = nalUnit.data;\n      track.pps = [nalUnit.data];\n    }\n\n    // buffer video until flush() is called\n    nalUnits.push(nalUnit);\n  };\n\n  this.flush = function() {\n    var\n      frames,\n      gopForFusion,\n      gops,\n      moof,\n      mdat,\n      boxes;\n\n    // Throw away nalUnits at the start of the byte stream until\n    // we find the first AUD\n    while (nalUnits.length) {\n      if (nalUnits[0].nalUnitType === 'access_unit_delimiter_rbsp') {\n        break;\n      }\n      nalUnits.shift();\n    }\n\n    // Return early if no video data has been observed\n    if (nalUnits.length === 0) {\n      this.resetStream_();\n      this.trigger('done', 'VideoSegmentStream');\n      return;\n    }\n\n    // Organize the raw nal-units into arrays that represent\n    // higher-level constructs such as frames and gops\n    // (group-of-pictures)\n    frames = this.groupNalsIntoFrames_(nalUnits);\n    gops = this.groupFramesIntoGops_(frames);\n\n    // If the first frame of this fragment is not a keyframe we have\n    // a problem since MSE (on Chrome) requires a leading keyframe.\n    //\n    // We have two approaches to repairing this situation:\n    // 1) GOP-FUSION:\n    //    This is where we keep track of the GOPS (group-of-pictures)\n    //    from previous fragments and attempt to find one that we can\n    //    prepend to the current fragment in order to create a valid\n    //    fragment.\n    // 2) KEYFRAME-PULLING:\n    //    Here we search for the first keyframe in the fragment and\n    //    throw away all the frames between the start of the fragment\n    //    and that keyframe. We then extend the duration and pull the\n    //    PTS of the keyframe forward so that it covers the time range\n    //    of the frames that were disposed of.\n    //\n    // #1 is far prefereable over #2 which can cause \"stuttering\" but\n    // requires more things to be just right.\n    if (!gops[0][0].keyFrame) {\n      // Search for a gop for fusion from our gopCache\n      gopForFusion = this.getGopForFusion_(nalUnits[0], track);\n\n      if (gopForFusion) {\n        gops.unshift(gopForFusion);\n        // Adjust Gops' metadata to account for the inclusion of the\n        // new gop at the beginning\n        gops.byteLength += gopForFusion.byteLength;\n        gops.nalCount += gopForFusion.nalCount;\n        gops.pts = gopForFusion.pts;\n        gops.dts = gopForFusion.dts;\n        gops.duration += gopForFusion.duration;\n      } else {\n        // If we didn't find a candidate gop fall back to keyrame-pulling\n        gops = this.extendFirstKeyFrame_(gops);\n      }\n    }\n    collectDtsInfo(track, gops);\n\n    // First, we have to build the index from byte locations to\n    // samples (that is, frames) in the video data\n    track.samples = this.generateSampleTable_(gops);\n\n    // Concatenate the video data and construct the mdat\n    mdat = mp4.mdat(this.concatenateNalData_(gops));\n\n    // save all the nals in the last GOP into the gop cache\n    this.gopCache_.unshift({\n      gop: gops.pop(),\n      pps: track.pps,\n      sps: track.sps\n    });\n\n    // Keep a maximum of 6 GOPs in the cache\n    this.gopCache_.length = Math.min(6, this.gopCache_.length);\n\n    // Clear nalUnits\n    nalUnits = [];\n\n    calculateTrackBaseMediaDecodeTime(track);\n\n    this.trigger('timelineStartInfo', track.timelineStartInfo);\n\n    moof = mp4.moof(sequenceNumber, [track]);\n\n    // it would be great to allocate this array up front instead of\n    // throwing away hundreds of media segment fragments\n    boxes = new Uint8Array(moof.byteLength + mdat.byteLength);\n\n    // Bump the sequence number for next time\n    sequenceNumber++;\n\n    boxes.set(moof);\n    boxes.set(mdat, moof.byteLength);\n\n    this.trigger('data', {track: track, boxes: boxes});\n\n    this.resetStream_();\n\n    // Continue with the flush process now\n    this.trigger('done', 'VideoSegmentStream');\n  };\n\n  this.resetStream_ = function() {\n    clearDtsInfo(track);\n\n    // reset config and pps because they may differ across segments\n    // for instance, when we are rendition switching\n    config = undefined;\n    pps = undefined;\n  };\n\n  // Search for a candidate Gop for gop-fusion from the gop cache and\n  // return it or return null if no good candidate was found\n  this.getGopForFusion_ = function (nalUnit) {\n    var\n      halfSecond = 45000, // Half-a-second in a 90khz clock\n      allowableOverlap = 10000, // About 3 frames @ 30fps\n      nearestDistance = Infinity,\n      dtsDistance,\n      nearestGopObj,\n      currentGop,\n      currentGopObj,\n      i;\n\n    // Search for the GOP nearest to the beginning of this nal unit\n    for (i = 0; i < this.gopCache_.length; i++) {\n      currentGopObj = this.gopCache_[i];\n      currentGop = currentGopObj.gop;\n\n      // Reject Gops with different SPS or PPS\n      if (!(track.pps && arrayEquals(track.pps[0], currentGopObj.pps[0])) ||\n          !(track.sps && arrayEquals(track.sps[0], currentGopObj.sps[0]))) {\n        continue;\n      }\n\n      // Reject Gops that would require a negative baseMediaDecodeTime\n      if (currentGop.dts < track.timelineStartInfo.dts) {\n        continue;\n      }\n\n      // The distance between the end of the gop and the start of the nalUnit\n      dtsDistance = (nalUnit.dts - currentGop.dts) - currentGop.duration;\n\n      // Only consider GOPS that start before the nal unit and end within\n      // a half-second of the nal unit\n      if (dtsDistance >= -allowableOverlap &&\n          dtsDistance <= halfSecond) {\n\n        // Always use the closest GOP we found if there is more than\n        // one candidate\n        if (!nearestGopObj ||\n            nearestDistance > dtsDistance) {\n          nearestGopObj = currentGopObj;\n          nearestDistance = dtsDistance;\n        }\n      }\n    }\n\n    if (nearestGopObj) {\n      return nearestGopObj.gop;\n    }\n    return null;\n  };\n\n  this.extendFirstKeyFrame_ = function(gops) {\n    var\n      h, i,\n      currentGop,\n      newGops;\n\n    if (!gops[0][0].keyFrame) {\n      // Remove the first GOP\n      currentGop = gops.shift();\n\n      gops.byteLength -=  currentGop.byteLength;\n      gops.nalCount -= currentGop.nalCount;\n\n      // Extend the first frame of what is now the\n      // first gop to cover the time period of the\n      // frames we just removed\n      gops[0][0].dts = currentGop.dts;\n      gops[0][0].pts = currentGop.pts;\n      gops[0][0].duration += currentGop.duration;\n    }\n\n    return gops;\n  };\n\n  // Convert an array of nal units into an array of frames with each frame being\n  // composed of the nal units that make up that frame\n  // Also keep track of cummulative data about the frame from the nal units such\n  // as the frame duration, starting pts, etc.\n  this.groupNalsIntoFrames_ = function(nalUnits) {\n    var\n      i,\n      currentNal,\n      startPts,\n      startDts,\n      currentFrame = [],\n      frames = [];\n\n    currentFrame.byteLength = 0;\n\n    for (i = 0; i < nalUnits.length; i++) {\n      currentNal = nalUnits[i];\n\n      // Split on 'aud'-type nal units\n      if (currentNal.nalUnitType === 'access_unit_delimiter_rbsp') {\n        // Since the very first nal unit is expected to be an AUD\n        // only push to the frames array when currentFrame is not empty\n        if (currentFrame.length) {\n          currentFrame.duration = currentNal.dts - currentFrame.dts;\n          frames.push(currentFrame);\n        }\n        currentFrame = [currentNal];\n        currentFrame.byteLength = currentNal.data.byteLength;\n        currentFrame.pts = currentNal.pts;\n        currentFrame.dts = currentNal.dts;\n      } else {\n        // Specifically flag key frames for ease of use later\n        if (currentNal.nalUnitType === 'slice_layer_without_partitioning_rbsp_idr') {\n          currentFrame.keyFrame = true;\n        }\n        currentFrame.duration = currentNal.dts - currentFrame.dts;\n        currentFrame.byteLength += currentNal.data.byteLength;\n        currentFrame.push(currentNal);\n      }\n    }\n\n    // For the last frame, use the duration of the previous frame if we\n    // have nothing better to go on\n    if (frames.length &&\n        (!currentFrame.duration ||\n         currentFrame.duration <= 0)) {\n      currentFrame.duration = frames[frames.length - 1].duration;\n    }\n\n    // Push the final frame\n    frames.push(currentFrame);\n    return frames;\n  };\n\n  // Convert an array of frames into an array of Gop with each Gop being composed\n  // of the frames that make up that Gop\n  // Also keep track of cummulative data about the Gop from the frames such as the\n  // Gop duration, starting pts, etc.\n  this.groupFramesIntoGops_ = function(frames) {\n    var\n      i,\n      currentFrame,\n      currentGop = [],\n      gops = [];\n\n    // We must pre-set some of the values on the Gop since we\n    // keep running totals of these values\n    currentGop.byteLength = 0;\n    currentGop.nalCount = 0;\n    currentGop.duration = 0;\n    currentGop.pts = frames[0].pts;\n    currentGop.dts = frames[0].dts;\n\n    // store some metadata about all the Gops\n    gops.byteLength = 0;\n    gops.nalCount = 0;\n    gops.duration = 0;\n    gops.pts = frames[0].pts;\n    gops.dts = frames[0].dts;\n\n    for (i = 0; i < frames.length; i++) {\n      currentFrame = frames[i];\n\n      if (currentFrame.keyFrame) {\n        // Since the very first frame is expected to be an keyframe\n        // only push to the gops array when currentGop is not empty\n        if (currentGop.length) {\n          gops.push(currentGop);\n          gops.byteLength += currentGop.byteLength;\n          gops.nalCount += currentGop.nalCount;\n          gops.duration += currentGop.duration;\n        }\n\n        currentGop = [currentFrame];\n        currentGop.nalCount = currentFrame.length;\n        currentGop.byteLength = currentFrame.byteLength;\n        currentGop.pts = currentFrame.pts;\n        currentGop.dts = currentFrame.dts;\n        currentGop.duration = currentFrame.duration;\n      } else {\n        currentGop.duration += currentFrame.duration;\n        currentGop.nalCount += currentFrame.length;\n        currentGop.byteLength += currentFrame.byteLength;\n        currentGop.push(currentFrame);\n      }\n    }\n\n    if (gops.length && currentGop.duration <= 0) {\n      currentGop.duration = gops[gops.length - 1].duration;\n    }\n    gops.byteLength += currentGop.byteLength;\n    gops.nalCount += currentGop.nalCount;\n    gops.duration += currentGop.duration;\n\n    // push the final Gop\n    gops.push(currentGop);\n    return gops;\n  };\n\n  // generate the track's sample table from an array of gops\n  this.generateSampleTable_ = function(gops, baseDataOffset) {\n    var\n      h, i,\n      sample,\n      currentGop,\n      currentFrame,\n      currentSample,\n      dataOffset = baseDataOffset || 0,\n      samples = [];\n\n    for (h = 0; h < gops.length; h++) {\n      currentGop = gops[h];\n\n      for (i = 0; i < currentGop.length; i++) {\n        currentFrame = currentGop[i];\n\n        sample = createDefaultSample();\n\n        sample.dataOffset = dataOffset;\n        sample.compositionTimeOffset = currentFrame.pts - currentFrame.dts;\n        sample.duration = currentFrame.duration;\n        sample.size = 4 * currentFrame.length; // Space for nal unit size\n        sample.size += currentFrame.byteLength;\n\n        if (currentFrame.keyFrame) {\n          sample.flags.dependsOn = 2;\n        }\n\n        dataOffset += sample.size;\n\n        samples.push(sample);\n      }\n    }\n    return samples;\n  };\n\n  // generate the track's raw mdat data from an array of gops\n  this.concatenateNalData_ = function (gops) {\n    var\n      h, i, j,\n      currentGop,\n      currentFrame,\n      currentNal,\n      dataOffset = 0,\n      nalsByteLength = gops.byteLength,\n      numberOfNals = gops.nalCount,\n      totalByteLength = nalsByteLength + 4 * numberOfNals,\n      data = new Uint8Array(totalByteLength),\n      view = new DataView(data.buffer);\n\n    // For each Gop..\n    for (h = 0; h < gops.length; h++) {\n      currentGop = gops[h];\n\n      // For each Frame..\n      for (i = 0; i < currentGop.length; i++) {\n        currentFrame = currentGop[i];\n\n        // For each NAL..\n        for (j = 0; j < currentFrame.length; j++) {\n          currentNal = currentFrame[j];\n\n          view.setUint32(dataOffset, currentNal.data.byteLength);\n          dataOffset += 4;\n          data.set(currentNal.data, dataOffset);\n          dataOffset += currentNal.data.byteLength;\n        }\n      }\n    }\n    return data;\n  };\n};\n\nVideoSegmentStream.prototype = new Stream();\n\n/**\n * Store information about the start and end of the track and the\n * duration for each frame/sample we process in order to calculate\n * the baseMediaDecodeTime\n */\ncollectDtsInfo = function (track, data) {\n  if (typeof data.pts === 'number') {\n    if (track.timelineStartInfo.pts === undefined) {\n      track.timelineStartInfo.pts = data.pts;\n    }\n\n    if (track.minSegmentPts === undefined) {\n      track.minSegmentPts = data.pts;\n    } else {\n      track.minSegmentPts = Math.min(track.minSegmentPts, data.pts);\n    }\n\n    if (track.maxSegmentPts === undefined) {\n      track.maxSegmentPts = data.pts;\n    } else {\n      track.maxSegmentPts = Math.max(track.maxSegmentPts, data.pts);\n    }\n  }\n\n  if (typeof data.dts === 'number') {\n    if (track.timelineStartInfo.dts === undefined) {\n      track.timelineStartInfo.dts = data.dts;\n    }\n\n    if (track.minSegmentDts === undefined) {\n      track.minSegmentDts = data.dts;\n    } else {\n      track.minSegmentDts = Math.min(track.minSegmentDts, data.dts);\n    }\n\n    if (track.maxSegmentDts === undefined) {\n      track.maxSegmentDts = data.dts;\n    } else {\n      track.maxSegmentDts = Math.max(track.maxSegmentDts, data.dts);\n    }\n  }\n};\n\n/**\n * Clear values used to calculate the baseMediaDecodeTime between\n * tracks\n */\nclearDtsInfo = function (track) {\n  delete track.minSegmentDts;\n  delete track.maxSegmentDts;\n  delete track.minSegmentPts;\n  delete track.maxSegmentPts;\n};\n\n/**\n * Calculate the track's baseMediaDecodeTime based on the earliest\n * DTS the transmuxer has ever seen and the minimum DTS for the\n * current track\n */\ncalculateTrackBaseMediaDecodeTime = function (track) {\n  var\n    oneSecondInPTS = 90000, // 90kHz clock\n    scale,\n    // Calculate the distance, in time, that this segment starts from the start\n    // of the timeline (earliest time seen since the transmuxer initialized)\n    timeSinceStartOfTimeline = track.minSegmentDts - track.timelineStartInfo.dts,\n    // Calculate the first sample's effective compositionTimeOffset\n    firstSampleCompositionOffset = track.minSegmentPts - track.minSegmentDts;\n\n  // track.timelineStartInfo.baseMediaDecodeTime is the location, in time, where\n  // we want the start of the first segment to be placed\n  track.baseMediaDecodeTime = track.timelineStartInfo.baseMediaDecodeTime;\n\n  // Add to that the distance this segment is from the very first\n  track.baseMediaDecodeTime += timeSinceStartOfTimeline;\n\n  // Subtract this segment's \"compositionTimeOffset\" so that the first frame of\n  // this segment is displayed exactly at the `baseMediaDecodeTime` or at the\n  // end of the previous segment\n  track.baseMediaDecodeTime -= firstSampleCompositionOffset;\n\n  // baseMediaDecodeTime must not become negative\n  track.baseMediaDecodeTime = Math.max(0, track.baseMediaDecodeTime);\n\n  if (track.type === 'audio') {\n    // Audio has a different clock equal to the sampling_rate so we need to\n    // scale the PTS values into the clock rate of the track\n    scale = track.samplerate / oneSecondInPTS;\n    track.baseMediaDecodeTime *= scale;\n    track.baseMediaDecodeTime = Math.floor(track.baseMediaDecodeTime);\n  }\n};\n\n/**\n * A Stream that can combine multiple streams (ie. audio & video)\n * into a single output segment for MSE. Also supports audio-only\n * and video-only streams.\n */\nCoalesceStream = function(options, metadataStream) {\n  // Number of Tracks per output segment\n  // If greater than 1, we combine multiple\n  // tracks into a single segment\n  this.numberOfTracks = 0;\n  this.metadataStream = metadataStream;\n\n  if (typeof options.remux !== 'undefined') {\n    this.remuxTracks = !!options.remux;\n  } else {\n    this.remuxTracks = true;\n  }\n\n  this.pendingTracks = [];\n  this.videoTrack = null;\n  this.pendingBoxes = [];\n  this.pendingCaptions = [];\n  this.pendingMetadata = [];\n  this.pendingBytes = 0;\n  this.emittedTracks = 0;\n\n  CoalesceStream.prototype.init.call(this);\n\n  // Take output from multiple\n  this.push = function(output) {\n    // buffer incoming captions until the associated video segment\n    // finishes\n    if (output.text) {\n      return this.pendingCaptions.push(output);\n    }\n    // buffer incoming id3 tags until the final flush\n    if (output.frames) {\n      return this.pendingMetadata.push(output);\n    }\n\n    // Add this track to the list of pending tracks and store\n    // important information required for the construction of\n    // the final segment\n    this.pendingTracks.push(output.track);\n    this.pendingBoxes.push(output.boxes);\n    this.pendingBytes += output.boxes.byteLength;\n\n    if (output.track.type === 'video') {\n      this.videoTrack = output.track;\n    }\n    if (output.track.type === 'audio') {\n      this.audioTrack = output.track;\n    }\n  };\n};\n\nCoalesceStream.prototype = new Stream();\nCoalesceStream.prototype.flush = function(flushSource) {\n  var\n    offset = 0,\n    event = {\n      captions: [],\n      metadata: [],\n      info: {}\n    },\n    caption,\n    id3,\n    initSegment,\n    timelineStartPts = 0,\n    i;\n\n  if (this.pendingTracks.length < this.numberOfTracks) {\n    if (flushSource !== 'VideoSegmentStream' &&\n        flushSource !== 'AudioSegmentStream') {\n      // Return because we haven't received a flush from a data-generating\n      // portion of the segment (meaning that we have only recieved meta-data\n      // or captions.)\n      return;\n    } else if (this.remuxTracks) {\n      // Return until we have enough tracks from the pipeline to remux (if we\n      // are remuxing audio and video into a single MP4)\n      return;\n    } else if (this.pendingTracks.length === 0) {\n      // In the case where we receive a flush without any data having been\n      // received we consider it an emitted track for the purposes of coalescing\n      // `done` events.\n      // We do this for the case where there is an audio and video track in the\n      // segment but no audio data. (seen in several playlists with alternate\n      // audio tracks and no audio present in the main TS segments.)\n      this.emittedTracks++;\n\n      if (this.emittedTracks >= this.numberOfTracks) {\n        this.trigger('done');\n        this.emittedTracks = 0;\n      }\n      return;\n    }\n  }\n\n  if (this.videoTrack) {\n    timelineStartPts = this.videoTrack.timelineStartInfo.pts;\n    VIDEO_PROPERTIES.forEach(function(prop) {\n      event.info[prop] = this.videoTrack[prop];\n    }, this);\n  } else if (this.audioTrack) {\n    timelineStartPts = this.audioTrack.timelineStartInfo.pts;\n    AUDIO_PROPERTIES.forEach(function(prop) {\n      event.info[prop] = this.audioTrack[prop];\n    }, this);\n  }\n\n  if (this.pendingTracks.length === 1) {\n    event.type = this.pendingTracks[0].type;\n  } else {\n    event.type = 'combined';\n  }\n\n  this.emittedTracks += this.pendingTracks.length;\n\n  initSegment = mp4.initSegment(this.pendingTracks);\n\n  // Create a new typed array large enough to hold the init\n  // segment and all tracks\n  event.data = new Uint8Array(initSegment.byteLength +\n                              this.pendingBytes);\n\n  // Create an init segment containing a moov\n  // and track definitions\n  event.data.set(initSegment);\n  offset += initSegment.byteLength;\n\n  // Append each moof+mdat (one per track) after the init segment\n  for (i = 0; i < this.pendingBoxes.length; i++) {\n    event.data.set(this.pendingBoxes[i], offset);\n    offset += this.pendingBoxes[i].byteLength;\n  }\n\n  // Translate caption PTS times into second offsets into the\n  // video timeline for the segment\n  for (i = 0; i < this.pendingCaptions.length; i++) {\n    caption = this.pendingCaptions[i];\n    caption.startTime = (caption.startPts - timelineStartPts);\n    caption.startTime /= 90e3;\n    caption.endTime = (caption.endPts - timelineStartPts);\n    caption.endTime /= 90e3;\n    event.captions.push(caption);\n  }\n\n  // Translate ID3 frame PTS times into second offsets into the\n  // video timeline for the segment\n  for (i = 0; i < this.pendingMetadata.length; i++) {\n    id3 = this.pendingMetadata[i];\n    id3.cueTime = (id3.pts - timelineStartPts);\n    id3.cueTime /= 90e3;\n    event.metadata.push(id3);\n  }\n  // We add this to every single emitted segment even though we only need\n  // it for the first\n  event.metadata.dispatchType = this.metadataStream.dispatchType;\n\n  // Reset stream state\n  this.pendingTracks.length = 0;\n  this.videoTrack = null;\n  this.pendingBoxes.length = 0;\n  this.pendingCaptions.length = 0;\n  this.pendingBytes = 0;\n  this.pendingMetadata.length = 0;\n\n  // Emit the built segment\n  this.trigger('data', event);\n\n  // Only emit `done` if all tracks have been flushed and emitted\n  if (this.emittedTracks >= this.numberOfTracks) {\n    this.trigger('done');\n    this.emittedTracks = 0;\n  }\n};\n/**\n * A Stream that expects MP2T binary data as input and produces\n * corresponding media segments, suitable for use with Media Source\n * Extension (MSE) implementations that support the ISO BMFF byte\n * stream format, like Chrome.\n */\nTransmuxer = function(options) {\n  var\n    self = this,\n    hasFlushed = true,\n    videoTrack,\n    audioTrack;\n\n  Transmuxer.prototype.init.call(this);\n\n  options = options || {};\n  this.baseMediaDecodeTime = options.baseMediaDecodeTime || 0;\n  this.transmuxPipeline_ = {};\n\n  this.setupAacPipeline = function() {\n    var pipeline = {};\n    this.transmuxPipeline_ = pipeline;\n\n    pipeline.type = 'aac';\n    pipeline.metadataStream = new m2ts.MetadataStream();\n\n    // set up the parsing pipeline\n    pipeline.aacStream = new AacStream();\n    pipeline.adtsStream = new AdtsStream();\n    pipeline.coalesceStream = new CoalesceStream(options, pipeline.metadataStream);\n    pipeline.headOfPipeline = pipeline.aacStream;\n\n    pipeline.aacStream.pipe(pipeline.adtsStream);\n    pipeline.aacStream.pipe(pipeline.metadataStream);\n    pipeline.metadataStream.pipe(pipeline.coalesceStream);\n\n    pipeline.metadataStream.on('timestamp', function(frame) {\n      pipeline.aacStream.setTimestamp(frame.timeStamp);\n    });\n\n    pipeline.aacStream.on('data', function(data) {\n      var i;\n\n      if (data.type === 'timed-metadata' && !pipeline.audioSegmentStream) {\n        audioTrack = audioTrack || {\n          timelineStartInfo: {\n            baseMediaDecodeTime: self.baseMediaDecodeTime\n          },\n          codec: 'adts',\n          type: 'audio'\n        };\n        // hook up the audio segment stream to the first track with aac data\n        pipeline.coalesceStream.numberOfTracks++;\n        pipeline.audioSegmentStream = new AudioSegmentStream(audioTrack);\n        // Set up the final part of the audio pipeline\n        pipeline.adtsStream\n          .pipe(pipeline.audioSegmentStream)\n          .pipe(pipeline.coalesceStream);\n      }\n    });\n\n    // Re-emit any data coming from the coalesce stream to the outside world\n    pipeline.coalesceStream.on('data', this.trigger.bind(this, 'data'));\n    // Let the consumer know we have finished flushing the entire pipeline\n    pipeline.coalesceStream.on('done', this.trigger.bind(this, 'done'));\n  };\n\n  this.setupTsPipeline = function() {\n    var pipeline = {};\n    this.transmuxPipeline_ = pipeline;\n\n    pipeline.type = 'ts';\n    pipeline.metadataStream = new m2ts.MetadataStream();\n\n    // set up the parsing pipeline\n    pipeline.packetStream = new m2ts.TransportPacketStream();\n    pipeline.parseStream = new m2ts.TransportParseStream();\n    pipeline.elementaryStream = new m2ts.ElementaryStream();\n    pipeline.adtsStream = new AdtsStream();\n    pipeline.h264Stream = new H264Stream();\n    pipeline.captionStream = new m2ts.CaptionStream();\n    pipeline.coalesceStream = new CoalesceStream(options, pipeline.metadataStream);\n    pipeline.headOfPipeline = pipeline.packetStream;\n\n    // disassemble MPEG2-TS packets into elementary streams\n    pipeline.packetStream\n      .pipe(pipeline.parseStream)\n      .pipe(pipeline.elementaryStream);\n\n    // !!THIS ORDER IS IMPORTANT!!\n    // demux the streams\n    pipeline.elementaryStream\n      .pipe(pipeline.h264Stream);\n    pipeline.elementaryStream\n      .pipe(pipeline.adtsStream);\n\n    pipeline.elementaryStream\n      .pipe(pipeline.metadataStream)\n      .pipe(pipeline.coalesceStream);\n\n    // Hook up CEA-608/708 caption stream\n    pipeline.h264Stream.pipe(pipeline.captionStream)\n      .pipe(pipeline.coalesceStream);\n\n    pipeline.elementaryStream.on('data', function(data) {\n      var i;\n\n      if (data.type === 'metadata') {\n        i = data.tracks.length;\n\n        // scan the tracks listed in the metadata\n        while (i--) {\n          if (!videoTrack && data.tracks[i].type === 'video') {\n            videoTrack = data.tracks[i];\n            videoTrack.timelineStartInfo.baseMediaDecodeTime = self.baseMediaDecodeTime;\n          } else if (!audioTrack && data.tracks[i].type === 'audio') {\n            audioTrack = data.tracks[i];\n            audioTrack.timelineStartInfo.baseMediaDecodeTime = self.baseMediaDecodeTime;\n          }\n        }\n\n        // hook up the video segment stream to the first track with h264 data\n        if (videoTrack && !pipeline.videoSegmentStream) {\n          pipeline.coalesceStream.numberOfTracks++;\n          pipeline.videoSegmentStream = new VideoSegmentStream(videoTrack);\n\n          pipeline.videoSegmentStream.on('timelineStartInfo', function(timelineStartInfo){\n          // When video emits timelineStartInfo data after a flush, we forward that\n          // info to the AudioSegmentStream, if it exists, because video timeline\n          // data takes precedence.\n            if (audioTrack) {\n              audioTrack.timelineStartInfo = timelineStartInfo;\n              // On the first segment we trim AAC frames that exist before the\n              // very earliest DTS we have seen in video because Chrome will\n              // interpret any video track with a baseMediaDecodeTime that is\n              // non-zero as a gap.\n              pipeline.audioSegmentStream.setEarliestDts(timelineStartInfo.dts);\n            }\n          });\n\n          // Set up the final part of the video pipeline\n          pipeline.h264Stream\n            .pipe(pipeline.videoSegmentStream)\n            .pipe(pipeline.coalesceStream);\n        }\n\n        if (audioTrack && !pipeline.audioSegmentStream) {\n          // hook up the audio segment stream to the first track with aac data\n          pipeline.coalesceStream.numberOfTracks++;\n          pipeline.audioSegmentStream = new AudioSegmentStream(audioTrack);\n\n          // Set up the final part of the audio pipeline\n          pipeline.adtsStream\n            .pipe(pipeline.audioSegmentStream)\n            .pipe(pipeline.coalesceStream);\n        }\n      }\n    });\n\n    // Re-emit any data coming from the coalesce stream to the outside world\n    pipeline.coalesceStream.on('data', this.trigger.bind(this, 'data'));\n    // Let the consumer know we have finished flushing the entire pipeline\n    pipeline.coalesceStream.on('done', this.trigger.bind(this, 'done'));\n  };\n\n  // hook up the segment streams once track metadata is delivered\n  this.setBaseMediaDecodeTime = function (baseMediaDecodeTime) {\n    var pipeline = this.transmuxPipeline_;\n\n    this.baseMediaDecodeTime = baseMediaDecodeTime;\n    if (audioTrack) {\n      audioTrack.timelineStartInfo.dts = undefined;\n      audioTrack.timelineStartInfo.pts = undefined;\n      clearDtsInfo(audioTrack);\n      audioTrack.timelineStartInfo.baseMediaDecodeTime = baseMediaDecodeTime;\n    }\n    if (videoTrack) {\n      if (pipeline.videoSegmentStream) {\n        pipeline.videoSegmentStream.gopCache_ = [];\n      }\n      videoTrack.timelineStartInfo.dts = undefined;\n      videoTrack.timelineStartInfo.pts = undefined;\n      clearDtsInfo(videoTrack);\n      videoTrack.timelineStartInfo.baseMediaDecodeTime = baseMediaDecodeTime;\n    }\n  };\n\n  // feed incoming data to the front of the parsing pipeline\n  this.push = function(data) {\n    if (hasFlushed) {\n      var isAac = isLikelyAacData(data);\n\n      if (isAac && this.transmuxPipeline_.type !== 'aac') {\n        this.setupAacPipeline();\n      } else if (!isAac && this.transmuxPipeline_.type !== 'ts') {\n        this.setupTsPipeline();\n      }\n      hasFlushed = false;\n    }\n    this.transmuxPipeline_.headOfPipeline.push(data);\n  };\n\n  // flush any buffered data\n  this.flush = function() {\n      hasFlushed = true;\n    // Start at the top of the pipeline and flush all pending work\n    this.transmuxPipeline_.headOfPipeline.flush();\n  };\n};\nTransmuxer.prototype = new Stream();\n\nmodule.exports = {\n  Transmuxer: Transmuxer,\n  VideoSegmentStream: VideoSegmentStream,\n  AudioSegmentStream: AudioSegmentStream,\n  AUDIO_PROPERTIES: AUDIO_PROPERTIES,\n  VIDEO_PROPERTIES: VIDEO_PROPERTIES\n};\n\n},{\"../aac\":36,\"../codecs/adts.js\":37,\"../codecs/h264\":38,\"../m2ts/m2ts.js\":46,\"../utils/stream.js\":55,\"./mp4-generator.js\":50}],52:[function(require,module,exports){\n'use strict';\n\nvar\n  tagTypes = {\n    0x08: 'audio',\n    0x09: 'video',\n    0x12: 'metadata'\n  },\n  hex = function (val) {\n    return '0x' + ('00' + val.toString(16)).slice(-2).toUpperCase();\n  },\n  hexStringList = function (data) {\n    var arr = [], i;\n    /* jshint -W086 */\n    while(data.byteLength > 0) {\n      i = 0;\n      switch(data.byteLength) {\n        default:\n          arr.push(hex(data[i++]));\n        case 7:\n          arr.push(hex(data[i++]));\n        case 6:\n          arr.push(hex(data[i++]));\n        case 5:\n          arr.push(hex(data[i++]));\n        case 4:\n          arr.push(hex(data[i++]));\n        case 3:\n          arr.push(hex(data[i++]));\n        case 2:\n          arr.push(hex(data[i++]));\n        case 1:\n          arr.push(hex(data[i++]));\n      }\n      data = data.subarray(i);\n    }\n    /* jshint +W086 */\n    return arr.join(' ');\n  },\n  parseAVCTag = function (tag, obj) {\n    var\n      avcPacketTypes = [\n        'AVC Sequence Header',\n        'AVC NALU',\n        'AVC End-of-Sequence'\n      ],\n      nalUnitTypes = [\n        'unspecified',\n        'slice_layer_without_partitioning',\n        'slice_data_partition_a_layer',\n        'slice_data_partition_b_layer',\n        'slice_data_partition_c_layer',\n        'slice_layer_without_partitioning_idr',\n        'sei',\n        'seq_parameter_set',\n        'pic_parameter_set',\n        'access_unit_delimiter',\n        'end_of_seq',\n        'end_of_stream',\n        'filler',\n        'seq_parameter_set_ext',\n        'prefix_nal_unit',\n        'subset_seq_parameter_set',\n        'reserved',\n        'reserved',\n        'reserved'\n      ],\n      compositionTime = (tag[1] & parseInt('01111111', 2) << 16) | (tag[2] << 8) | tag[3];\n\n    obj = obj || {};\n\n    obj.avcPacketType = avcPacketTypes[tag[0]];\n    obj.CompositionTime = (tag[1] & parseInt('10000000', 2)) ? -compositionTime : compositionTime;\n\n    if (tag[0] === 1) {\n      obj.nalUnitTypeRaw = hexStringList(tag.subarray(4, 100));\n    } else {\n      obj.data = hexStringList(tag.subarray(4));\n    }\n\n    return obj;\n  },\n  parseVideoTag = function (tag, obj) {\n    var\n      frameTypes = [\n        'Unknown',\n        'Keyframe (for AVC, a seekable frame)',\n        'Inter frame (for AVC, a nonseekable frame)',\n        'Disposable inter frame (H.263 only)',\n        'Generated keyframe (reserved for server use only)',\n        'Video info/command frame'\n      ],\n      codecIDs = [\n        'JPEG (currently unused)',\n        'Sorenson H.263',\n        'Screen video',\n        'On2 VP6',\n        'On2 VP6 with alpha channel',\n        'Screen video version 2',\n        'AVC'\n      ],\n      codecID = tag[0] & parseInt('00001111', 2);\n\n    obj = obj || {};\n\n    obj.frameType = frameTypes[(tag[0] & parseInt('11110000', 2)) >>> 4];\n    obj.codecID = codecID;\n\n    if (codecID === 7) {\n      return parseAVCTag(tag.subarray(1), obj);\n    }\n    return obj;\n  },\n  parseAACTag = function (tag, obj) {\n    var packetTypes = [\n      'AAC Sequence Header',\n      'AAC Raw'\n    ];\n\n    obj = obj || {};\n\n    obj.aacPacketType = packetTypes[tag[0]];\n    obj.data = hexStringList(tag.subarray(1));\n\n    return obj;\n  },\n  parseAudioTag = function (tag, obj) {\n    var\n      formatTable = [\n        'Linear PCM, platform endian',\n        'ADPCM',\n        'MP3',\n        'Linear PCM, little endian',\n        'Nellymoser 16-kHz mono',\n        'Nellymoser 8-kHz mono',\n        'Nellymoser',\n        'G.711 A-law logarithmic PCM',\n        'G.711 mu-law logarithmic PCM',\n        'reserved',\n        'AAC',\n        'Speex',\n        'MP3 8-Khz',\n        'Device-specific sound'\n      ],\n      samplingRateTable = [\n        '5.5-kHz',\n        '11-kHz',\n        '22-kHz',\n        '44-kHz'\n      ],\n      soundFormat = (tag[0] & parseInt('11110000', 2)) >>> 4;\n\n    obj = obj || {};\n\n    obj.soundFormat = formatTable[soundFormat];\n    obj.soundRate = samplingRateTable[(tag[0] & parseInt('00001100', 2)) >>> 2];\n    obj.soundSize = ((tag[0] & parseInt('00000010', 2)) >>> 1) ? '16-bit' : '8-bit';\n    obj.soundType = (tag[0] & parseInt('00000001', 2)) ? 'Stereo' : 'Mono';\n\n    if (soundFormat === 10) {\n      return parseAACTag(tag.subarray(1), obj);\n    }\n    return obj;\n  },\n  parseGenericTag = function (tag) {\n    return {\n      tagType: tagTypes[tag[0]],\n      dataSize: (tag[1] << 16) | (tag[2] << 8) | tag[3],\n      timestamp: (tag[7] << 24) | (tag[4] << 16) | (tag[5] << 8) | tag[6],\n      streamID: (tag[8] << 16) | (tag[9] << 8) | tag[10]\n    };\n  },\n  inspectFlvTag = function (tag) {\n    var header = parseGenericTag(tag);\n    switch (tag[0]) {\n      case 0x08:\n        parseAudioTag(tag.subarray(11), header);\n        break;\n      case 0x09:\n        parseVideoTag(tag.subarray(11), header);\n        break;\n      case 0x12:\n    }\n    return header;\n  },\n  inspectFlv = function (bytes) {\n    var i = 9, // header\n        dataSize,\n        parsedResults = [],\n        tag;\n\n    // traverse the tags\n    i += 4; // skip previous tag size\n    while (i < bytes.byteLength) {\n      dataSize = bytes[i + 1] << 16;\n      dataSize |= bytes[i + 2] << 8;\n      dataSize |= bytes[i + 3];\n      dataSize += 11;\n\n      tag = bytes.subarray(i, i + dataSize);\n      parsedResults.push(inspectFlvTag(tag));\n      i += dataSize + 4;\n    }\n    return parsedResults;\n  },\n  textifyFlv = function (flvTagArray) {\n    return JSON.stringify(flvTagArray, null, 2);\n  };\n\nmodule.exports = {\n  inspectTag: inspectFlvTag,\n  inspect: inspectFlv,\n  textify: textifyFlv\n};\n\n},{}],53:[function(require,module,exports){\n(function (global){\n'use strict';\n\nvar\n  inspectMp4,\n  textifyMp4,\n  /**\n   * Returns the string representation of an ASCII encoded four byte buffer.\n   * @param buffer {Uint8Array} a four-byte buffer to translate\n   * @return {string} the corresponding string\n   */\n  parseType = function(buffer) {\n    var result = '';\n    result += String.fromCharCode(buffer[0]);\n    result += String.fromCharCode(buffer[1]);\n    result += String.fromCharCode(buffer[2]);\n    result += String.fromCharCode(buffer[3]);\n    return result;\n  },\n  parseMp4Date = function(seconds) {\n    return new Date(seconds * 1000 - 2082844800000);\n  },\n  parseSampleFlags = function(flags) {\n    return {\n      isLeading: (flags[0] & 0x0c) >>> 2,\n      dependsOn: flags[0] & 0x03,\n      isDependedOn: (flags[1] & 0xc0) >>> 6,\n      hasRedundancy: (flags[1] & 0x30) >>> 4,\n      paddingValue: (flags[1] & 0x0e) >>> 1,\n      isNonSyncSample: flags[1] & 0x01,\n      degradationPriority: (flags[2] << 8) | flags[3]\n    };\n  },\n  nalParse = function(avcStream) {\n    var\n      avcView = new DataView(avcStream.buffer, avcStream.byteOffset, avcStream.byteLength),\n      result = [],\n      i,\n      length;\n    for (i = 0; i + 4 < avcStream.length; i += length) {\n      length = avcView.getUint32(i);\n      i += 4;\n\n      // bail if this doesn't appear to be an H264 stream\n      if (length <= 0) {\n        result.push('<span style=\\'color:red;\\'>MALFORMED DATA</span>');\n        continue;\n      }\n\n      switch(avcStream[i] & 0x1F) {\n      case 0x01:\n        result.push('slice_layer_without_partitioning_rbsp');\n        break;\n      case 0x05:\n        result.push('slice_layer_without_partitioning_rbsp_idr');\n        break;\n      case 0x06:\n        result.push('sei_rbsp');\n        break;\n      case 0x07:\n        result.push('seq_parameter_set_rbsp');\n        break;\n      case 0x08:\n        result.push('pic_parameter_set_rbsp');\n        break;\n      case 0x09:\n        result.push('access_unit_delimiter_rbsp');\n        break;\n      default:\n        result.push('UNKNOWN NAL - ' + avcStream[i] & 0x1F);\n        break;\n      }\n    }\n    return result;\n  },\n\n  // registry of handlers for individual mp4 box types\n  parse = {\n    // codingname, not a first-class box type. stsd entries share the\n    // same format as real boxes so the parsing infrastructure can be\n    // shared\n    avc1: function(data) {\n      var view = new DataView(data.buffer, data.byteOffset, data.byteLength);\n      return {\n        dataReferenceIndex: view.getUint16(6),\n        width:  view.getUint16(24),\n        height: view.getUint16(26),\n        horizresolution: view.getUint16(28) + (view.getUint16(30) / 16),\n        vertresolution: view.getUint16(32) + (view.getUint16(34) / 16),\n        frameCount: view.getUint16(40),\n        depth: view.getUint16(74),\n        config: inspectMp4(data.subarray(78, data.byteLength))\n      };\n    },\n    avcC: function(data) {\n      var\n        view = new DataView(data.buffer, data.byteOffset, data.byteLength),\n        result = {\n          configurationVersion: data[0],\n          avcProfileIndication: data[1],\n          profileCompatibility: data[2],\n          avcLevelIndication: data[3],\n          lengthSizeMinusOne: data[4] & 0x03,\n          sps: [],\n          pps: []\n        },\n        numOfSequenceParameterSets = data[5] & 0x1f,\n        numOfPictureParameterSets,\n        nalSize,\n        offset,\n        i;\n\n      // iterate past any SPSs\n      offset = 6;\n      for (i = 0; i < numOfSequenceParameterSets; i++) {\n        nalSize = view.getUint16(offset);\n        offset += 2;\n        result.sps.push(new Uint8Array(data.subarray(offset, offset + nalSize)));\n        offset += nalSize;\n      }\n      // iterate past any PPSs\n      numOfPictureParameterSets = data[offset];\n      offset++;\n      for (i = 0; i < numOfPictureParameterSets; i++) {\n        nalSize = view.getUint16(offset);\n        offset += 2;\n        result.pps.push(new Uint8Array(data.subarray(offset, offset + nalSize)));\n        offset += nalSize;\n      }\n      return result;\n    },\n    btrt: function(data) {\n      var view = new DataView(data.buffer, data.byteOffset, data.byteLength);\n      return {\n        bufferSizeDB: view.getUint32(0),\n        maxBitrate: view.getUint32(4),\n        avgBitrate: view.getUint32(8)\n      };\n    },\n    esds: function(data) {\n      return {\n        version: data[0],\n        flags: new Uint8Array(data.subarray(1, 4)),\n        esId: (data[6] << 8) | data[7],\n        streamPriority: data[8] & 0x1f,\n        decoderConfig: {\n          objectProfileIndication: data[11],\n          streamType: (data[12] >>> 2) & 0x3f,\n          bufferSize: (data[13] << 16) | (data[14] << 8) | data[15],\n          maxBitrate: (data[16] << 24) |\n            (data[17] << 16) |\n            (data[18] <<  8) |\n            data[19],\n          avgBitrate: (data[20] << 24) |\n            (data[21] << 16) |\n            (data[22] <<  8) |\n            data[23],\n          decoderConfigDescriptor: {\n            tag: data[24],\n            length: data[25],\n            audioObjectType: (data[26] >>> 3) & 0x1f,\n            samplingFrequencyIndex: ((data[26] & 0x07) << 1) |\n              ((data[27] >>> 7) & 0x01),\n            channelConfiguration: (data[27] >>> 3) & 0x0f\n          }\n        }\n      };\n    },\n    ftyp: function(data) {\n      var\n        view = new DataView(data.buffer, data.byteOffset, data.byteLength),\n        result = {\n          majorBrand: parseType(data.subarray(0, 4)),\n          minorVersion: view.getUint32(4),\n          compatibleBrands: []\n        },\n        i = 8;\n      while (i < data.byteLength) {\n        result.compatibleBrands.push(parseType(data.subarray(i, i + 4)));\n        i += 4;\n      }\n      return result;\n    },\n    dinf: function(data) {\n      return {\n        boxes: inspectMp4(data)\n      };\n    },\n    dref: function(data) {\n      return {\n        version: data[0],\n        flags: new Uint8Array(data.subarray(1, 4)),\n        dataReferences: inspectMp4(data.subarray(8))\n      };\n    },\n    hdlr: function(data) {\n      var\n        view = new DataView(data.buffer, data.byteOffset, data.byteLength),\n        language,\n        result = {\n          version: view.getUint8(0),\n          flags: new Uint8Array(data.subarray(1, 4)),\n          handlerType: parseType(data.subarray(8, 12)),\n          name: ''\n        },\n        i = 8;\n\n      // parse out the name field\n      for (i = 24; i < data.byteLength; i++) {\n        if (data[i] === 0x00) {\n          // the name field is null-terminated\n          i++;\n          break;\n        }\n        result.name += String.fromCharCode(data[i]);\n      }\n      // decode UTF-8 to javascript's internal representation\n      // see http://ecmanaut.blogspot.com/2006/07/encoding-decoding-utf8-in-javascript.html\n      result.name = decodeURIComponent(global.escape(result.name));\n\n      return result;\n    },\n    mdat: function(data) {\n      return {\n        byteLength: data.byteLength,\n        nals: nalParse(data)\n      };\n    },\n    mdhd: function(data) {\n      var\n        view = new DataView(data.buffer, data.byteOffset, data.byteLength),\n        i = 4,\n        language,\n        result = {\n          version: view.getUint8(0),\n          flags: new Uint8Array(data.subarray(1, 4)),\n          language: ''\n        };\n      if (result.version === 1) {\n        i += 4;\n        result.creationTime = parseMp4Date(view.getUint32(i)); // truncating top 4 bytes\n        i += 8;\n        result.modificationTime = parseMp4Date(view.getUint32(i)); // truncating top 4 bytes\n        i += 4;\n        result.timescale = view.getUint32(i);\n        i += 8;\n        result.duration = view.getUint32(i); // truncating top 4 bytes\n      } else {\n        result.creationTime = parseMp4Date(view.getUint32(i));\n        i += 4;\n        result.modificationTime = parseMp4Date(view.getUint32(i));\n        i += 4;\n        result.timescale = view.getUint32(i);\n        i += 4;\n        result.duration = view.getUint32(i);\n      }\n      i += 4;\n      // language is stored as an ISO-639-2/T code in an array of three 5-bit fields\n      // each field is the packed difference between its ASCII value and 0x60\n      language = view.getUint16(i);\n      result.language += String.fromCharCode((language >> 10) + 0x60);\n      result.language += String.fromCharCode(((language & 0x03c0) >> 5) + 0x60);\n      result.language += String.fromCharCode((language & 0x1f) + 0x60);\n\n      return result;\n    },\n    mdia: function(data) {\n      return {\n        boxes: inspectMp4(data)\n      };\n    },\n    mfhd: function(data) {\n      return {\n        version: data[0],\n        flags: new Uint8Array(data.subarray(1, 4)),\n        sequenceNumber: (data[4] << 24) |\n          (data[5] << 16) |\n          (data[6] << 8) |\n          (data[7])\n      };\n    },\n    minf: function(data) {\n      return {\n        boxes: inspectMp4(data)\n      };\n    },\n    // codingname, not a first-class box type. stsd entries share the\n    // same format as real boxes so the parsing infrastructure can be\n    // shared\n    mp4a: function(data) {\n      var\n        view = new DataView(data.buffer, data.byteOffset, data.byteLength),\n        result = {\n          // 6 bytes reserved\n          dataReferenceIndex: view.getUint16(6),\n          // 4 + 4 bytes reserved\n          channelcount: view.getUint16(16),\n          samplesize: view.getUint16(18),\n          // 2 bytes pre_defined\n          // 2 bytes reserved\n          samplerate: view.getUint16(24) + (view.getUint16(26) / 65536)\n        };\n\n      // if there are more bytes to process, assume this is an ISO/IEC\n      // 14496-14 MP4AudioSampleEntry and parse the ESDBox\n      if (data.byteLength > 28) {\n        result.streamDescriptor = inspectMp4(data.subarray(28))[0];\n      }\n      return result;\n    },\n    moof: function(data) {\n      return {\n        boxes: inspectMp4(data)\n      };\n    },\n    moov: function(data) {\n      return {\n        boxes: inspectMp4(data)\n      };\n    },\n    mvex: function(data) {\n      return {\n        boxes: inspectMp4(data)\n      };\n    },\n    mvhd: function(data) {\n      var\n        view = new DataView(data.buffer, data.byteOffset, data.byteLength),\n        i = 4,\n        result = {\n          version: view.getUint8(0),\n          flags: new Uint8Array(data.subarray(1, 4))\n        };\n\n      if (result.version === 1) {\n        i += 4;\n        result.creationTime = parseMp4Date(view.getUint32(i)); // truncating top 4 bytes\n        i += 8;\n        result.modificationTime = parseMp4Date(view.getUint32(i)); // truncating top 4 bytes\n        i += 4;\n        result.timescale = view.getUint32(i);\n        i += 8;\n        result.duration = view.getUint32(i); // truncating top 4 bytes\n      } else {\n        result.creationTime = parseMp4Date(view.getUint32(i));\n        i += 4;\n        result.modificationTime = parseMp4Date(view.getUint32(i));\n        i += 4;\n        result.timescale = view.getUint32(i);\n        i += 4;\n        result.duration = view.getUint32(i);\n      }\n      i += 4;\n\n      // convert fixed-point, base 16 back to a number\n      result.rate = view.getUint16(i) + (view.getUint16(i + 2) / 16);\n      i += 4;\n      result.volume = view.getUint8(i) + (view.getUint8(i + 1) / 8);\n      i += 2;\n      i += 2;\n      i += 2 * 4;\n      result.matrix = new Uint32Array(data.subarray(i, i + (9 * 4)));\n      i += 9 * 4;\n      i += 6 * 4;\n      result.nextTrackId = view.getUint32(i);\n      return result;\n    },\n    pdin: function(data) {\n      var view = new DataView(data.buffer, data.byteOffset, data.byteLength);\n      return {\n        version: view.getUint8(0),\n        flags: new Uint8Array(data.subarray(1, 4)),\n        rate: view.getUint32(4),\n        initialDelay: view.getUint32(8)\n      };\n    },\n    sdtp: function(data) {\n      var\n        result = {\n          version: data[0],\n          flags: new Uint8Array(data.subarray(1, 4)),\n          samples: []\n        }, i;\n\n      for (i = 4; i < data.byteLength; i++) {\n        result.samples.push({\n          dependsOn: (data[i] & 0x30) >> 4,\n          isDependedOn: (data[i] & 0x0c) >> 2,\n          hasRedundancy: data[i] & 0x03\n        });\n      }\n      return result;\n    },\n    sidx: function(data) {\n      var view = new DataView(data.buffer, data.byteOffset, data.byteLength),\n          result = {\n            version: data[0],\n            flags: new Uint8Array(data.subarray(1, 4)),\n            references: [],\n            referenceId: view.getUint32(4),\n            timescale: view.getUint32(8),\n            earliestPresentationTime: view.getUint32(12),\n            firstOffset: view.getUint32(16)\n          },\n          referenceCount = view.getUint16(22),\n          i;\n\n      for (i = 24; referenceCount; i += 12, referenceCount-- ) {\n        result.references.push({\n          referenceType: (data[i] & 0x80) >>> 7,\n          referencedSize: view.getUint32(i) & 0x7FFFFFFF,\n          subsegmentDuration: view.getUint32(i + 4),\n          startsWithSap: !!(data[i + 8] & 0x80),\n          sapType: (data[i + 8] & 0x70) >>> 4,\n          sapDeltaTime: view.getUint32(i + 8) & 0x0FFFFFFF\n        });\n      }\n\n      return result;\n    },\n    smhd: function(data) {\n      return {\n        version: data[0],\n        flags: new Uint8Array(data.subarray(1, 4)),\n        balance: data[4] + (data[5] / 256)\n      };\n    },\n    stbl: function(data) {\n      return {\n        boxes: inspectMp4(data)\n      };\n    },\n    stco: function(data) {\n      var\n        view = new DataView(data.buffer, data.byteOffset, data.byteLength),\n        result = {\n          version: data[0],\n          flags: new Uint8Array(data.subarray(1, 4)),\n          chunkOffsets: []\n        },\n        entryCount = view.getUint32(4),\n        i;\n      for (i = 8; entryCount; i += 4, entryCount--) {\n        result.chunkOffsets.push(view.getUint32(i));\n      }\n      return result;\n    },\n    stsc: function(data) {\n      var\n        view = new DataView(data.buffer, data.byteOffset, data.byteLength),\n        entryCount = view.getUint32(4),\n        result = {\n          version: data[0],\n          flags: new Uint8Array(data.subarray(1, 4)),\n          sampleToChunks: []\n        },\n        i;\n      for (i = 8; entryCount; i += 12, entryCount--) {\n        result.sampleToChunks.push({\n          firstChunk: view.getUint32(i),\n          samplesPerChunk: view.getUint32(i + 4),\n          sampleDescriptionIndex: view.getUint32(i + 8)\n        });\n      }\n      return result;\n    },\n    stsd: function(data) {\n      return {\n        version: data[0],\n        flags: new Uint8Array(data.subarray(1, 4)),\n        sampleDescriptions: inspectMp4(data.subarray(8))\n      };\n    },\n    stsz: function(data) {\n      var\n        view = new DataView(data.buffer, data.byteOffset, data.byteLength),\n        result = {\n          version: data[0],\n          flags: new Uint8Array(data.subarray(1, 4)),\n          sampleSize: view.getUint32(4),\n          entries: []\n        },\n        i;\n      for (i = 12; i < data.byteLength; i += 4) {\n        result.entries.push(view.getUint32(i));\n      }\n      return result;\n    },\n    stts: function(data) {\n      var\n        view = new DataView(data.buffer, data.byteOffset, data.byteLength),\n        result = {\n          version: data[0],\n          flags: new Uint8Array(data.subarray(1, 4)),\n          timeToSamples: []\n        },\n        entryCount = view.getUint32(4),\n        i;\n\n      for (i = 8; entryCount; i += 8, entryCount--) {\n        result.timeToSamples.push({\n          sampleCount: view.getUint32(i),\n          sampleDelta: view.getUint32(i + 4)\n        });\n      }\n      return result;\n    },\n    styp: function(data) {\n      return parse.ftyp(data);\n    },\n    tfdt: function(data) {\n      return {\n        version: data[0],\n        flags: new Uint8Array(data.subarray(1, 4)),\n        baseMediaDecodeTime: data[4] << 24 | data[5] << 16 | data[6] << 8 | data[7]\n      };\n    },\n    tfhd: function(data) {\n      var\n        view = new DataView(data.buffer, data.byteOffset, data.byteLength),\n        result = {\n          version: data[0],\n          flags: new Uint8Array(data.subarray(1, 4)),\n          trackId: view.getUint32(4)\n        },\n        baseDataOffsetPresent = result.flags[2] & 0x01,\n        sampleDescriptionIndexPresent = result.flags[2] & 0x02,\n        defaultSampleDurationPresent = result.flags[2] & 0x08,\n        defaultSampleSizePresent = result.flags[2] & 0x10,\n        defaultSampleFlagsPresent = result.flags[2] & 0x20,\n        i;\n\n      i = 8;\n      if (baseDataOffsetPresent) {\n        i += 4; // truncate top 4 bytes\n        result.baseDataOffset = view.getUint32(12);\n        i += 4;\n      }\n      if (sampleDescriptionIndexPresent) {\n        result.sampleDescriptionIndex = view.getUint32(i);\n        i += 4;\n      }\n      if (defaultSampleDurationPresent) {\n        result.defaultSampleDuration = view.getUint32(i);\n        i += 4;\n      }\n      if (defaultSampleSizePresent) {\n        result.defaultSampleSize = view.getUint32(i);\n        i += 4;\n      }\n      if (defaultSampleFlagsPresent) {\n        result.defaultSampleFlags = view.getUint32(i);\n      }\n      return result;\n    },\n    tkhd: function(data) {\n      var\n        view = new DataView(data.buffer, data.byteOffset, data.byteLength),\n        i = 4,\n        result = {\n          version: view.getUint8(0),\n          flags: new Uint8Array(data.subarray(1, 4)),\n        };\n      if (result.version === 1) {\n        i += 4;\n        result.creationTime = parseMp4Date(view.getUint32(i)); // truncating top 4 bytes\n        i += 8;\n        result.modificationTime = parseMp4Date(view.getUint32(i)); // truncating top 4 bytes\n        i += 4;\n        result.trackId = view.getUint32(i);\n        i += 4;\n        i += 8;\n        result.duration = view.getUint32(i); // truncating top 4 bytes\n      } else {\n        result.creationTime = parseMp4Date(view.getUint32(i));\n        i += 4;\n        result.modificationTime = parseMp4Date(view.getUint32(i));\n        i += 4;\n        result.trackId = view.getUint32(i);\n        i += 4;\n        i += 4;\n        result.duration = view.getUint32(i);\n      }\n      i += 4;\n      i += 2 * 4;\n      result.layer = view.getUint16(i);\n      i += 2;\n      result.alternateGroup = view.getUint16(i);\n      i += 2;\n      // convert fixed-point, base 16 back to a number\n      result.volume = view.getUint8(i) + (view.getUint8(i + 1) / 8);\n      i += 2;\n      i += 2;\n      result.matrix = new Uint32Array(data.subarray(i, i + (9 * 4)));\n      i += 9 * 4;\n      result.width = view.getUint16(i) + (view.getUint16(i + 2) / 16);\n      i += 4;\n      result.height = view.getUint16(i) + (view.getUint16(i + 2) / 16);\n      return result;\n    },\n    traf: function(data) {\n      return {\n        boxes: inspectMp4(data)\n      };\n    },\n    trak: function(data) {\n      return {\n        boxes: inspectMp4(data)\n      };\n    },\n    trex: function(data) {\n      var view = new DataView(data.buffer, data.byteOffset, data.byteLength);\n      return {\n        version: data[0],\n        flags: new Uint8Array(data.subarray(1, 4)),\n        trackId: view.getUint32(4),\n        defaultSampleDescriptionIndex: view.getUint32(8),\n        defaultSampleDuration: view.getUint32(12),\n        defaultSampleSize: view.getUint32(16),\n        sampleDependsOn: data[20] & 0x03,\n        sampleIsDependedOn: (data[21] & 0xc0) >> 6,\n        sampleHasRedundancy: (data[21] & 0x30) >> 4,\n        samplePaddingValue: (data[21] & 0x0e) >> 1,\n        sampleIsDifferenceSample: !!(data[21] & 0x01),\n        sampleDegradationPriority: view.getUint16(22)\n      };\n    },\n    trun: function(data) {\n      var\n        result = {\n          version: data[0],\n          flags: new Uint8Array(data.subarray(1, 4)),\n          samples: []\n        },\n        view = new DataView(data.buffer, data.byteOffset, data.byteLength),\n        dataOffsetPresent = result.flags[2] & 0x01,\n        firstSampleFlagsPresent = result.flags[2] & 0x04,\n        sampleDurationPresent = result.flags[1] & 0x01,\n        sampleSizePresent = result.flags[1] & 0x02,\n        sampleFlagsPresent = result.flags[1] & 0x04,\n        sampleCompositionTimeOffsetPresent = result.flags[1] & 0x08,\n        sampleCount = view.getUint32(4),\n        offset = 8,\n        sample;\n\n      if (dataOffsetPresent) {\n        result.dataOffset = view.getUint32(offset);\n        offset += 4;\n      }\n\n      if (firstSampleFlagsPresent && sampleCount) {\n        sample = {\n          flags: parseSampleFlags(data.subarray(offset, offset + 4))\n        };\n        offset += 4;\n        if (sampleDurationPresent) {\n          sample.duration = view.getUint32(offset);\n          offset += 4;\n        }\n        if (sampleSizePresent) {\n          sample.size = view.getUint32(offset);\n          offset += 4;\n        }\n        if (sampleCompositionTimeOffsetPresent) {\n          sample.compositionTimeOffset = view.getUint32(offset);\n          offset += 4;\n        }\n        result.samples.push(sample);\n        sampleCount--;\n      }\n\n      while (sampleCount--) {\n        sample = {};\n        if (sampleDurationPresent) {\n          sample.duration = view.getUint32(offset);\n          offset += 4;\n        }\n        if (sampleSizePresent) {\n          sample.size = view.getUint32(offset);\n          offset += 4;\n        }\n        if (sampleFlagsPresent) {\n          sample.flags = parseSampleFlags(data.subarray(offset, offset + 4));\n          offset += 4;\n        }\n        if (sampleCompositionTimeOffsetPresent) {\n          sample.compositionTimeOffset = view.getUint32(offset);\n          offset += 4;\n        }\n        result.samples.push(sample);\n      }\n      return result;\n    },\n    'url ': function(data) {\n      return {\n        version: data[0],\n        flags: new Uint8Array(data.subarray(1, 4))\n      };\n    },\n    vmhd: function(data) {\n      var view = new DataView(data.buffer, data.byteOffset, data.byteLength);\n      return {\n        version: data[0],\n        flags: new Uint8Array(data.subarray(1, 4)),\n        graphicsmode: view.getUint16(4),\n        opcolor: new Uint16Array([view.getUint16(6),\n                                  view.getUint16(8),\n                                  view.getUint16(10)])\n      };\n    }\n  };\n\n\n/**\n * Return a javascript array of box objects parsed from an ISO base\n * media file.\n * @param data {Uint8Array} the binary data of the media to be inspected\n * @return {array} a javascript array of potentially nested box objects\n */\ninspectMp4 = function(data) {\n  var\n    i = 0,\n    result = [],\n    view,\n    size,\n    type,\n    end,\n    box;\n\n  // Convert data from Uint8Array to ArrayBuffer, to follow Dataview API\n  var ab = new ArrayBuffer(data.length);\n  var v = new Uint8Array(ab);\n  for (var z = 0; z < data.length; ++z) {\n      v[z] = data[z];\n  }\n  view = new DataView(ab);\n\n\n  while (i < data.byteLength) {\n    // parse box data\n    size = view.getUint32(i);\n    type =  parseType(data.subarray(i + 4, i + 8));\n    end = size > 1 ? i + size : data.byteLength;\n\n    // parse type-specific data\n    box = (parse[type] || function(data) {\n      return {\n        data: data\n      };\n    })(data.subarray(i + 8, end));\n    box.size = size;\n    box.type = type;\n\n    // store this box and move to the next\n    result.push(box);\n    i = end;\n  }\n  return result;\n};\n\n/**\n * Returns a textual representation of the javascript represtentation\n * of an MP4 file. You can use it as an alternative to\n * JSON.stringify() to compare inspected MP4s.\n * @param inspectedMp4 {array} the parsed array of boxes in an MP4\n * file\n * @param depth {number} (optional) the number of ancestor boxes of\n * the elements of inspectedMp4. Assumed to be zero if unspecified.\n * @return {string} a text representation of the parsed MP4\n */\ntextifyMp4 = function(inspectedMp4, depth) {\n  var indent;\n  depth = depth || 0;\n  indent = new Array(depth * 2 + 1).join(' ');\n\n  // iterate over all the boxes\n  return inspectedMp4.map(function(box, index) {\n\n    // list the box type first at the current indentation level\n    return indent + box.type + '\\n' +\n\n      // the type is already included and handle child boxes separately\n      Object.keys(box).filter(function(key) {\n        return key !== 'type' && key !== 'boxes';\n\n      // output all the box properties\n      }).map(function(key) {\n        var prefix = indent + '  ' + key + ': ',\n            value = box[key];\n\n        // print out raw bytes as hexademical\n        if (value instanceof Uint8Array || value instanceof Uint32Array) {\n          var bytes = Array.prototype.slice.call(new Uint8Array(value.buffer, value.byteOffset, value.byteLength))\n              .map(function(byte) {\n                return ' ' + ('00' + byte.toString(16)).slice(-2);\n              }).join('').match(/.{1,24}/g);\n          if (!bytes) {\n            return prefix + '<>';\n          }\n          if (bytes.length === 1) {\n            return prefix + '<' + bytes.join('').slice(1) + '>';\n          }\n          return prefix + '<\\n' + bytes.map(function(line) {\n            return indent + '  ' + line;\n          }).join('\\n') + '\\n' + indent + '  >';\n        }\n\n        // stringify generic objects\n        return prefix +\n            JSON.stringify(value, null, 2)\n              .split('\\n').map(function(line, index) {\n                if (index === 0) {\n                  return line;\n                }\n                return indent + '  ' + line;\n              }).join('\\n');\n      }).join('\\n') +\n\n    // recursively textify the child boxes\n    (box.boxes ? '\\n' + textifyMp4(box.boxes, depth + 1) : '');\n  }).join('\\n');\n};\n\nmodule.exports = {\n  inspect: inspectMp4,\n  textify: textifyMp4\n};\n\n}).call(this,typeof global !== \"undefined\" ? global : typeof self !== \"undefined\" ? self : typeof window !== \"undefined\" ? window : {})\n},{}],54:[function(require,module,exports){\n'use strict';\n\nvar ExpGolomb;\n\n/**\n * Parser for exponential Golomb codes, a variable-bitwidth number encoding\n * scheme used by h264.\n */\nExpGolomb = function(workingData) {\n  var\n    // the number of bytes left to examine in workingData\n    workingBytesAvailable = workingData.byteLength,\n\n    // the current word being examined\n    workingWord = 0, // :uint\n\n    // the number of bits left to examine in the current word\n    workingBitsAvailable = 0; // :uint;\n\n  // ():uint\n  this.length = function() {\n    return (8 * workingBytesAvailable);\n  };\n\n  // ():uint\n  this.bitsAvailable = function() {\n    return (8 * workingBytesAvailable) + workingBitsAvailable;\n  };\n\n  // ():void\n  this.loadWord = function() {\n    var\n      position = workingData.byteLength - workingBytesAvailable,\n      workingBytes = new Uint8Array(4),\n      availableBytes = Math.min(4, workingBytesAvailable);\n\n    if (availableBytes === 0) {\n      throw new Error('no bytes available');\n    }\n\n    workingBytes.set(workingData.subarray(position,\n                                          position + availableBytes));\n    workingWord = new DataView(workingBytes.buffer).getUint32(0);\n\n    // track the amount of workingData that has been processed\n    workingBitsAvailable = availableBytes * 8;\n    workingBytesAvailable -= availableBytes;\n  };\n\n  // (count:int):void\n  this.skipBits = function(count) {\n    var skipBytes; // :int\n    if (workingBitsAvailable > count) {\n      workingWord          <<= count;\n      workingBitsAvailable -= count;\n    } else {\n      count -= workingBitsAvailable;\n      skipBytes = Math.floor(count / 8);\n\n      count -= (skipBytes * 8);\n      workingBytesAvailable -= skipBytes;\n\n      this.loadWord();\n\n      workingWord <<= count;\n      workingBitsAvailable -= count;\n    }\n  };\n\n  // (size:int):uint\n  this.readBits = function(size) {\n    var\n      bits = Math.min(workingBitsAvailable, size), // :uint\n      valu = workingWord >>> (32 - bits); // :uint\n    // if size > 31, handle error\n    workingBitsAvailable -= bits;\n    if (workingBitsAvailable > 0) {\n      workingWord <<= bits;\n    } else if (workingBytesAvailable > 0) {\n      this.loadWord();\n    }\n\n    bits = size - bits;\n    if (bits > 0) {\n      return valu << bits | this.readBits(bits);\n    } else {\n      return valu;\n    }\n  };\n\n  // ():uint\n  this.skipLeadingZeros = function() {\n    var leadingZeroCount; // :uint\n    for (leadingZeroCount = 0 ; leadingZeroCount < workingBitsAvailable ; ++leadingZeroCount) {\n      if (0 !== (workingWord & (0x80000000 >>> leadingZeroCount))) {\n        // the first bit of working word is 1\n        workingWord <<= leadingZeroCount;\n        workingBitsAvailable -= leadingZeroCount;\n        return leadingZeroCount;\n      }\n    }\n\n    // we exhausted workingWord and still have not found a 1\n    this.loadWord();\n    return leadingZeroCount + this.skipLeadingZeros();\n  };\n\n  // ():void\n  this.skipUnsignedExpGolomb = function() {\n    this.skipBits(1 + this.skipLeadingZeros());\n  };\n\n  // ():void\n  this.skipExpGolomb = function() {\n    this.skipBits(1 + this.skipLeadingZeros());\n  };\n\n  // ():uint\n  this.readUnsignedExpGolomb = function() {\n    var clz = this.skipLeadingZeros(); // :uint\n    return this.readBits(clz + 1) - 1;\n  };\n\n  // ():int\n  this.readExpGolomb = function() {\n    var valu = this.readUnsignedExpGolomb(); // :int\n    if (0x01 & valu) {\n      // the number is odd if the low order bit is set\n      return (1 + valu) >>> 1; // add 1 to make it even, and divide by 2\n    } else {\n      return -1 * (valu >>> 1); // divide by two then make it negative\n    }\n  };\n\n  // Some convenience functions\n  // :Boolean\n  this.readBoolean = function() {\n    return 1 === this.readBits(1);\n  };\n\n  // ():int\n  this.readUnsignedByte = function() {\n    return this.readBits(8);\n  };\n\n  this.loadWord();\n};\n\nmodule.exports = ExpGolomb;\n\n},{}],55:[function(require,module,exports){\n/**\n * mux.js\n *\n * Copyright (c) 2014 Brightcove\n * All rights reserved.\n *\n * A lightweight readable stream implemention that handles event dispatching.\n * Objects that inherit from streams should call init in their constructors.\n */\n'use strict';\n\nvar Stream = function() {\n  this.init = function() {\n    var listeners = {};\n    /**\n     * Add a listener for a specified event type.\n     * @param type {string} the event name\n     * @param listener {function} the callback to be invoked when an event of\n     * the specified type occurs\n     */\n    this.on = function(type, listener) {\n      if (!listeners[type]) {\n        listeners[type] = [];\n      }\n      listeners[type].push(listener);\n    };\n    /**\n     * Remove a listener for a specified event type.\n     * @param type {string} the event name\n     * @param listener {function} a function previously registered for this\n     * type of event through `on`\n     */\n    this.off = function(type, listener) {\n      var index;\n      if (!listeners[type]) {\n        return false;\n      }\n      index = listeners[type].indexOf(listener);\n      listeners[type].splice(index, 1);\n      return index > -1;\n    };\n    /**\n     * Trigger an event of the specified type on this stream. Any additional\n     * arguments to this function are passed as parameters to event listeners.\n     * @param type {string} the event name\n     */\n    this.trigger = function(type) {\n      var callbacks, i, length, args;\n      callbacks = listeners[type];\n      if (!callbacks) {\n        return;\n      }\n      // Slicing the arguments on every invocation of this method\n      // can add a significant amount of overhead. Avoid the\n      // intermediate object creation for the common case of a\n      // single callback argument\n      if (arguments.length === 2) {\n        length = callbacks.length;\n        for (i = 0; i < length; ++i) {\n          callbacks[i].call(this, arguments[1]);\n        }\n      } else {\n        args = [];\n        i = arguments.length;\n        for (i = 1; i < arguments.length; ++i) {\n          args.push(arguments[i]);\n        }\n        length = callbacks.length;\n        for (i = 0; i < length; ++i) {\n          callbacks[i].apply(this, args);\n        }\n      }\n    };\n    /**\n     * Destroys the stream and cleans up.\n     */\n    this.dispose = function() {\n      listeners = {};\n    };\n  };\n};\n\n/**\n * Forwards all `data` events on this stream to the destination stream. The\n * destination stream should provide a method `push` to receive the data\n * events as they arrive.\n * @param destination {stream} the stream that will receive all `data` events\n * @param autoFlush {boolean} if false, we will not call `flush` on the destination\n *                            when the current stream emits a 'done' event\n * @see http://nodejs.org/api/stream.html#stream_readable_pipe_destination_options\n */\nStream.prototype.pipe = function(destination) {\n  this.on('data', function(data) {\n    destination.push(data);\n  });\n\n  this.on('done', function(flushSource) {\n    destination.flush(flushSource);\n  });\n\n  return destination;\n};\n\n// Default stream functions that are expected to be overridden to perform\n// actual work. These are provided by the prototype as a sort of no-op\n// implementation so that we don't have to check for their existence in the\n// `pipe` function above.\nStream.prototype.push = function(data) {\n  this.trigger('data', data);\n};\n\nStream.prototype.flush = function(flushSource) {\n  this.trigger('done', flushSource);\n};\n\nmodule.exports = Stream;\n\n},{}],56:[function(require,module,exports){\nvar bundleFn = arguments[3];\nvar sources = arguments[4];\nvar cache = arguments[5];\n\nvar stringify = JSON.stringify;\n\nmodule.exports = function (fn) {\n    var keys = [];\n    var wkey;\n    var cacheKeys = Object.keys(cache);\n    \n    for (var i = 0, l = cacheKeys.length; i < l; i++) {\n        var key = cacheKeys[i];\n        if (cache[key].exports === fn) {\n            wkey = key;\n            break;\n        }\n    }\n    \n    if (!wkey) {\n        wkey = Math.floor(Math.pow(16, 8) * Math.random()).toString(16);\n        var wcache = {};\n        for (var i = 0, l = cacheKeys.length; i < l; i++) {\n            var key = cacheKeys[i];\n            wcache[key] = key;\n        }\n        sources[wkey] = [\n            Function(['require','module','exports'], '(' + fn + ')(self)'),\n            wcache\n        ];\n    }\n    var skey = Math.floor(Math.pow(16, 8) * Math.random()).toString(16);\n    \n    var scache = {}; scache[wkey] = wkey;\n    sources[skey] = [\n        Function(['require'],'require(' + stringify(wkey) + ')(self)'),\n        scache\n    ];\n    \n    var src = '(' + bundleFn + ')({'\n        + Object.keys(sources).map(function (key) {\n            return stringify(key) + ':['\n                + sources[key][0]\n                + ',' + stringify(sources[key][1]) + ']'\n            ;\n        }).join(',')\n        + '},{},[' + stringify(skey) + '])'\n    ;\n    \n    var URL = window.URL || window.webkitURL || window.mozURL || window.msURL;\n    \n    return new Worker(URL.createObjectURL(\n        new Blob([src], { type: 'text/javascript' })\n    ));\n};\n\n},{}],57:[function(require,module,exports){\n(function (global){\n/**\n * @file videojs-contrib-hls.js\n *\n * The main file for the HLS project.\n * License: https://github.com/videojs/videojs-contrib-hls/blob/master/LICENSE\n */\n'use strict';\n\nvar _createClass = (function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ('value' in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; })();\n\nvar _get = function get(_x, _x2, _x3) { var _again = true; _function: while (_again) { var object = _x, property = _x2, receiver = _x3; _again = false; if (object === null) object = Function.prototype; var desc = Object.getOwnPropertyDescriptor(object, property); if (desc === undefined) { var parent = Object.getPrototypeOf(object); if (parent === null) { return undefined; } else { _x = parent; _x2 = property; _x3 = receiver; _again = true; desc = parent = undefined; continue _function; } } else if ('value' in desc) { return desc.value; } else { var getter = desc.get; if (getter === undefined) { return undefined; } return getter.call(receiver); } } };\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { 'default': obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError('Cannot call a class as a function'); } }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== 'function' && superClass !== null) { throw new TypeError('Super expression must either be null or a function, not ' + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\nvar _globalDocument = require('global/document');\n\nvar _globalDocument2 = _interopRequireDefault(_globalDocument);\n\nvar _playlistLoader = require('./playlist-loader');\n\nvar _playlistLoader2 = _interopRequireDefault(_playlistLoader);\n\nvar _playlist = require('./playlist');\n\nvar _playlist2 = _interopRequireDefault(_playlist);\n\nvar _xhr = require('./xhr');\n\nvar _xhr2 = _interopRequireDefault(_xhr);\n\nvar _decrypter = require('./decrypter');\n\nvar _binUtils = require('./bin-utils');\n\nvar _binUtils2 = _interopRequireDefault(_binUtils);\n\nvar _videojsContribMediaSources = require('videojs-contrib-media-sources');\n\nvar _m3u8 = require('./m3u8');\n\nvar _m3u82 = _interopRequireDefault(_m3u8);\n\nvar _videoJs = (typeof window !== \"undefined\" ? window['videojs'] : typeof global !== \"undefined\" ? global['videojs'] : null);\n\nvar _videoJs2 = _interopRequireDefault(_videoJs);\n\nvar _masterPlaylistController = require('./master-playlist-controller');\n\nvar _masterPlaylistController2 = _interopRequireDefault(_masterPlaylistController);\n\n/**\n * determine if an object a is differnt from\n * and object b. both only having one dimensional\n * properties\n *\n * @param {Object} a object one\n * @param {Object} b object two\n * @return {Boolean} if the object has changed or not\n */\nvar objectChanged = function objectChanged(a, b) {\n  if (typeof a !== typeof b) {\n    return true;\n  }\n  // if we have a different number of elements\n  // something has changed\n  if (Object.keys(a).length !== Object.keys(b).length) {\n    return true;\n  }\n\n  for (var prop in a) {\n    if (!b[prop] || a[prop] !== b[prop]) {\n      return true;\n    }\n  }\n  return false;\n};\n\nvar Hls = {\n  PlaylistLoader: _playlistLoader2['default'],\n  Playlist: _playlist2['default'],\n  Decrypter: _decrypter.Decrypter,\n  AsyncStream: _decrypter.AsyncStream,\n  decrypt: _decrypter.decrypt,\n  utils: _binUtils2['default'],\n  xhr: (0, _xhr2['default'])()\n};\n\n// the desired length of video to maintain in the buffer, in seconds\nHls.GOAL_BUFFER_LENGTH = 30;\n\n// A fudge factor to apply to advertised playlist bitrates to account for\n// temporary flucations in client bandwidth\nvar BANDWIDTH_VARIANCE = 1.2;\n\n/**\n * Returns the CSS value for the specified property on an element\n * using `getComputedStyle`. Firefox has a long-standing issue where\n * getComputedStyle() may return null when running in an iframe with\n * `display: none`.\n *\n * @see https://bugzilla.mozilla.org/show_bug.cgi?id=548397\n * @param {HTMLElement} el the htmlelement to work on\n * @param {string} the proprety to get the style for\n */\nvar safeGetComputedStyle = function safeGetComputedStyle(el, property) {\n  var result = undefined;\n\n  if (!el) {\n    return '';\n  }\n\n  result = getComputedStyle(el);\n  if (!result) {\n    return '';\n  }\n\n  return result[property];\n};\n\n/**\n * Chooses the appropriate media playlist based on the current\n * bandwidth estimate and the player size.\n *\n * @return {Playlist} the highest bitrate playlist less than the currently detected\n * bandwidth, accounting for some amount of bandwidth variance\n */\nHls.STANDARD_PLAYLIST_SELECTOR = function () {\n  var effectiveBitrate = undefined;\n  var sortedPlaylists = this.playlists.master.playlists.slice();\n  var bandwidthPlaylists = [];\n  var now = +new Date();\n  var i = undefined;\n  var variant = undefined;\n  var bandwidthBestVariant = undefined;\n  var resolutionPlusOne = undefined;\n  var resolutionPlusOneAttribute = undefined;\n  var resolutionBestVariant = undefined;\n  var width = undefined;\n  var height = undefined;\n\n  sortedPlaylists.sort(Hls.comparePlaylistBandwidth);\n\n  // filter out any playlists that have been excluded due to\n  // incompatible configurations or playback errors\n  sortedPlaylists = sortedPlaylists.filter(function (localVariant) {\n    if (typeof localVariant.excludeUntil !== 'undefined') {\n      return now >= localVariant.excludeUntil;\n    }\n    return true;\n  });\n\n  // filter out any variant that has greater effective bitrate\n  // than the current estimated bandwidth\n  i = sortedPlaylists.length;\n  while (i--) {\n    variant = sortedPlaylists[i];\n\n    // ignore playlists without bandwidth information\n    if (!variant.attributes || !variant.attributes.BANDWIDTH) {\n      continue;\n    }\n\n    effectiveBitrate = variant.attributes.BANDWIDTH * BANDWIDTH_VARIANCE;\n\n    if (effectiveBitrate < this.bandwidth) {\n      bandwidthPlaylists.push(variant);\n\n      // since the playlists are sorted in ascending order by\n      // bandwidth, the first viable variant is the best\n      if (!bandwidthBestVariant) {\n        bandwidthBestVariant = variant;\n      }\n    }\n  }\n\n  i = bandwidthPlaylists.length;\n\n  // sort variants by resolution\n  bandwidthPlaylists.sort(Hls.comparePlaylistResolution);\n\n  // forget our old variant from above,\n  // or we might choose that in high-bandwidth scenarios\n  // (this could be the lowest bitrate rendition as  we go through all of them above)\n  variant = null;\n\n  width = parseInt(safeGetComputedStyle(this.tech_.el(), 'width'), 10);\n  height = parseInt(safeGetComputedStyle(this.tech_.el(), 'height'), 10);\n\n  // iterate through the bandwidth-filtered playlists and find\n  // best rendition by player dimension\n  while (i--) {\n    variant = bandwidthPlaylists[i];\n\n    // ignore playlists without resolution information\n    if (!variant.attributes || !variant.attributes.RESOLUTION || !variant.attributes.RESOLUTION.width || !variant.attributes.RESOLUTION.height) {\n      continue;\n    }\n\n    // since the playlists are sorted, the first variant that has\n    // dimensions less than or equal to the player size is the best\n    var variantResolution = variant.attributes.RESOLUTION;\n\n    if (variantResolution.width === width && variantResolution.height === height) {\n      // if we have the exact resolution as the player use it\n      resolutionPlusOne = null;\n      resolutionBestVariant = variant;\n      break;\n    } else if (variantResolution.width < width && variantResolution.height < height) {\n      // if both dimensions are less than the player use the\n      // previous (next-largest) variant\n      break;\n    } else if (!resolutionPlusOne || variantResolution.width < resolutionPlusOneAttribute.width && variantResolution.height < resolutionPlusOneAttribute.height) {\n      // If we still haven't found a good match keep a\n      // reference to the previous variant for the next loop\n      // iteration\n\n      // By only saving variants if they are smaller than the\n      // previously saved variant, we ensure that we also pick\n      // the highest bandwidth variant that is just-larger-than\n      // the video player\n      resolutionPlusOne = variant;\n      resolutionPlusOneAttribute = resolutionPlusOne.attributes.RESOLUTION;\n    }\n  }\n\n  // fallback chain of variants\n  return resolutionPlusOne || resolutionBestVariant || bandwidthBestVariant || sortedPlaylists[0];\n};\n\n// HLS is a source handler, not a tech. Make sure attempts to use it\n// as one do not cause exceptions.\nHls.canPlaySource = function () {\n  return _videoJs2['default'].log.warn('HLS is no longer a tech. Please remove it from ' + 'your player\\'s techOrder.');\n};\n\n/**\n * Whether the browser has built-in HLS support.\n */\nHls.supportsNativeHls = (function () {\n  var video = _globalDocument2['default'].createElement('video');\n\n  // native HLS is definitely not supported if HTML5 video isn't\n  if (!_videoJs2['default'].getComponent('Html5').isSupported()) {\n    return false;\n  }\n\n  // HLS manifests can go by many mime-types\n  var canPlay = [\n  // Apple santioned\n  'application/vnd.apple.mpegurl',\n  // Apple sanctioned for backwards compatibility\n  'audio/mpegurl',\n  // Very common\n  'audio/x-mpegurl',\n  // Very common\n  'application/x-mpegurl',\n  // Included for completeness\n  'video/x-mpegurl', 'video/mpegurl', 'application/mpegurl'];\n\n  return canPlay.some(function (canItPlay) {\n    return (/maybe|probably/i.test(video.canPlayType(canItPlay))\n    );\n  });\n})();\n\n/**\n * HLS is a source handler, not a tech. Make sure attempts to use it\n * as one do not cause exceptions.\n */\nHls.isSupported = function () {\n  return _videoJs2['default'].log.warn('HLS is no longer a tech. Please remove it from ' + 'your player\\'s techOrder.');\n};\n\nvar Component = _videoJs2['default'].getComponent('Component');\n\n/**\n * The Hls Handler object, where we orchestrate all of the parts\n * of HLS to interact with video.js\n *\n * @class HlsHandler\n * @extends videojs.Component\n * @param {Object} source the soruce object\n * @param {Tech} tech the parent tech object\n * @param {Object} options optional and required options\n */\n\nvar HlsHandler = (function (_Component) {\n  _inherits(HlsHandler, _Component);\n\n  function HlsHandler(source, tech, options) {\n    var _this = this;\n\n    _classCallCheck(this, HlsHandler);\n\n    _get(Object.getPrototypeOf(HlsHandler.prototype), 'constructor', this).call(this, tech);\n\n    // tech.player() is deprecated but setup a reference to HLS for\n    // backwards-compatibility\n    if (tech.options_ && tech.options_.playerId) {\n      var _player = (0, _videoJs2['default'])(tech.options_.playerId);\n\n      if (!_player.hasOwnProperty('hls')) {\n        Object.defineProperty(_player, 'hls', {\n          get: function get() {\n            _videoJs2['default'].log.warn('player.hls is deprecated. Use player.tech.hls instead.');\n            return _this;\n          }\n        });\n      }\n    }\n\n    this.options_ = _videoJs2['default'].mergeOptions(_videoJs2['default'].options.hls || {}, options.hls);\n    this.tech_ = tech;\n    this.source_ = source;\n\n    // start playlist selection at a reasonable bandwidth for\n    // broadband internet\n    // 0.5 Mbps\n    this.bandwidth = this.options_.bandwidth || 4194304;\n    this.bytesReceived = 0;\n\n    // listen for fullscreenchange events for this player so that we\n    // can adjust our quality selection quickly\n    this.on(_globalDocument2['default'], ['fullscreenchange', 'webkitfullscreenchange', 'mozfullscreenchange', 'MSFullscreenChange'], function (event) {\n      var fullscreenElement = _globalDocument2['default'].fullscreenElement || _globalDocument2['default'].webkitFullscreenElement || _globalDocument2['default'].mozFullScreenElement || _globalDocument2['default'].msFullscreenElement;\n\n      if (fullscreenElement && fullscreenElement.contains(_this.tech_.el())) {\n        _this.masterPlaylistController_.fastQualityChange_();\n      }\n    });\n\n    this.on(this.tech_, 'seeking', function () {\n      this.setCurrentTime(this.tech_.currentTime());\n    });\n    this.on(this.tech_, 'error', function () {\n      if (this.masterPlaylistController_) {\n        this.masterPlaylistController_.pauseLoading();\n      }\n    });\n\n    this.audioTrackChange_ = function () {\n      _this.masterPlaylistController_.useAudio();\n    };\n\n    this.on(this.tech_, 'play', this.play);\n  }\n\n  /**\n   * The Source Handler object, which informs video.js what additional\n   * MIME types are supported and sets up playback. It is registered\n   * automatically to the appropriate tech based on the capabilities of\n   * the browser it is running in. It is not necessary to use or modify\n   * this object in normal usage.\n   */\n\n  /**\n   * called when player.src gets called, handle a new source\n   *\n   * @param {Object} src the source object to handle\n   */\n\n  _createClass(HlsHandler, [{\n    key: 'src',\n    value: function src(_src) {\n      var _this2 = this;\n\n      // do nothing if the src is falsey\n      if (!_src) {\n        return;\n      }\n\n      ['withCredentials', 'bandwidth'].forEach(function (option) {\n        if (typeof _this2.source_[option] !== 'undefined') {\n          _this2.options_[option] = _this2.source_[option];\n        }\n      });\n      this.options_.url = this.source_.src;\n      this.options_.tech = this.tech_;\n      this.options_.externHls = Hls;\n      this.options_.bandwidth = this.bandwidth;\n      this.masterPlaylistController_ = new _masterPlaylistController2['default'](this.options_);\n      // `this` in selectPlaylist should be the HlsHandler for backwards\n      // compatibility with < v2\n      this.masterPlaylistController_.selectPlaylist = Hls.STANDARD_PLAYLIST_SELECTOR.bind(this);\n\n      // re-expose some internal objects for backwards compatibility with < v2\n      this.playlists = this.masterPlaylistController_.masterPlaylistLoader_;\n      this.mediaSource = this.masterPlaylistController_.mediaSource;\n\n      // Proxy assignment of some properties to the master playlist\n      // controller. Using a custom property for backwards compatibility\n      // with < v2\n      Object.defineProperties(this, {\n        selectPlaylist: {\n          get: function get() {\n            return this.masterPlaylistController_.selectPlaylist;\n          },\n          set: function set(selectPlaylist) {\n            this.masterPlaylistController_.selectPlaylist = selectPlaylist.bind(this);\n          }\n        },\n        bandwidth: {\n          get: function get() {\n            return this.masterPlaylistController_.mainSegmentLoader_.bandwidth;\n          },\n          set: function set(bandwidth) {\n            this.masterPlaylistController_.mainSegmentLoader_.bandwidth = bandwidth;\n          }\n        }\n      });\n\n      this.tech_.one('canplay', this.masterPlaylistController_.setupFirstPlay.bind(this.masterPlaylistController_));\n\n      this.masterPlaylistController_.on('sourceopen', function () {\n        _this2.tech_.audioTracks().addEventListener('change', _this2.audioTrackChange_);\n      });\n\n      this.masterPlaylistController_.on('audioinfo', function (e) {\n        if (!_videoJs2['default'].browser.IS_FIREFOX || !_this2.audioInfo_ || !objectChanged(_this2.audioInfo_, e.info)) {\n          _this2.audioInfo_ = e.info;\n          return;\n        }\n\n        var error = 'had different audio properties (channels, sample rate, etc.) ' + 'or changed in some other way.  This behavior is currently ' + 'unsupported in Firefox due to an issue: \\n\\n' + 'https://bugzilla.mozilla.org/show_bug.cgi?id=1247138\\n\\n';\n\n        var enabledTrack = undefined;\n        var defaultTrack = undefined;\n\n        _this2.masterPlaylistController_.audioTracks_.forEach(function (t) {\n          if (!defaultTrack && t['default']) {\n            defaultTrack = t;\n          }\n\n          if (!enabledTrack && t.enabled) {\n            enabledTrack = t;\n          }\n        });\n\n        // they did not switch audiotracks\n        // blacklist the current playlist\n        if (!enabledTrack.getLoader(_this2.activeAudioGroup_())) {\n          error = 'The rendition that we tried to switch to ' + error + 'Unfortunately that means we will have to blacklist ' + 'the current playlist and switch to another. Sorry!';\n          _this2.masterPlaylistController_.blacklistCurrentPlaylist();\n        } else {\n          error = 'The audio track \\'' + enabledTrack.label + '\\' that we tried to ' + ('switch to ' + error + ' Unfortunately this means we will have to ') + ('return you to the main track \\'' + defaultTrack.label + '\\'. Sorry!');\n          defaultTrack.enabled = true;\n          _this2.tech_.audioTracks().removeTrack(enabledTrack);\n        }\n\n        _videoJs2['default'].log.warn(error);\n        _this2.masterPlaylistController_.useAudio();\n      });\n      this.masterPlaylistController_.on('selectedinitialmedia', function () {\n        // clear current audioTracks\n        _this2.tech_.clearTracks('audio');\n        _this2.masterPlaylistController_.audioTracks_.forEach(function (track) {\n          _this2.tech_.audioTracks().addTrack(track);\n        });\n      });\n\n      // the bandwidth of the primary segment loader is our best\n      // estimate of overall bandwidth\n      this.on(this.masterPlaylistController_, 'progress', function () {\n        this.bandwidth = this.masterPlaylistController_.mainSegmentLoader_.bandwidth;\n        this.tech_.trigger('progress');\n      });\n\n      // do nothing if the tech has been disposed already\n      // this can occur if someone sets the src in player.ready(), for instance\n      if (!this.tech_.el()) {\n        return;\n      }\n\n      this.tech_.src(_videoJs2['default'].URL.createObjectURL(this.masterPlaylistController_.mediaSource));\n    }\n\n    /**\n     * a helper for grabbing the active audio group from MasterPlaylistController\n     *\n     * @private\n     */\n  }, {\n    key: 'activeAudioGroup_',\n    value: function activeAudioGroup_() {\n      return this.masterPlaylistController_.activeAudioGroup();\n    }\n\n    /**\n     * Begin playing the video.\n     */\n  }, {\n    key: 'play',\n    value: function play() {\n      this.masterPlaylistController_.play();\n    }\n\n    /**\n     * a wrapper around the function in MasterPlaylistController\n     */\n  }, {\n    key: 'setCurrentTime',\n    value: function setCurrentTime(currentTime) {\n      this.masterPlaylistController_.setCurrentTime(currentTime);\n    }\n\n    /**\n     * a wrapper around the function in MasterPlaylistController\n     */\n  }, {\n    key: 'duration',\n    value: function duration() {\n      return this.masterPlaylistController_.duration();\n    }\n\n    /**\n     * a wrapper around the function in MasterPlaylistController\n     */\n  }, {\n    key: 'seekable',\n    value: function seekable() {\n      return this.masterPlaylistController_.seekable();\n    }\n\n    /**\n    * Abort all outstanding work and cleanup.\n    */\n  }, {\n    key: 'dispose',\n    value: function dispose() {\n      if (this.masterPlaylistController_) {\n        this.masterPlaylistController_.dispose();\n      }\n      this.tech_.audioTracks().removeEventListener('change', this.audioTrackChange_);\n\n      _get(Object.getPrototypeOf(HlsHandler.prototype), 'dispose', this).call(this);\n    }\n  }]);\n\n  return HlsHandler;\n})(Component);\n\nvar HlsSourceHandler = function HlsSourceHandler(mode) {\n  return {\n    canHandleSource: function canHandleSource(srcObj) {\n      // this forces video.js to skip this tech/mode if its not the one we have been\n      // overriden to use, by returing that we cannot handle the source.\n      if (_videoJs2['default'].options.hls && _videoJs2['default'].options.hls.mode && _videoJs2['default'].options.hls.mode !== mode) {\n        return false;\n      }\n      return HlsSourceHandler.canPlayType(srcObj.type);\n    },\n    handleSource: function handleSource(source, tech, options) {\n      if (mode === 'flash') {\n        // We need to trigger this asynchronously to give others the chance\n        // to bind to the event when a source is set at player creation\n        tech.setTimeout(function () {\n          tech.trigger('loadstart');\n        }, 1);\n      }\n\n      var settings = _videoJs2['default'].mergeOptions(options, { hls: { mode: mode } });\n\n      tech.hls = new HlsHandler(source, tech, settings);\n\n      tech.hls.xhr = (0, _xhr2['default'])();\n      // Use a global `before` function if specified on videojs.Hls.xhr\n      // but still allow for a per-player override\n      if (_videoJs2['default'].Hls.xhr.beforeRequest) {\n        tech.hls.xhr.beforeRequest = _videoJs2['default'].Hls.xhr.beforeRequest;\n      }\n\n      tech.hls.src(source.src);\n      return tech.hls;\n    },\n    canPlayType: function canPlayType(type) {\n      if (HlsSourceHandler.canPlayType(type)) {\n        return 'maybe';\n      }\n      return '';\n    }\n  };\n};\n\n/**\n * A comparator function to sort two playlist object by bandwidth.\n *\n * @param {Object} left a media playlist object\n * @param {Object} right a media playlist object\n * @return {Number} Greater than zero if the bandwidth attribute of\n * left is greater than the corresponding attribute of right. Less\n * than zero if the bandwidth of right is greater than left and\n * exactly zero if the two are equal.\n */\nHls.comparePlaylistBandwidth = function (left, right) {\n  var leftBandwidth = undefined;\n  var rightBandwidth = undefined;\n\n  if (left.attributes && left.attributes.BANDWIDTH) {\n    leftBandwidth = left.attributes.BANDWIDTH;\n  }\n  leftBandwidth = leftBandwidth || window.Number.MAX_VALUE;\n  if (right.attributes && right.attributes.BANDWIDTH) {\n    rightBandwidth = right.attributes.BANDWIDTH;\n  }\n  rightBandwidth = rightBandwidth || window.Number.MAX_VALUE;\n\n  return leftBandwidth - rightBandwidth;\n};\n\n/**\n * A comparator function to sort two playlist object by resolution (width).\n * @param {Object} left a media playlist object\n * @param {Object} right a media playlist object\n * @return {Number} Greater than zero if the resolution.width attribute of\n * left is greater than the corresponding attribute of right. Less\n * than zero if the resolution.width of right is greater than left and\n * exactly zero if the two are equal.\n */\nHls.comparePlaylistResolution = function (left, right) {\n  var leftWidth = undefined;\n  var rightWidth = undefined;\n\n  if (left.attributes && left.attributes.RESOLUTION && left.attributes.RESOLUTION.width) {\n    leftWidth = left.attributes.RESOLUTION.width;\n  }\n\n  leftWidth = leftWidth || window.Number.MAX_VALUE;\n\n  if (right.attributes && right.attributes.RESOLUTION && right.attributes.RESOLUTION.width) {\n    rightWidth = right.attributes.RESOLUTION.width;\n  }\n\n  rightWidth = rightWidth || window.Number.MAX_VALUE;\n\n  // NOTE - Fallback to bandwidth sort as appropriate in cases where multiple renditions\n  // have the same media dimensions/ resolution\n  if (leftWidth === rightWidth && left.attributes.BANDWIDTH && right.attributes.BANDWIDTH) {\n    return left.attributes.BANDWIDTH - right.attributes.BANDWIDTH;\n  }\n  return leftWidth - rightWidth;\n};\n\nHlsSourceHandler.canPlayType = function (type) {\n  var mpegurlRE = /^(audio|video|application)\\/(x-|vnd\\.apple\\.)?mpegurl/i;\n\n  // favor native HLS support if it's available\n  if (Hls.supportsNativeHls) {\n    return false;\n  }\n  return mpegurlRE.test(type);\n};\n\nif (typeof _videoJs2['default'].MediaSource === 'undefined' || typeof _videoJs2['default'].URL === 'undefined') {\n  _videoJs2['default'].MediaSource = _videojsContribMediaSources.MediaSource;\n  _videoJs2['default'].URL = _videojsContribMediaSources.URL;\n}\n\n// register source handlers with the appropriate techs\nif (_videojsContribMediaSources.MediaSource.supportsNativeMediaSources()) {\n  _videoJs2['default'].getComponent('Html5').registerSourceHandler(HlsSourceHandler('html5'));\n}\nif (window.Uint8Array) {\n  _videoJs2['default'].getComponent('Flash').registerSourceHandler(HlsSourceHandler('flash'));\n}\n\n_videoJs2['default'].HlsHandler = HlsHandler;\n_videoJs2['default'].HlsSourceHandler = HlsSourceHandler;\n_videoJs2['default'].Hls = Hls;\n_videoJs2['default'].m3u8 = _m3u82['default'];\n_videoJs2['default'].registerComponent('Hls', Hls);\n_videoJs2['default'].options.hls = _videoJs2['default'].options.hls || {};\n\nmodule.exports = {\n  Hls: Hls,\n  HlsHandler: HlsHandler,\n  HlsSourceHandler: HlsSourceHandler\n};\n}).call(this,typeof global !== \"undefined\" ? global : typeof self !== \"undefined\" ? self : typeof window !== \"undefined\" ? window : {})\n},{\"./bin-utils\":1,\"./decrypter\":5,\"./m3u8\":7,\"./master-playlist-controller\":11,\"./playlist\":13,\"./playlist-loader\":12,\"./xhr\":19,\"global/document\":21,\"videojs-contrib-media-sources\":34}]},{},[57])(57)\n});"]}